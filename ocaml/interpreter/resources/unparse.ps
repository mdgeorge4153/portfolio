%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: unparsing.dvi
%%Pages: 28
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Roman Times-Italic Times-Bold Symbol Courier
%%DocumentPaperSizes: Letter
%%EndComments
%DVIPSCommandLine: dvips -o unparsing.ps unparsing.dvi
%DVIPSParameters: dpi=600, comments removed
%DVIPSSource:  TeX output 1998.08.13:1143
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: pstricks.pro
% PostScript prologue for pstricks.tex.
% Created 1994/6/23. Source file was pstricks.doc
% Version 0.93a, 93/03/12.
% For use with Rokicki's dvips.
/tx@Dict 200 dict def tx@Dict begin
/ADict 25 dict def
/CM { matrix currentmatrix } bind def
/SLW /setlinewidth load def
/CLW /currentlinewidth load def
/CP /currentpoint load def
/ED { exch def } bind def
/L /lineto load def
/T /translate load def
/TMatrix { } def
/RAngle { 0 } def
/Atan { /atan load stopped { pop pop 0 } if } def
/Div { dup 0 eq { pop } { div } ifelse } def
/NET { neg exch neg exch T } def
/Pyth { dup mul exch dup mul add sqrt } def
/PtoC { 2 copy cos mul 3 1 roll sin mul } def
/PathLength@ { /z z y y1 sub x x1 sub Pyth add def /y1 y def /x1 x def }
def
/PathLength { flattenpath /z 0 def { /y1 ED /x1 ED /y2 y1 def /x2 x1 def
} { /y ED /x ED PathLength@ } {} { /y y2 def /x x2 def PathLength@ }
/pathforall load stopped { pop pop pop pop } if z } def
/STP { .996264 dup scale } def
/STV { SDict begin normalscale end STP  } def
/DashLine { dup 0 gt { /a .5 def PathLength exch div } { pop /a 1 def
PathLength } ifelse /b ED /x ED /y ED /z y x add def b a .5 sub 2 mul y
mul sub z Div round z mul a .5 sub 2 mul y mul add b exch Div dup y mul
/y ED x mul /x ED x 0 gt y 0 gt and { [ y x ] 1 a sub y mul } { [ 1 0 ]
0 } ifelse setdash stroke } def
/DotLine { /b PathLength def /a ED /z ED /y CLW def /z y z add def a 0 gt
{ /b b a div def } { a 0 eq { /b b y sub def } { a -3 eq { /b b y add
def } if } ifelse } ifelse [ 0 b b z Div round Div dup 0 le { pop 1 } if
] a 0 gt { 0 } { y 2 div a -2 gt { neg } if } ifelse setdash 1
setlinecap stroke } def
/LineFill { gsave abs CLW add /a ED a 0 dtransform round exch round exch
2 copy idtransform exch Atan rotate idtransform pop /a ED .25 .25
itransform translate pathbbox /y2 ED a Div ceiling cvi /x2 ED /y1 ED a
Div cvi /x1 ED /y2 y2 y1 sub def clip newpath 2 setlinecap systemdict
/setstrokeadjust known { true setstrokeadjust } if x2 x1 sub 1 add { x1
a mul y1 moveto 0 y2 rlineto stroke /x1 x1 1 add def } repeat grestore }
def
/BeginArrow { ADict begin /@mtrx CM def gsave 2 copy T 2 index sub neg
exch 3 index sub exch Atan rotate newpath } def
/EndArrow { @mtrx setmatrix CP grestore end } def
/Arrow { CLW mul add dup 2 div /w ED mul dup /h ED mul /a ED { 0 h T 1 -1
scale } if w neg h moveto 0 0 L w h L w neg a neg rlineto gsave fill
grestore } def
/Tbar { CLW mul add /z ED z -2 div CLW 2 div moveto z 0 rlineto stroke 0
CLW moveto } def
/Bracket { CLW mul add dup CLW sub 2 div /x ED mul CLW add /y ED /z CLW 2
div def x neg y moveto x neg CLW 2 div L x CLW 2 div L x y L stroke 0
CLW moveto } def
/RoundBracket { CLW mul add dup 2 div /x ED mul /y ED /mtrx CM def 0 CLW
2 div T x y mul 0 ne { x y scale } if 1 1 moveto .85 .5 .35 0 0 0
curveto -.35 0 -.85 .5 -1 1 curveto mtrx setmatrix stroke 0 CLW moveto }
def
/SD { 0 360 arc fill } def
/EndDot { { /z DS def } { /z 0 def } ifelse /b ED 0 z DS SD b { 0 z DS
CLW sub SD } if 0 DS z add CLW 4 div sub moveto } def
/Shadow { [ { /moveto load } { /lineto load } { /curveto load } {
/closepath load } /pathforall load stopped { pop pop pop pop CP /moveto
load } if ] cvx newpath 3 1 roll T exec } def
/NArray { aload length 2 div dup dup cvi eq not { exch pop } if /n exch
cvi def } def
/NArray { /f ED counttomark 2 div dup cvi /n ED n eq not { exch pop } if
f { ] aload /Points ED } { n 2 mul 1 add -1 roll pop } ifelse } def
/Line { NArray n 0 eq not { n 1 eq { 0 0 /n 2 def } if ArrowA /n n 2 sub
def n { Lineto } repeat CP 4 2 roll ArrowB L pop pop } if } def
/Arcto { /a [ 6 -2 roll ] cvx def a r /arcto load stopped { 5 } { 4 }
ifelse { pop } repeat a } def
/CheckClosed { dup n 2 mul 1 sub index eq 2 index n 2 mul 1 add index eq
and { pop pop /n n 1 sub def } if } def
/Polygon { NArray n 2 eq { 0 0 /n 3 def } if n 3 lt { n { pop pop }
repeat } { n 3 gt { CheckClosed } if n 2 mul -2 roll /y0 ED /x0 ED /y1
ED /x1 ED x1 y1 /x1 x0 x1 add 2 div def /y1 y0 y1 add 2 div def x1 y1
moveto /n n 2 sub def n { Lineto } repeat x1 y1 x0 y0 6 4 roll Lineto
Lineto pop pop closepath } ifelse } def
/Diamond { /mtrx CM def T rotate /h ED /w ED dup 0 eq { pop } { CLW mul
neg /d ED /a w h Atan def /h d a sin Div h add def /w d a cos Div w add
def } ifelse mark w 2 div h 2 div w 0 0 h neg w neg 0 0 h w 2 div h 2
div /ArrowA { moveto } def /ArrowB { } def false Line closepath mtrx
setmatrix } def
%  Modification Denis GIROU (CNRS/IDRIS - France) <Denis.Girou@idris.fr> - 15 Jan. 1997
% /Triangle { /mtrx CM def translate rotate /h ED 2 div /w ED dup 0 eq {
% pop } { CLW mul /d ED /h h d w h Atan sin Div sub def /w w d h w Atan 2
% div dup cos exch sin Div mul sub def } ifelse mark 0 d w neg d 0 h w d 0
% d /ArrowA { moveto } def /ArrowB { } def false Line closepath mtrx
% setmatrix } def
/Triangle { /mtrx CM def translate rotate /h ED 2 div /w ED dup
CLW mul /d ED /h h d w h Atan sin Div sub def /w w d h w Atan 2
div dup cos exch sin Div mul sub def mark 0 d w neg d 0 h w d 0
d /ArrowA { moveto } def /ArrowB { } def false Line closepath mtrx
setmatrix } def
/CCA { /y ED /x ED 2 copy y sub /dy1 ED x sub /dx1 ED /l1 dx1 dy1 Pyth
def } def
/CCA { /y ED /x ED 2 copy y sub /dy1 ED x sub /dx1 ED /l1 dx1 dy1 Pyth
def } def
/CC { /l0 l1 def /x1 x dx sub def /y1 y dy sub def /dx0 dx1 def /dy0 dy1
def CCA /dx dx0 l1 c exp mul dx1 l0 c exp mul add def /dy dy0 l1 c exp
mul dy1 l0 c exp mul add def /m dx0 dy0 Atan dx1 dy1 Atan sub 2 div cos
abs b exp a mul dx dy Pyth Div 2 div def /x2 x l0 dx mul m mul sub def
/y2 y l0 dy mul m mul sub def /dx l1 dx mul m mul neg def /dy l1 dy mul
m mul neg def } def
/IC { /c c 1 add def c 0 lt { /c 0 def } { c 3 gt { /c 3 def } if }
ifelse /a a 2 mul 3 div 45 cos b exp div def CCA /dx 0 def /dy 0 def }
def
/BOC { IC CC x2 y2 x1 y1 ArrowA CP 4 2 roll x y curveto } def
/NC { CC x1 y1 x2 y2 x y curveto } def
/EOC { x dx sub y dy sub 4 2 roll ArrowB 2 copy curveto } def
/BAC { IC CC x y moveto CC x1 y1 CP ArrowA } def
/NAC { x2 y2 x y curveto CC x1 y1 } def
/EAC { x2 y2 x y ArrowB curveto pop pop } def
/OpenCurve { NArray n 3 lt { n { pop pop } repeat } { BOC /n n 3 sub def
n { NC } repeat EOC } ifelse } def
/AltCurve { { false NArray n 2 mul 2 roll [ n 2 mul 3 sub 1 roll ] aload
/Points ED n 2 mul -2 roll } { false NArray } ifelse n 4 lt { n { pop
pop } repeat } { BAC /n n 4 sub def n { NAC } repeat EAC } ifelse } def
/ClosedCurve { NArray n 3 lt { n { pop pop } repeat } { n 3 gt {
CheckClosed } if 6 copy n 2 mul 6 add 6 roll IC CC x y moveto n { NC }
repeat closepath pop pop } ifelse } def
/SQ { /r ED r r moveto r r neg L r neg r neg L r neg r L fill } def
/ST { /y ED /x ED x y moveto x neg y L 0 x L fill } def
/SP { /r ED gsave 0 r moveto 4 { 72 rotate 0 r L } repeat fill grestore }
def
/FontDot { DS 2 mul dup matrix scale matrix concatmatrix exch matrix
rotate matrix concatmatrix exch findfont exch makefont setfont } def
/Rect { x1 y1 y2 add 2 div moveto x1 y2 lineto x2 y2 lineto x2 y1 lineto
x1 y1 lineto closepath } def
/OvalFrame { x1 x2 eq y1 y2 eq or { pop pop x1 y1 moveto x2 y2 L } { y1
y2 sub abs x1 x2 sub abs 2 copy gt { exch pop } { pop } ifelse 2 div
exch { dup 3 1 roll mul exch } if 2 copy lt { pop } { exch pop } ifelse
/b ED x1 y1 y2 add 2 div moveto x1 y2 x2 y2 b arcto x2 y2 x2 y1 b arcto
x2 y1 x1 y1 b arcto x1 y1 x1 y2 b arcto 16 { pop } repeat closepath }
ifelse } def
/Frame { CLW mul /a ED 3 -1 roll 2 copy gt { exch } if a sub /y2 ED a add
/y1 ED 2 copy gt { exch } if a sub /x2 ED a add /x1 ED 1 index 0 eq {
pop pop Rect } { OvalFrame } ifelse } def
/BezierNArray { /f ED counttomark 2 div dup cvi /n ED n eq not { exch pop
} if n 1 sub neg 3 mod 3 add 3 mod { 0 0 /n n 1 add def } repeat f { ]
aload /Points ED } { n 2 mul 1 add -1 roll pop } ifelse } def
/OpenBezier { BezierNArray n 1 eq { pop pop } { ArrowA n 4 sub 3 idiv { 6
2 roll 4 2 roll curveto } repeat 6 2 roll 4 2 roll ArrowB curveto }
ifelse } def
/ClosedBezier { BezierNArray n 1 eq { pop pop } { moveto n 1 sub 3 idiv {
6 2 roll 4 2 roll curveto } repeat closepath } ifelse } def
/BezierShowPoints { gsave Points aload length 2 div cvi /n ED moveto n 1
sub { lineto } repeat CLW 2 div SLW [ 4 4 ] 0 setdash stroke grestore }
def
/Parab { /y0 exch def /x0 exch def /y1 exch def /x1 exch def /dx x0 x1
sub 3 div def /dy y0 y1 sub 3 div def x0 dx sub y0 dy add x1 y1 ArrowA
x0 dx add y0 dy add x0 2 mul x1 sub y1 ArrowB curveto /Points [ x1 y1 x0
y0 x0 2 mul x1 sub y1 ] def } def
/Grid { newpath /a 4 string def /b ED /c ED /n ED cvi dup 1 lt { pop 1 }
if /s ED s div dup 0 eq { pop 1 } if /dy ED s div dup 0 eq { pop 1 } if
/dx ED dy div round dy mul /y0 ED dx div round dx mul /x0 ED dy div
round cvi /y2 ED dx div round cvi /x2 ED dy div round cvi /y1 ED dx div
round cvi /x1 ED /h y2 y1 sub 0 gt { 1 } { -1 } ifelse def /w x2 x1 sub
0 gt { 1 } { -1 } ifelse def b 0 gt { /z1 b 4 div CLW 2 div add def
/Helvetica findfont b scalefont setfont /b b .95 mul CLW 2 div add def }
if systemdict /setstrokeadjust known { true setstrokeadjust /t { } def }
{ /t { transform 0.25 sub round 0.25 add exch 0.25 sub round 0.25 add
exch itransform } bind def } ifelse gsave n 0 gt { 1 setlinecap [ 0 dy n
div ] dy n div 2 div setdash } { 2 setlinecap } ifelse /i x1 def /f y1
dy mul n 0 gt { dy n div 2 div h mul sub } if def /g y2 dy mul n 0 gt {
dy n div 2 div h mul add } if def x2 x1 sub w mul 1 add dup 1000 gt {
pop 1000 } if { i dx mul dup y0 moveto b 0 gt { gsave c i a cvs dup
stringwidth pop /z2 ED w 0 gt {z1} {z1 z2 add neg} ifelse h 0 gt {b neg}
{z1} ifelse rmoveto show grestore } if dup t f moveto g t L stroke /i i
w add def } repeat grestore gsave n 0 gt { 1 setlinecap [ 0 dx n div ]
dy n div 2 div setdash } { 2 setlinecap } ifelse /i y1 def /f x1 dx mul
n 0 gt { dx n div 2 div w mul sub } if def /g x2 dx mul n 0 gt { dx n
div 2 div w mul add } if def y2 y1 sub h mul 1 add dup 1000 gt { pop
1000 } if { newpath i dy mul dup x0 exch moveto b 0 gt { gsave c i a cvs
dup stringwidth pop /z2 ED w 0 gt {z1 z2 add neg} {z1} ifelse h 0 gt
{z1} {b neg} ifelse rmoveto show grestore } if dup f exch t moveto g
exch t L stroke /i i h add def } repeat grestore } def
/ArcArrow { /d ED /b ED /a ED gsave newpath 0 -1000 moveto clip newpath 0
1 0 0 b grestore c mul /e ED pop pop pop r a e d PtoC y add exch x add
exch r a PtoC y add exch x add exch b pop pop pop pop a e d CLW 8 div c
mul neg d } def
/Ellipse { /mtrx CM def T scale 0 0 1 5 3 roll arc mtrx setmatrix } def
/Rot { CP CP translate 3 -1 roll neg rotate NET  } def
/RotBegin { tx@Dict /TMatrix known not { /TMatrix { } def /RAngle { 0 }
def } if /TMatrix [ TMatrix CM ] cvx def /a ED a Rot /RAngle [ RAngle
dup a add ] cvx def } def
/RotEnd { /TMatrix [ TMatrix setmatrix ] cvx def /RAngle [ RAngle pop ]
cvx def } def
/PutCoor { gsave CP T CM STV exch exec moveto setmatrix CP grestore } def
/PutBegin { /TMatrix [ TMatrix CM ] cvx def CP 4 2 roll T moveto } def
/PutEnd { CP /TMatrix [ TMatrix setmatrix ] cvx def moveto } def
/Uput { /a ED add 2 div /h ED 2 div /w ED /s a sin def /c a cos def /b s
abs c abs 2 copy gt dup /q ED { pop } { exch pop } ifelse def /w1 c b
div w mul def /h1 s b div h mul def q { w1 abs w sub dup c mul abs } {
h1 abs h sub dup s mul abs } ifelse } def
/UUput { /z ED abs /y ED /x ED q { x s div c mul abs y gt } { x c div s
mul abs y gt } ifelse { x x mul y y mul sub z z mul add sqrt z add } { q
{ x s div } { x c div } ifelse abs } ifelse a PtoC h1 add exch w1 add
exch } def
/BeginOL { dup (all) eq exch TheOL eq or { IfVisible not { Visible
/IfVisible true def } if } { IfVisible { Invisible /IfVisible false def
} if } ifelse } def
/InitOL { /OLUnit [ 3000 3000 matrix defaultmatrix dtransform ] cvx def
/Visible { CP OLUnit idtransform T moveto } def /Invisible { CP OLUnit
neg exch neg exch idtransform T moveto } def /BOL { BeginOL } def
/IfVisible true def } def
end
%%EndProcSet
%%BeginProcSet: pst-dots.pro
10 dict dup begin
  /FontType 3 def
  /FontMatrix [ .001 0 0 .001 0 0 ] def
  /FontBBox [ 0 0 0 0 ] def
  /Encoding 256 array def
  0 1 255 { Encoding exch /.notdef put } for
  Encoding
    dup (b) 0 get /Bullet put
    dup (c) 0 get /Circle put
    dup (C) 0 get /BoldCircle put
    dup (u) 0 get /SolidTriangle put
    dup (t) 0 get /Triangle put
    dup (T) 0 get /BoldTriangle put
    dup (r) 0 get /SolidSquare put
    dup (s) 0 get /Square put
    dup (S) 0 get /BoldSquare put
    dup (q) 0 get /SolidPentagon put
    dup (p) 0 get /Pentagon put
    (P) 0 get /BoldPentagon put
  /Metrics 13 dict def
  Metrics begin
    /Bullet 1000 def
    /Circle 1000 def
    /BoldCircle 1000 def
    /SolidTriangle 1344 def
    /Triangle 1344 def
    /BoldTriangle 1344 def
    /SolidSquare 886 def
    /Square 886 def
    /BoldSquare 886 def
    /SolidPentagon 1093.2 def
    /Pentagon 1093.2 def
    /BoldPentagon 1093.2 def
    /.notdef 0 def
  end
  /BBoxes 13 dict def
  BBoxes begin
    /Circle { -550 -550 550 550 } def
    /BoldCircle /Circle load def
    /Bullet /Circle load def
    /Triangle { -571.5 -330 571.5 660 } def
    /BoldTriangle /Triangle load def
    /SolidTriangle /Triangle load def
    /Square { -450 -450 450 450 } def
    /BoldSquare /Square load def
    /SolidSquare /Square load def
    /Pentagon { -546.6 -465 546.6 574.7 } def
    /BoldPentagon /Pentagon load def
    /SolidPentagon /Pentagon load def
    /.notdef { 0 0 0 0 } def
  end
  /CharProcs 20 dict def
  CharProcs begin
    /Adjust {
      2 copy dtransform floor .5 add exch floor .5 add exch idtransform
      3 -1 roll div 3 1 roll exch div exch scale
    } def
    /CirclePath { 0 0 500 0 360 arc closepath } def
    /Bullet { 500 500 Adjust CirclePath fill } def
    /Circle { 500 500 Adjust CirclePath .9 .9 scale CirclePath eofill } def
    /BoldCircle { 500 500 Adjust CirclePath .8 .8 scale CirclePath eofill } def
    /BoldCircle { CirclePath .8 .8 scale CirclePath eofill } def
    /TrianglePath {
      0  660 moveto -571.5 -330 lineto 571.5 -330 lineto closepath
    } def
    /SolidTriangle { TrianglePath fill } def
    /Triangle { TrianglePath .85 .85 scale TrianglePath eofill } def
    /BoldTriangle { TrianglePath .7 .7 scale TrianglePath eofill } def
    /SquarePath {
      -450 450 moveto 450 450 lineto 450 -450 lineto -450 -450 lineto
      closepath
    } def
    /SolidSquare { SquarePath fill } def
    /Square { SquarePath .89 .89 scale SquarePath eofill } def
    /BoldSquare { SquarePath .78 .78 scale SquarePath eofill } def
    /PentagonPath {
      -337.8 -465   moveto
       337.8 -465   lineto
       546.6  177.6 lineto
         0    574.7 lineto
      -546.6  177.6 lineto
      closepath
    } def
    /SolidPentagon { PentagonPath fill } def
    /Pentagon { PentagonPath .89 .89 scale PentagonPath eofill } def
    /BoldPentagon { PentagonPath .78 .78 scale PentagonPath eofill } def
    /.notdef { } def
  end
  /BuildGlyph {
    exch
    begin
      Metrics 1 index get exec 0
      BBoxes 3 index get exec
      setcachedevice
      CharProcs begin load exec end
    end
  } def
  /BuildChar {
    1 index /Encoding get exch get
    1 index /BuildGlyph get exec
  } bind def
end
/PSTricksDotFont exch definefont pop
%%EndProcSet
%%BeginProcSet: pst-node.pro
% PostScript prologue for pst-node.tex.
% Created 1994/6/7. Source file was pst-node.doc
% Version 0.93a/b-97 patch 1, 97/05/09.
% For use with Rokicki's dvips.
/tx@NodeDict 400 dict def tx@NodeDict begin
tx@Dict begin /T /translate load def end
/NewNode { gsave /next ED dict dup 3 1 roll def exch { dup 3 1 roll def }
if begin tx@Dict begin STV CP T exec end /NodeMtrx CM def next end
grestore } def
/InitPnode { /Y ED /X ED /NodePos { NodeSep Cos mul NodeSep Sin mul } def
} def
/InitCnode { /r ED /Y ED /X ED /NodePos { NodeSep r add dup Cos mul exch
Sin mul } def } def
/GetRnodePos { Cos 0 gt { /dx r NodeSep add def } { /dx l NodeSep sub def
} ifelse Sin 0 gt { /dy u NodeSep add def } { /dy d NodeSep sub def }
ifelse dx Sin mul abs dy Cos mul abs gt { dy Cos mul Sin div dy } { dx
dup Sin mul Cos Div } ifelse } def
/InitRnode { /Y ED /X ED X sub /r ED /l X neg def Y add neg /d ED Y sub
/u ED /NodePos { GetRnodePos } def } def
/DiaNodePos { w h mul w Sin mul abs h Cos mul abs add Div NodeSep add dup
Cos mul exch Sin mul } def
/TriNodePos { Sin s lt { d NodeSep sub dup Cos mul Sin Div exch } { w h
mul w Sin mul h Cos abs mul add Div NodeSep add dup Cos mul exch Sin mul
} ifelse } def
/InitTriNode { sub 2 div exch 2 div exch 2 copy T 2 copy 4 index index /d
ED pop pop pop pop -90 mul rotate /NodeMtrx CM def /X 0 def /Y 0 def d
sub abs neg /d ED d add /h ED 2 div h mul h d sub Div /w ED /s d w Atan
sin def /NodePos { TriNodePos } def } def
/OvalNodePos { /ww w NodeSep add def /hh h NodeSep add def Sin ww mul Cos
hh mul Atan dup cos ww mul exch sin hh mul } def
/GetCenter { begin X Y NodeMtrx transform CM itransform end } def
/XYPos { dup sin exch cos Do /Cos ED /Sin ED /Dist ED Cos 0 gt { Dist
Dist Sin mul Cos div } { Cos 0 lt { Dist neg Dist Sin mul Cos div neg }
{ 0 Dist Sin mul } ifelse } ifelse Do } def
/GetEdge { dup 0 eq { pop begin 1 0 NodeMtrx dtransform CM idtransform
exch atan sub dup sin /Sin ED cos /Cos ED /NodeSep ED NodePos NodeMtrx
dtransform CM idtransform end } { 1 eq {{exch}} {{}} ifelse /Do ED pop
XYPos } ifelse } def
/AddOffset { 1 index 0 eq { pop pop } { 2 copy 5 2 roll cos mul add 4 1
roll sin mul sub exch } ifelse } def
/GetEdgeA { NodeSepA AngleA NodeA NodeSepTypeA GetEdge OffsetA AngleA
AddOffset yA add /yA1 ED xA add /xA1 ED } def
/GetEdgeB { NodeSepB AngleB NodeB NodeSepTypeB GetEdge OffsetB AngleB
AddOffset yB add /yB1 ED xB add /xB1 ED } def
/GetArmA { ArmTypeA 0 eq { /xA2 ArmA AngleA cos mul xA1 add def /yA2 ArmA
AngleA sin mul yA1 add def } { ArmTypeA 1 eq {{exch}} {{}} ifelse /Do ED
ArmA AngleA XYPos OffsetA AngleA AddOffset yA add /yA2 ED xA add /xA2 ED
} ifelse } def
/GetArmB { ArmTypeB 0 eq { /xB2 ArmB AngleB cos mul xB1 add def /yB2 ArmB
AngleB sin mul yB1 add def } { ArmTypeB 1 eq {{exch}} {{}} ifelse /Do ED
ArmB AngleB XYPos OffsetB AngleB AddOffset yB add /yB2 ED xB add /xB2 ED
} ifelse } def
/InitNC { /b ED /a ED /NodeSepTypeB ED /NodeSepTypeA ED /NodeSepB ED
/NodeSepA ED /OffsetB ED /OffsetA ED tx@NodeDict a known tx@NodeDict b
known and dup { /NodeA a load def /NodeB b load def NodeA GetCenter /yA
ED /xA ED NodeB GetCenter /yB ED /xB ED } if } def
/LPutLine { 4 copy 3 -1 roll sub neg 3 1 roll sub Atan /NAngle ED 1 t sub
mul 3 1 roll 1 t sub mul 4 1 roll t mul add /Y ED t mul add /X ED } def
/LPutLines { mark LPutVar counttomark 2 div 1 sub /n ED t floor dup n gt
{ pop n 1 sub /t 1 def } { dup t sub neg /t ED } ifelse cvi 2 mul { pop
} repeat LPutLine cleartomark } def
/BezierMidpoint { /y3 ED /x3 ED /y2 ED /x2 ED /y1 ED /x1 ED /y0 ED /x0 ED
/t ED /cx x1 x0 sub 3 mul def /cy y1 y0 sub 3 mul def /bx x2 x1 sub 3
mul cx sub def /by y2 y1 sub 3 mul cy sub def /ax x3 x0 sub cx sub bx
sub def /ay y3 y0 sub cy sub by sub def ax t 3 exp mul bx t t mul mul
add cx t mul add x0 add ay t 3 exp mul by t t mul mul add cy t mul add
y0 add 3 ay t t mul mul mul 2 by t mul mul add cy add 3 ax t t mul mul
mul 2 bx t mul mul add cx add atan /NAngle ED /Y ED /X ED } def
/HPosBegin { yB yA ge { /t 1 t sub def } if /Y yB yA sub t mul yA add def
} def
/HPosEnd { /X Y yyA sub yyB yyA sub Div xxB xxA sub mul xxA add def
/NAngle yyB yyA sub xxB xxA sub Atan def } def
/HPutLine { HPosBegin /yyA ED /xxA ED /yyB ED /xxB ED HPosEnd  } def
/HPutLines { HPosBegin yB yA ge { /check { le } def } { /check { ge } def
} ifelse /xxA xA def /yyA yA def mark xB yB LPutVar { dup Y check { exit
} { /yyA ED /xxA ED } ifelse } loop /yyB ED /xxB ED cleartomark HPosEnd 
} def
/VPosBegin { xB xA lt { /t 1 t sub def } if /X xB xA sub t mul xA add def
} def
/VPosEnd { /Y X xxA sub xxB xxA sub Div yyB yyA sub mul yyA add def
/NAngle yyB yyA sub xxB xxA sub Atan def } def
/VPutLine { VPosBegin /yyA ED /xxA ED /yyB ED /xxB ED VPosEnd  } def
/VPutLines { VPosBegin xB xA ge { /check { le } def } { /check { ge } def
} ifelse /xxA xA def /yyA yA def mark xB yB LPutVar { 1 index X check {
exit } { /yyA ED /xxA ED } ifelse } loop /yyB ED /xxB ED cleartomark
VPosEnd  } def
/HPutCurve { gsave newpath /SaveLPutVar /LPutVar load def LPutVar 8 -2
roll moveto curveto flattenpath /LPutVar [ {} {} {} {} pathforall ] cvx
def grestore exec /LPutVar /SaveLPutVar load def } def
/NCCoor { /AngleA yB yA sub xB xA sub Atan def /AngleB AngleA 180 add def
GetEdgeA GetEdgeB /LPutVar [ xB1 yB1 xA1 yA1 ] cvx def /LPutPos {
LPutVar LPutLine } def /HPutPos { LPutVar HPutLine } def /VPutPos {
LPutVar VPutLine } def LPutVar } def
/NCLine { NCCoor tx@Dict begin ArrowA CP 4 2 roll ArrowB lineto pop pop
end } def
/NCLines { false NArray n 0 eq { NCLine } { 2 copy yA sub exch xA sub
Atan /AngleA ED n 2 mul dup index exch index yB sub exch xB sub Atan
/AngleB ED GetEdgeA GetEdgeB /LPutVar [ xB1 yB1 n 2 mul 4 add 4 roll xA1
yA1 ] cvx def mark LPutVar tx@Dict begin false Line end /LPutPos {
LPutLines } def /HPutPos { HPutLines } def /VPutPos { VPutLines } def }
ifelse } def
/NCCurve { GetEdgeA GetEdgeB xA1 xB1 sub yA1 yB1 sub Pyth 2 div dup 3 -1
roll mul /ArmA ED mul /ArmB ED /ArmTypeA 0 def /ArmTypeB 0 def GetArmA
GetArmB xA2 yA2 xA1 yA1 tx@Dict begin ArrowA end xB2 yB2 xB1 yB1 tx@Dict
begin ArrowB end curveto /LPutVar [ xA1 yA1 xA2 yA2 xB2 yB2 xB1 yB1 ]
cvx def /LPutPos { t LPutVar BezierMidpoint } def /HPutPos { { HPutLines
} HPutCurve } def /VPutPos { { VPutLines } HPutCurve } def } def
/NCAngles { GetEdgeA GetEdgeB GetArmA GetArmB /mtrx AngleA matrix rotate
def xA2 yA2 mtrx transform pop xB2 yB2 mtrx transform exch pop mtrx
itransform /y0 ED /x0 ED mark ArmB 0 ne { xB1 yB1 } if xB2 yB2 x0 y0 xA2
yA2 ArmA 0 ne { xA1 yA1 } if tx@Dict begin false Line end /LPutVar [ xB1
yB1 xB2 yB2 x0 y0 xA2 yA2 xA1 yA1 ] cvx def /LPutPos { LPutLines } def
/HPutPos { HPutLines } def /VPutPos { VPutLines } def } def
/NCAngle { GetEdgeA GetEdgeB GetArmB /mtrx AngleA matrix rotate def xB2
yB2 mtrx itransform pop xA1 yA1 mtrx itransform exch pop mtrx transform
/y0 ED /x0 ED mark ArmB 0 ne { xB1 yB1 } if xB2 yB2 x0 y0 xA1 yA1
tx@Dict begin false Line end /LPutVar [ xB1 yB1 xB2 yB2 x0 y0 xA1 yA1 ]
cvx def /LPutPos { LPutLines } def /HPutPos { HPutLines } def /VPutPos {
VPutLines } def } def
/NCBar { GetEdgeA GetEdgeB GetArmA GetArmB /mtrx AngleA matrix rotate def
xA2 yA2 mtrx itransform pop xB2 yB2 mtrx itransform pop sub dup 0 mtrx
transform 3 -1 roll 0 gt { /yB2 exch yB2 add def /xB2 exch xB2 add def }
{ /yA2 exch neg yA2 add def /xA2 exch neg xA2 add def } ifelse mark ArmB
0 ne { xB1 yB1 } if xB2 yB2 xA2 yA2 ArmA 0 ne { xA1 yA1 } if tx@Dict
begin false Line end /LPutVar [ xB1 yB1 xB2 yB2 xA2 yA2 xA1 yA1 ] cvx
def /LPutPos { LPutLines } def /HPutPos { HPutLines } def /VPutPos {
VPutLines } def } def
/NCDiag { GetEdgeA GetEdgeB GetArmA GetArmB mark ArmB 0 ne { xB1 yB1 } if
xB2 yB2 xA2 yA2 ArmA 0 ne { xA1 yA1 } if tx@Dict begin false Line end
/LPutVar [ xB1 yB1 xB2 yB2 xA2 yA2 xA1 yA1 ] cvx def /LPutPos {
LPutLines } def /HPutPos { HPutLines } def /VPutPos { VPutLines } def }
def
/NCDiagg { GetEdgeA GetArmA yB yA2 sub xB xA2 sub Atan 180 add /AngleB ED
GetEdgeB mark xB1 yB1 xA2 yA2 ArmA 0 ne { xA1 yA1 } if tx@Dict begin
false Line end /LPutVar [ xB1 yB1 xA2 yA2 xA1 yA1 ] cvx def /LPutPos {
LPutLines } def /HPutPos { HPutLines } def /VPutPos { VPutLines } def }
def
/NCLoop { GetEdgeA GetEdgeB GetArmA GetArmB /mtrx AngleA matrix rotate
def xA2 yA2 mtrx transform loopsize add /yA3 ED /xA3 ED /xB3 xB2 yB2
mtrx transform pop def xB3 yA3 mtrx itransform /yB3 ED /xB3 ED xA3 yA3
mtrx itransform /yA3 ED /xA3 ED mark ArmB 0 ne { xB1 yB1 } if xB2 yB2
xB3 yB3 xA3 yA3 xA2 yA2 ArmA 0 ne { xA1 yA1 } if tx@Dict begin false
Line end /LPutVar [ xB1 yB1 xB2 yB2 xB3 yB3 xA3 yA3 xA2 yA2 xA1 yA1 ]
cvx def /LPutPos { LPutLines } def /HPutPos { HPutLines } def /VPutPos {
VPutLines } def } def
% DG/SR modification begin - 9 May 1997
%/NCCircle { 0 0 NodesepA nodeA \tx@GetEdge pop xA sub 2 div dup 2 exp r
%r mul sub abs sqrt atan 2 mul /a ED r AngleA 90 add PtoC yA add exch xA add
%exch 2 copy /LPutVar [ 4 2 roll r AngleA ] cvx def /LPutPos { LPutVar t 360
%mul add dup 5 1 roll 90 sub \tx@PtoC 3 -1 roll add /Y ED add /X ED /NAngle ED
/NCCircle { NodeSepA 0 NodeA 0 GetEdge pop 2 div dup 2 exp r
r mul sub abs sqrt atan 2 mul /a ED r AngleA 90 add PtoC yA add exch xA add
exch 2 copy /LPutVar [ 4 2 roll r AngleA ] cvx def /LPutPos { LPutVar t 360
mul add dup 5 1 roll 90 sub PtoC 3 -1 roll add /Y ED add /X ED /NAngle ED
% DG/SR modification end
} def /HPutPos { LPutPos } def /VPutPos { LPutPos } def r AngleA 90 sub a add
AngleA 270 add a sub tx@Dict begin /angleB ED /angleA ED /r ED /c 57.2957 r
Div def /y ED /x ED } def
/NCBox { /d ED /h ED /AngleB yB yA sub xB xA sub Atan def /AngleA AngleB
180 add def GetEdgeA GetEdgeB /dx d AngleB sin mul def /dy d AngleB cos
mul neg def /hx h AngleB sin mul neg def /hy h AngleB cos mul def
/LPutVar [ xA1 hx add yA1 hy add xB1 hx add yB1 hy add xB1 dx add yB1 dy
add xA1 dx add yA1 dy add ] cvx def /LPutPos { LPutLines } def /HPutPos
{ xB yB xA yA LPutLine } def /VPutPos { HPutPos } def mark LPutVar
tx@Dict begin false Polygon end } def
/NCArcBox { /l ED neg /d ED /h ED /a ED /AngleA yB yA sub xB xA sub Atan
def /AngleB AngleA 180 add def /tA AngleA a sub 90 add def /tB tA a 2
mul add def /r xB xA sub tA cos tB cos sub Div dup 0 eq { pop 1 } if def
/x0 xA r tA cos mul add def /y0 yA r tA sin mul add def /c 57.2958 r div
def /AngleA AngleA a sub 180 add def /AngleB AngleB a add 180 add def
GetEdgeA GetEdgeB /AngleA tA 180 add yA yA1 sub xA xA1 sub Pyth c mul
sub def /AngleB tB 180 add yB yB1 sub xB xB1 sub Pyth c mul add def l 0
eq { x0 y0 r h add AngleA AngleB arc x0 y0 r d add AngleB AngleA arcn }
{ x0 y0 translate /tA AngleA l c mul add def /tB AngleB l c mul sub def
0 0 r h add tA tB arc r h add AngleB PtoC r d add AngleB PtoC 2 copy 6 2
roll l arcto 4 { pop } repeat r d add tB PtoC l arcto 4 { pop } repeat 0
0 r d add tB tA arcn r d add AngleA PtoC r h add AngleA PtoC 2 copy 6 2
roll l arcto 4 { pop } repeat r h add tA PtoC l arcto 4 { pop } repeat }
ifelse closepath /LPutVar [ x0 y0 r AngleA AngleB h d ] cvx def /LPutPos
{ LPutVar /d ED /h ED /AngleB ED /AngleA ED /r ED /y0 ED /x0 ED t 1 le {
r h add AngleA 1 t sub mul AngleB t mul add dup 90 add /NAngle ED PtoC }
{ t 2 lt { /NAngle AngleB 180 add def r 2 t sub h mul t 1 sub d mul add
add AngleB PtoC } { t 3 lt { r d add AngleB 3 t sub mul AngleA 2 t sub
mul add dup 90 sub /NAngle ED PtoC } { /NAngle AngleA 180 add def r 4 t
sub d mul t 3 sub h mul add add AngleA PtoC } ifelse } ifelse } ifelse
y0 add /Y ED x0 add /X ED } def /HPutPos { LPutPos } def /VPutPos {
LPutPos } def } def
/Tfan { /AngleA yB yA sub xB xA sub Atan def GetEdgeA w xA1 xB sub yA1 yB
sub Pyth Pyth w Div CLW 2 div mul 2 div dup AngleA sin mul yA1 add /yA1
ED AngleA cos mul xA1 add /xA1 ED /LPutVar [ xA1 yA1 m { xB w add yB xB
w sub yB } { xB yB w sub xB yB w add } ifelse xA1 yA1 ] cvx def /LPutPos
{ LPutLines } def /VPutPos@ { LPutVar flag { 8 4 roll pop pop pop pop }
{ pop pop pop pop 4 2 roll } ifelse } def /VPutPos { VPutPos@ VPutLine }
def /HPutPos { VPutPos@ HPutLine } def mark LPutVar tx@Dict begin
/ArrowA { moveto } def /ArrowB { } def false Line closepath end } def
/LPutCoor { NAngle tx@Dict begin /NAngle ED end gsave CM STV CP Y sub neg
exch X sub neg exch moveto setmatrix CP grestore } def
/LPut { tx@NodeDict /LPutPos known { LPutPos } { CP /Y ED /X ED /NAngle 0
def } ifelse LPutCoor  } def
/HPutAdjust { Sin Cos mul 0 eq { 0 } { d Cos mul Sin div flag not { neg }
if h Cos mul Sin div flag { neg } if 2 copy gt { pop } { exch pop }
ifelse } ifelse s add flag { r add neg } { l add } ifelse X add /X ED }
def
/VPutAdjust { Sin Cos mul 0 eq { 0 } { l Sin mul Cos div flag { neg } if
r Sin mul Cos div flag not { neg } if 2 copy gt { pop } { exch pop }
ifelse } ifelse s add flag { d add } { h add neg } ifelse Y add /Y ED }
def
end
%%EndProcSet
%%BeginFont: Times-Roman
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "22 June 1996",
%   filename = "8r.enc",
%   email = "kb@@mail.tug.org",
%   address = "135 Center Hill Rd. // Plymouth, MA 02360",
%   codetable = "ISO/ASCII",
%   checksum = "119     662    4424",
%   docstring = "Encoding for TrueType or Type 1 fonts to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there down to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def
%%EndFont
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (unparsing.dvi)
@start /Fa 1 9 df<00007FC000000003FFF80000000F863E0000001C06070000007006
01C00000E00600E000018006003000030006001800060006000C000C00060006000C0006
0006001800060003003000060001803000060001803000060001806000060000C0600006
0000C06000060000C0C00006000060C00006000060C00006000060FFFFFFFFFFE0FFFFFF
FFFFE0C00006000060C00006000060C00006000060C000060000606000060000C0600006
0000C06000060000C03000060001803000060001803000060001801800060003000C0006
0006000C0006000600060006000C0003000600180001800600300000E00600E000007006
01C000001C06070000000F863E00000003FFF8000000007FC000002B2D7CA634>8
D E /Fb 1 60 df<3C007E00FF00FF00FF80FF807F803D80018001800180038003000300
070006000C000C0018003000200009157B8712>59 D E /Fc 141[30
5[30 108[{ TeXBase1Encoding ReEncodeFont }2 50.000001
/Courier rf /Fd 3 62 df<0006000C00180030007000E000C001C00380038007000700
0F000E001E001E001C003C003C003C00780078007800780078007800F800F000F000F000
F000F000F000F000F000F000F000F000F000F000F8007800780078007800780078003C00
3C003C001C001E001E000E000F00070007000380038001C000C000E0007000300018000C
00060F437AB11A>40 D<C0006000300018001C000E00060007000380038001C001C001E0
00E000F000F00070007800780078003C003C003C003C003C003C003E001E001E001E001E
001E001E001E001E001E001E001E001E001E003E003C003C003C003C003C003C00780078
0078007000F000F000E001E001C001C003800380070006000E001C00180030006000C000
0F437CB11A>I<FFFFFFFFFFE0FFFFFFFFFFE07FFFFFFFFFE00000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000007FFFFFFFFFE0FFFFFFFFFFE0FFFFFFFFFF
E02B117C9834>61 D E /Fe 256[{}0 66.666667 /Symbol rf
/Ff 138[40 40 40 40 1[40 1[40 8[40 40 2[40 8[40 9[40
40 3[40 1[40 40 40 3[40 65[{ TeXBase1Encoding ReEncodeFont }17
66.666667 /Courier rf /Fg 1 4 df<00C00000E00000C00000C00000C000E0C1C0F8
C7C07CCF801FFE0007F80001E00007F8001FFE007CCF80F8C7C0E0C1C000C00000C00000
C00000E00000C00012157D9619>3 D E /Fh 1 52 df<000000180000000000003C0000
000000007E000000000000FF000000000001FF800000000003E7C00000000007C3E00000
00000F81F0000000001F00F8000000003E007C000000007C003E00000000F8001F000000
01F0000F80000003E00007C0000007C00003E000000F800001F000001F000000F800003E
0000007C00007C0000003E0000F80000001F0001F00000000F8003E000000007C007C000
000003E00F8000000001F01F0000000000F83E00000000007C7C00000000003E78000000
00001FF000000000000F7800000000001F7C00000000003E3E00000000007C1F00000000
00F80F8000000001F007C000000003E003E000000007C001F00000000F8000F80000001F
00007C0000003E00003E0000007C00001F000000F800000F800001F0000007C00003E000
0003E00007C0000001F0000F80000000F8001F000000007C003E000000003E007C000000
001F00F8000000000F81F00000000007C3E00000000003E7C00000000001FF8000000000
00FF0000000000007E0000000000003C0000000000001800000038397BB843>51
D E /Fi 147[17 108[{ TeXBase1Encoding ReEncodeFont }1
61.666618 /Times-Italic rf /Fj 206[31 49[{
 TeXBase1Encoding ReEncodeFont }1 61.666618 /Times-Roman
rf /Fk 256[{}0 61.666618 /Symbol rf /Fl 1 49 df<00E001F003F803F803F807F0
07F007F007E007E00FE00FC00FC00FC01F801F801F801F001F003F003E003E003E007C00
7C007C0078007800F800F00070000D1F7EA111>48 D E /Fm 134[42
42 1[42 46 28 32 37 1[46 42 46 69 23 46 1[23 46 42 28
37 46 37 1[42 16[51 3[55 7[60 60 55 13[42 42 42 42 4[21
2[28 28 37[46 2[{ TeXBase1Encoding ReEncodeFont }34 83.333337
/Times-Bold rf /Fn 139[37 37 37 1[37 3[37 37 1[37 5[37
1[37 97[{ TeXBase1Encoding ReEncodeFont }9 61.666618
/Courier rf /Fo 133[45 45 45 1[45 45 45 45 45 1[45 45
45 45 45 45 1[45 45 45 45 45 45 45 45 45 1[45 9[45 4[45
6[45 7[45 2[45 3[45 11[45 45 2[45 45 45 45 39[{
 TeXBase1Encoding ReEncodeFont }36 75.000000 /Courier
rf /Fp 2 77 df<00000000300000000078000000007800000000F000000000F0000000
00F000000001E000000001E000000003C000000003C000000003C0000000078000000007
800000000F000000000F000000000F000000001E000000001E000000003C000000003C00
0000003C0000000078000000007800000000F000000000F000000000F000000001E00000
0001E000000003C000000003C000000003C0000000078000000007800000000F00000000
0F000000000F000000001E000000001E000000003C000000003C000000003C0000000078
000000007800000000F000000000F000000000F000000001E000000001E000000001E000
000003C000000003C00000000780000000078000000007800000000F000000000F000000
001E000000001E000000001E000000003C000000003C0000000078000000007800000000
7800000000F000000000F000000001E000000001E000000001E000000003C000000003C0
0000000780000000078000000007800000000F000000000F000000001E000000001E0000
00001E000000003C000000003C00000000780000000078000000007800000000F0000000
00F0000000006000000000255782D421>12 D<6000000000F000000000F0000000007800
000000780000000078000000003C000000003C000000001E000000001E000000001E0000
00000F000000000F0000000007800000000780000000078000000003C000000003C00000
0001E000000001E000000001E000000000F000000000F000000000780000000078000000
0078000000003C000000003C000000001E000000001E000000001E000000000F00000000
0F0000000007800000000780000000078000000003C000000003C000000001E000000001
E000000001E000000000F000000000F000000000F000000000780000000078000000003C
000000003C000000003C000000001E000000001E000000000F000000000F000000000F00
0000000780000000078000000003C000000003C000000003C000000001E000000001E000
000000F000000000F000000000F000000000780000000078000000003C000000003C0000
00003C000000001E000000001E000000000F000000000F000000000F0000000007800000
00078000000003C000000003C000000003C000000001E000000001E000000000F0000000
00F000000000F0000000007800000000780000000030255782D421>76
D E /Fq 133[41 46 46 3[30 36 41 1[51 46 51 1[25 2[25
51 46 30 41 51 41 51 46 11[66 4[56 14[66 62[51 2[{
 TeXBase1Encoding ReEncodeFont }23 91.666666 /Times-Bold
rf /Fr 103[50 15[50 10[50 50 50 50 50 50 50 50 50 50
50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50 50
50 1[50 1[50 1[50 1[50 50 2[50 50 50 50 1[50 50 50 50
50 2[50 50 50 50 50 50 50 50 50 50 1[50 50 50 50 50 1[50
50 50 50 50 50 1[50 50 50 50 50 50 50 50 50 50 50 50
50 50 1[50 50 33[{ TeXBase1Encoding ReEncodeFont }82
83.333337 /Courier rf /Fs 7 13 df<0000380000780000F00001E00003C00003C000
0780000F00001F00001E00003E00007C00007C0000F80000F80001F00001F00003F00003
E00007E00007E0000FC0000FC0000FC0001F80001F80001F80001F80003F80003F00003F
00003F00007F00007F00007F00007F00007F00007E00007E0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE
0000FE0000FE0000FE0000FE00007E00007E00007F00007F00007F00007F00007F00003F
00003F00003F00003F80001F80001F80001F80001F80000FC0000FC0000FC00007E00007
E00003E00003F00001F00001F00000F80000F800007C00007C00003E00001E00001F0000
0F000007800003C00003C00001E00000F00000780000381562738226>0
D<600000F000007800003C00001E00001E00000F000007800007C00003C00003E00001F0
0001F00000F80000F800007C00007C00007E00003E00003F00003F00001F80001F80001F
80000FC0000FC0000FC0000FC0000FE00007E00007E00007E00007F00007F00007F00007
F00007F00003F00003F00003F80003F80003F80003F80003F80003F80003F80003F80003
F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003
F00003F00007F00007F00007F00007F00007F00007E00007E00007E0000FE0000FC0000F
C0000FC0000FC0001F80001F80001F80003F00003F00003E00007E00007C00007C0000F8
0000F80001F00001F00003E00003C00007C0000780000F00001E00001E00003C00007800
00F0000060000015627D8226>I<FFFF80FFFF80FFFF80FFFF80F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0
0000F00000F00000FFFF80FFFF80FFFF80FFFF801162708223>I<FFFF80FFFF80FFFF80
FFFF80000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780000780000780000780000780000780
000780000780000780000780000780000780000780FFFF80FFFF80FFFF80FFFF8011627F
8223>I<0000001E000000FE000007FE00001FF000007FC00000FF000001FC000003F800
0007F0000007F000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000001FC000001F8000003F8000007F0000
01FE000003F800000FF000007FC00000FE000000FE0000007FC000000FF0000003F80000
01FE0000007F0000003F8000001F8000001FC000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE0000007F000
0007F0000003F8000001FC000000FF0000007FC000001FF0000007FE000000FE0000001E
1F62788230>8 D<70000000FE0000007FC000001FF0000007FC000001FE0000007F0000
003F8000001FC000001FC000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE0000007F0000003F0000003F800
0001FC000000FF0000003F8000001FE0000007FC000000FE000000FE000007FC00001FE0
00003F800000FF000001FC000003F8000003F0000007F000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000
001FC000001FC000003F8000007F000001FE000007FC00001FF000007FC00000FE000000
700000001F62788230>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F060043674811C>12
D E /Ft 134[42 42 3[23 32 28 1[42 42 42 65 23 2[23 3[37
3[37 51[28 42[46 2[{ .167 SlantFont TeXBase1Encoding ReEncodeFont }15
83.333337 /Times-Roman rf /Fu 6 94 df<0000E00001E00003C0000780000F00001E
00001E00003C0000780000F80000F00001F00001E00003E00003C00007C00007C0000F80
000F80001F80001F00001F00003F00003F00003E00003E00007E00007E00007E00007E00
007E00007C0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC00
00FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC00007C00007E00007E00007E00
007E00007E00003E00003E00003F00003F00001F00001F00001F80000F80000F800007C0
0007C00003C00003E00001E00001F00000F00000F800007800003C00001E00001E00000F
000007800003C00001E00000E0135278BD20>40 D<600000F000007800003C00001E0000
0F00000F000007800003C00003E00001E00001F00000F00000F800007800007C00007C00
003E00003E00003F00001F00001F00001F80001F80000F80000F80000FC0000FC0000FC0
000FC0000FC00007C00007E00007E00007E00007E00007E00007E00007E00007E00007E0
0007E00007E00007E00007E00007E00007E00007E00007E00007E00007C0000FC0000FC0
000FC0000FC0000FC0000F80000F80001F80001F80001F00001F00003F00003E00003E00
007C00007C0000780000F80000F00001F00001E00003E00003C0000780000F00000F0000
1E00003C0000780000F0000060000013527CBD20>I<0000003000000000000078000000
000000780000000000007800000000000078000000000000780000000000007800000000
000078000000000000780000000000007800000000000078000000000000780000000000
007800000000000078000000000000780000000000007800000000000078000000000000
780000000000007800000000000078000000000000780000000000007800000000000078
00000000000078000000000000780000007FFFFFFFFFFFF8FFFFFFFFFFFFFCFFFFFFFFFF
FFFC7FFFFFFFFFFFF8000000780000000000007800000000000078000000000000780000
000000007800000000000078000000000000780000000000007800000000000078000000
000000780000000000007800000000000078000000000000780000000000007800000000
000078000000000000780000000000007800000000000078000000000000780000000000
007800000000000078000000000000780000000000007800000000000078000000000000
3000000036367BAF41>43 D<7FFFFFFFFFFFF8FFFFFFFFFFFFFCFFFFFFFFFFFFFC7FFFFF
FFFFFFF80000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000007FFFFFFFFFFF
F8FFFFFFFFFFFFFCFFFFFFFFFFFFFC7FFFFFFFFFFFF836167B9F41>61
D<FFF8FFF8FFF8FFF8F000F000F000F000F000F000F000F000F000F000F000F000F000F0
00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F0
00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F0
00F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F0
00F000F000F000F000F000F000F000FFF8FFF8FFF8FFF80D5378BD17>91
D<FFF8FFF8FFF8FFF8007800780078007800780078007800780078007800780078007800
780078007800780078007800780078007800780078007800780078007800780078007800
780078007800780078007800780078007800780078007800780078007800780078007800
780078007800780078007800780078007800780078007800780078007800780078007800
780078007800780078007800780078FFF8FFF8FFF8FFF80D537FBD17>93
D E /Fv 17 107 df<7FFFFFFFFFFF80FFFFFFFFFFFFC0FFFFFFFFFFFFC07FFFFFFFFFFF
803204799641>0 D<1E003F007F80FFC0FFC0FFC0FFC07F803F001E000A0A7A9917>I<60
00000006F00000000FF80000001F7C0000003E3E0000007C1F000000F80F800001F007C0
0003E003E00007C001F0000F8000F8001F00007C003E00003E007C00001F00F800000F81
F0000007C3E0000003E7C0000001FF80000000FF000000007E000000007E00000000FF00
000001FF80000003E7C0000007C3E000000F81F000001F00F800003E007C00007C003E00
00F8001F0001F0000F8003E00007C007C00003E00F800001F01F000000F83E0000007C7C
0000003EF80000001FF00000000F6000000006282874A841>I<000003FF00000000003F
FFF000000000FFFFFC00000003FC38FF0000000FC0380FC000003F003803F000007C0038
00F80000F00038003C0001E00038001E0003C00038000F00078000380007800700003800
03800E0000380001C00E0000380001C01C0000380000E01C0000380000E0380000380000
703800003800007070000038000038700000380000387000003800003870000038000038
E000003800001CE000003800001CE000003800001CFFFFFFFFFFFFFCFFFFFFFFFFFFFCFF
FFFFFFFFFFFCE000003800001CE000003800001CE000003800001CE000003800001C7000
003800003870000038000038700000380000387000003800003838000038000070380000
380000701C0000380000E01C0000380000E00E0000380001C00E0000380001C007000038
0003800780003800078003C00038000F0001E00038001E0000F00038003C00007C003800
F800003F003803F000000FC0380FC0000003FC38FF00000000FFFFFC000000003FFFF000
00000003FF00000036367BAF41>8 D<000003FF00000000003FFFF000000000FFFFFC00
000003FC00FF0000000FC0000FC000003F000003F000007C000000F80000F00000003C00
01E00000001E0003F00000001F0007F80000003F80073C0000007B800E1E000000F1C00E
0F000001E1C01C07800003C0E01C03C0000780E03801E0000F00703800F0001E00707000
78003C003870003C0078003870001E00F0003870000F01E00038E0000783C0001CE00003
C780001CE00001EF00001CE00000FE00001CE000007C00001CE000007C00001CE00000FE
00001CE00001EF00001CE00003C780001CE0000783C0001C70000F01E0003870001E00F0
003870003C00780038700078003C00383800F0001E00703801E0000F00701C03C0000780
E01C07800003C0E00E0F000001E1C00E1E000000F1C0073C0000007B8007F80000003F80
03F00000001F0001E00000001E0000F00000003C00007C000000F800003F000003F00000
0FC0000FC0000003FC00FF00000000FFFFFC000000003FFFF00000000003FF0000003636
7BAF41>10 D<000FE000007FFC0001FFFF0003FFFF8007FFFFC00FFFFFE01FFFFFF01FFF
FFF03FFFFFF83FFFFFF87FFFFFFC7FFFFFFCFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFF
FFFEFFFFFFFEFFFFFFFEFFFFFFFE7FFFFFFC7FFFFFFC3FFFFFF83FFFFFF81FFFFFF01FFF
FFF00FFFFFE007FFFFC003FFFF8001FFFF00007FFC00000FE0001F207BA42A>15
D<7FFFFFFFFFFFF8FFFFFFFFFFFFFCFFFFFFFFFFFFFC7FFFFFFFFFFFF800000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000007FFFFFFFFFFFF8FFFFFFFFFFFFFCFFFFFF
FFFFFFFC7FFFFFFFFFFFF800000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
007FFFFFFFFFFFF8FFFFFFFFFFFFFCFFFFFFFFFFFFFC7FFFFFFFFFFFF836287BA841>17
D<60000000000000F8000000000000FE0000000000007F8000000000001FE00000000000
07F8000000000001FE0000000000007F8000000000001FE0000000000007F80000000000
01FE0000000000007F8000000000001FE0000000000007F8000000000001FE0000000000
007F8000000000001FE0000000000007F8000000000001FE0000000000007F8000000000
001FE0000000000007F8000000000001FE0000000000007F8000000000001FC000000000
001FC000000000007F800000000001FE000000000007F800000000001FE000000000007F
800000000001FE000000000007F800000000001FE000000000007F800000000001FE0000
00000007F800000000001FE000000000007F800000000001FE000000000007F800000000
001FE000000000007F800000000001FE000000000007F800000000001FE000000000007F
800000000000FE000000000000F800000000000060000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000007FFFFFFFFFFF80FFFFFFFFFFFFC0FFFFFFFFFF
FFC07FFFFFFFFFFF80324479B441>21 D<0000001C00000000000000003C000000000000
00003C0000000000000000780000000000000000780000000000000000F0000000000000
0001E00000000000000001E00000000000000003C0000000000000000780000000000000
000F80000000000000000F00000000000000001E00000000000000003FFFFFFFFFFFFE00
007FFFFFFFFFFFFF0001FFFFFFFFFFFFFF0003FFFFFFFFFFFFFE0007C000000000000000
1F80000000000000007E0000000000000001FC0000000000000007F0000000000000001F
E000000000000000FF8000000000000000FF80000000000000001FE00000000000000007
F00000000000000001FC00000000000000007E00000000000000001F8000000000000000
07C00000000000000003FFFFFFFFFFFFFE0001FFFFFFFFFFFFFF00007FFFFFFFFFFFFF00
003FFFFFFFFFFFFE00001E00000000000000000F00000000000000000F80000000000000
0007800000000000000003C00000000000000001E00000000000000001E0000000000000
0000F000000000000000007800000000000000007800000000000000003C000000000000
00003C00000000000000001C000000000048307BAC53>40 D<0000000000380000000000
0000003C00000000000000003C00000000000000001E00000000000000001E0000000000
0000000F000000000000000007800000000000000007800000000000000003C000000000
00000001E00000000000000001F00000000000000000F000000000000000007800007FFF
FFFFFFFFFC0000FFFFFFFFFFFFFE0000FFFFFFFFFFFFFF80007FFFFFFFFFFFFFC0000000
0000000003E00000000000000001F800000000000000007E00000000000000003F800000
00000000000FE00000000000000007F80000000000000001FF0000000000000001FF0000
000000000007F8000000000000000FE0000000000000003F80000000000000007E000000
0000000001F80000000000000003E0007FFFFFFFFFFFFFC000FFFFFFFFFFFFFF8000FFFF
FFFFFFFFFE00007FFFFFFFFFFFFC0000000000000000780000000000000000F000000000
00000001F00000000000000001E00000000000000003C000000000000000078000000000
0000000780000000000000000F00000000000000001E00000000000000001E0000000000
0000003C00000000000000003C00000000000000003800000048307BAC53>I<00000000
01800000000003C00000000003C0000000000780000000000780000000000F0000000000
0F00000000001E00000000001E00000000003C00000000003C0000000000780000000000
780000000000F00000000000F00000000001E00000000001E00000000003C00000000003
C0000000000780000000000F80000000000F00000000001E00000000001E00000000003C
00000000003C0000000000780000000000780000000000F00000000000F00000000001E0
0000000001E00000000003C00000000003C0000000000780000000000780000000000F00
000000000F00000000001E00000000001E00000000003C00000000003C00000000007800
00000000780000000000F00000000000F00000000001E00000000001E00000000003C000
00000003C0000000000780000000000780000000000F00000000000F00000000001E0000
0000001E00000000003C00000000007C0000000000780000000000F00000000000F00000
000001E00000000001E00000000003C00000000003C00000000007800000000007800000
00000F00000000000F00000000001E00000000001E00000000003C00000000003C000000
0000780000000000780000000000F00000000000F000000000006000000000002A4E75BB
00>54 D<600000000018F0000000003CF0000000003C7800000000787800000000787800
000000783C00000000F03C00000000F03C00000000F01E00000001E01E00000001E00F00
000003C00F00000003C00F00000003C007800000078007800000078007800000078003C0
00000F0003C000000F0001E000001E0001FFFFFFFE0001FFFFFFFE0000FFFFFFFC0000FF
FFFFFC0000F000003C00007800007800007800007800003C0000F000003C0000F000003C
0000F000001E0001E000001E0001E000001E0001E000000F0003C000000F0003C0000007
800780000007800780000007800780000003C00F00000003C00F00000003C00F00000001
E01E00000001E01E00000000F03C00000000F03C00000000F03C00000000787800000000
7878000000007878000000003CF0000000003CF0000000001FE0000000001FE000000000
1FE0000000000FC0000000000FC0000000000FC000000000078000000000078000000000
030000002E3C80B92F>56 D<00000300000000000780000000000780000000000FC00000
00000FC0000000001FE0000000001FE0000000001FE0000000003CF0000000003CF00000
0000787800000000787800000000F03C00000000F03C00000000F03C00000001E01E0000
0001E01E00000003C00F00000003C00F0000000780078000000780078000000F0003C000
000F0003C000000F0003C000001E0001E000001E0001E000003C0000F000003C0000F000
00780000780000780000780000780000780000F000003C0000F000003C0001E000001E00
01E000001E0003C000000F0003C000000F00078000000780078000000780078000000780
0F00000003C00F00000003C01E00000001E01E00000001E03C00000000F03C00000000F0
3C00000000F0780000000078780000000078F0000000003CF0000000003C600000000018
2E347CB137>94 D<600000000018F0000000003CF0000000003C78000000007878000000
00783C00000000F03C00000000F03C00000000F01E00000001E01E00000001E00F000000
03C00F00000003C007800000078007800000078007800000078003C000000F0003C00000
0F0001E000001E0001E000001E0000F000003C0000F000003C0000780000780000780000
7800007800007800003C0000F000003C0000F000001E0001E000001E0001E000000F0003
C000000F0003C000000F0003C0000007800780000007800780000003C00F00000003C00F
00000001E01E00000001E01E00000000F03C00000000F03C00000000F03C000000007878
000000007878000000003CF0000000003CF0000000001FE0000000001FE0000000001FE0
000000000FC0000000000FC000000000078000000000078000000000030000002E347CB1
37>I<0000C00001E00001E00003C00003C00003C0000780000780000780000F00000F00
001E00001E00001E00003C00003C0000780000780000780000F00000F00001E00001E000
01E00003C00003C00003C0000780000780000F00000F00000F00001E00001E00003C0000
3C00003C0000780000780000780000F00000F000007800007800007800003C00003C0000
3C00001E00001E00000F00000F00000F000007800007800003C00003C00003C00001E000
01E00001E00000F00000F000007800007800007800003C00003C00001E00001E00001E00
000F00000F000007800007800007800003C00003C00003C00001E00001E00000C0135278
BD20>104 D<600000F00000F000007800007800007800003C00003C00003C00001E0000
1E00000F00000F00000F000007800007800003C00003C00003C00001E00001E00000F000
00F00000F000007800007800007800003C00003C00001E00001E00001E00000F00000F00
0007800007800007800003C00003C00003C00001E00001E00003C00003C00003C0000780
000780000780000F00000F00001E00001E00001E00003C00003C00007800007800007800
00F00000F00000F00001E00001E00003C00003C00003C0000780000780000F00000F0000
0F00001E00001E00003C00003C00003C0000780000780000780000F00000F00000600000
13527CBD20>I<60F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0
F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F060045377BD17>I E /Fw
4 63 df<1E003F007F80FFC0FFC0FFC0FFC07F803F001E000A0A7A8917>58
D<1E003F007F80FFC0FFC0FFE0FFE07FE03FE01EE000E000E000E000E001C001C001C003
800380070007000E001C003C00380010000B1A7A8917>I<000000000001800000000000
07C000000000001FC000000000007F800000000001FE000000000007F800000000001FE0
00000000007F800000000001FE000000000007F800000000001FE000000000007F800000
000001FE000000000007F800000000001FE000000000007F800000000001FE0000000000
07F800000000001FE000000000007F800000000001FE000000000007F800000000001FE0
00000000007F800000000000FE000000000000FE0000000000007F8000000000001FE000
0000000007F8000000000001FE0000000000007F8000000000001FE0000000000007F800
0000000001FE0000000000007F8000000000001FE0000000000007F8000000000001FE00
00000000007F8000000000001FE0000000000007F8000000000001FE0000000000007F80
00000000001FE0000000000007F8000000000001FE0000000000007F8000000000001FC0
000000000007C000000000000180323279AD41>I<60000000000000F8000000000000FE
0000000000007F8000000000001FE0000000000007F8000000000001FE0000000000007F
8000000000001FE0000000000007F8000000000001FE0000000000007F8000000000001F
E0000000000007F8000000000001FE0000000000007F8000000000001FE0000000000007
F8000000000001FE0000000000007F8000000000001FE0000000000007F8000000000001
FE0000000000007F8000000000001FC000000000001FC000000000007F800000000001FE
000000000007F800000000001FE000000000007F800000000001FE000000000007F80000
0000001FE000000000007F800000000001FE000000000007F800000000001FE000000000
007F800000000001FE000000000007F800000000001FE000000000007F800000000001FE
000000000007F800000000001FE000000000007F800000000000FE000000000000F80000
0000000060000000000000323279AD41>62 D E /Fx 133[32 37
37 55 37 42 23 32 32 42 42 42 42 60 23 37 1[23 42 42
23 37 42 37 42 42 19[69 46 2[28 2[51 4[51 13[42 42 42
2[21 28 21 41[42 2[{ TeXBase1Encoding ReEncodeFont }37
83.333337 /Times-Italic rf /Fy 90[59 56[46 108[{}2 83.333337
/Symbol rf /Fz 75[25 29[37 27[33 37 1[54 37 37 21 29
25 1[37 37 37 58 21 37 21 21 37 37 25 33 37 33 37 33
25 6[54 54 71 54 54 46 42 50 1[42 54 54 66 46 54 29 25
54 54 42 46 54 50 50 54 1[33 4[21 37 37 37 37 37 37 37
37 37 37 1[19 25 19 2[25 25 25 5[25 30[42 2[{
 TeXBase1Encoding ReEncodeFont }71 75.000000 /Times-Roman
rf /FA 1 14 df<000000003FFC0000000000000003FFFFC00000000000001FFFFFF800
00000000007FFFFFFE000000000001FFC003FF800000000007FC00003FE0000000001FE0
000007F8000000003F80000001FC00000000FE000000007F00000001F8000000001F8000
0003F0000000000FC0000007C00000000003E000000F800000000001F000001F00000000
0000F800003E0000000000007C00007C0000000000003E0000780000000000001E0000F0
0000000000000F0001F00000000000000F8001E0000000000000078003C0000000000000
03C007C000000000000003E0078000000000000001E00F0000000000000000F00F000000
0000000000F00F0000000000000000F01E0000000000000000781E000000000000000078
3C00000000000000003C3C00000000000000003C3C00000000000000003C780000000000
0000001E7800000000000000001E7800000000000000001E7800000000000000001E7800
000000000000001EF000000000000000000FF000000000000000000FF000000000000000
000FF000000000000000000FF000000000000000000FF000000000000000000FF0000000
00000000000FF000000000000000000FF000000000000000000FF000000000000000000F
F000000000000000000FF000000000000000000FF000000000000000000F780000000000
0000001E7800000000000000001E7800000000000000001E7800000000000000001E7800
000000000000001E3C00000000000000003C3C00000000000000003C3C00000000000000
003C1E0000000000000000781E0000000000000000780F0000000000000000F00F000000
0000000000F00F0000000000000000F0078000000000000001E007C000000000000003E0
03C000000000000003C001E0000000000000078001F00000000000000F8000F000000000
00000F0000780000000000001E00007C0000000000003E00003E0000000000007C00001F
000000000000F800000F800000000001F0000007C00000000003E0000003F0000000000F
C0000001F8000000001F80000000FE000000007F000000003F80000001FC000000001FE0
000007F80000000007FC00003FE00000000001FFC003FF8000000000007FFFFFFE000000
0000001FFFFFF800000000000003FFFFC0000000000000003FFC0000000050557BC05B>
13 D E /FB 137[40 45 25 35 35 8[25 45 45 1[40 45 40 1[45
14[56 4[76 11[56 7[45 45 45 4[45 45 49[{ TeXBase1Encoding ReEncodeFont }
20 91.249976 /Times-Italic rf /FC 105[45 28[45 4[25 35
3[45 45 1[25 2[25 45 2[40 45 40 45 10[86 3[51 6[56 1[35
6[61 9[45 45 1[45 1[45 45 1[45 45 25 23 1[23 5[71 38[{
 TeXBase1Encoding ReEncodeFont }29 91.249976 /Times-Roman
rf /FD 104[83 42 1[37 37 24[37 42 42 60 42 42 23 32 28
42 42 42 42 65 23 42 23 23 42 42 28 37 42 37 42 37 9[78
1[60 51 46 55 1[46 60 60 74 51 1[32 28 60 60 46 51 60
55 55 60 5[23 23 42 42 42 42 42 42 42 42 42 42 1[21 28
21 2[28 28 28 35[46 46 2[{ TeXBase1Encoding ReEncodeFont }70
83.333337 /Times-Roman rf /FE 134[33 2[33 1[18 26 22
1[33 33 33 52 3[18 33 33 1[29 33 1[33 29 7[48 1[63 1[48
41 37 44 1[37 48 1[59 41 48 5[41 48 21[17 46[{
 TeXBase1Encoding ReEncodeFont }30 66.666667 /Times-Roman
rf /FF 256[{ TeXBase1Encoding ReEncodeFont }0 53.333281
/Times-Roman rf /FG 166[66 66 86 66 66 56 51 61 1[51
66 66 81 56 66 1[30 66 66 51 56 66 61 61 66 6[25 46 46
46 46 46 46 46 46 46 46 1[23 46[{ TeXBase1Encoding ReEncodeFont }35
91.666666 /Times-Roman rf /FH 256[{ TeXBase1Encoding ReEncodeFont }0
73.333235 /Times-Roman rf /FI 134[37 37 54 37 42 25 29
33 1[42 37 42 62 21 42 25 21 42 37 25 33 42 33 42 37
7[54 3[54 50 42 54 4[71 50 2[29 4[54 2[54 7[37 1[37 1[37
1[37 37 37 37 1[19 25 19 2[25 25 37[42 2[{
 TeXBase1Encoding ReEncodeFont }47 75.000000 /Times-Bold
rf /FJ 134[33 1[50 33 37 21 29 29 37 37 37 37 54 21 33
1[21 37 37 21 33 37 33 37 37 8[46 62 46 54 42 37 2[46
1[50 62 42 50 33 25 1[54 46 46 54 50 1[46 6[25 37 37
2[37 1[37 37 37 37 2[25 19 2[25 25 25 36[37 2[{
 TeXBase1Encoding ReEncodeFont }56 75.000000 /Times-Italic
rf /FK 134[50 3[50 28 39 33 2[50 50 78 5[50 1[44 3[44
14[66 3[72 12[72 7[50 50 4[50 1[50 4[25 44[{
 TeXBase1Encoding ReEncodeFont }19 100.000003 /Times-Roman
rf /FL 135[72 3[40 56 48 1[72 72 72 4[40 72 72 1[64 72
2[64 9[135 1[104 4[80 104 9[88 66[80 2[{ TeXBase1Encoding ReEncodeFont }
19 143.999997 /Times-Roman rf /FM 104[58 29 61[42 55
42 1[36 32 39 1[32 42 42 52 36 2[19 42 1[32 36 42 39
1[42 7[29 29 1[29 29 29 29 29 29 29 1[15 19 15 2[19 19
40[{ TeXBase1Encoding ReEncodeFont }34 58.333334 /Times-Roman
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: Letter

%%EndSetup
%%Page: 1 1
1 0 bop 374 266 a FM(SOFTW)-7 b(ARE\227PRA)n(CTICE)12
b(AND)i(EXPERIENCE,)f(V)n(OL.)g(0\(0\),)i(1\22630)f(\(MONTH)g(1998\))
1386 797 y FL(Unparsing)33 b(Expressions)1098 980 y(W)-6
b(ith)36 b(Pre\002x)e(and)h(Post\002x)g(Operators)1732
1220 y FK(Norman)24 b(Ramse)o(y)821 1337 y FJ(Department)c(of)f
(Computer)g(Science)o(,)h(Univer)o(sity)f(of)g(V)-6 b(ir)m(ginia,)19
b(Charlottesville)o(,)g(V)l(A)e(22903)1737 1531 y FK(August)23
b(13,)i(1998)1869 1860 y FI(SUMMAR)m(Y)374 2009 y(Unparsing)e(is)g(the)
h(pr)o(oblem)f(of)h(transf)n(orming)g(an)g(inter)o(nal)f(r)o(epr)o
(esentation)f(of)i(a)h(pr)o(ogram)f(into)g(an)f(exter)o(nal,)h(con-)374
2092 y(cr)o(ete)16 b(syntax.)g(In)g(conjunction)f(with)g(pr)o
(ettyprinting,)f(it)i(is)g(useful)f(f)n(or)i(generating)f(r)o(eadable)g
(pr)o(ograms)h(fr)o(om)g(inter)o(nal)374 2175 y(r)o(epr)o(esentations.)
g(If)h(the)g(tar)o(get)h(language)g(uses)f(pr)o(e\002x)g(and)g
(post\002x)g(operators,)h(the)f(pr)o(oblem)g(is)g(nontri)o(vial.)g
(This)f(pa-)374 2258 y(per)k(sho)o(ws)g(ho)o(w)h(to)f(unparse)g(expr)o
(essions)g(using)g(a)g(simple,)g(bottom-up)g(tr)o(ee)g(walk,)f(which)h
(k)o(eeps)g(track)g(of)h(the)f(least)374 2341 y(tightly)d(binding)f
(operator)j(not)e(enclosed)h(by)g(par)o(entheses.)f(During)g(the)g(tr)o
(ee)h(walk,)f(this)g(operator)i(is)f(compar)o(ed)g(with)374
2424 y(the)h(operator)h(of)g(the)f(par)o(ent)g(expr)o(ession,)g(and)g
(par)o(entheses)g(ar)o(e)h(inserted)f(based)g(on)h(the)f(pr)o
(ecedence,)g(associati)o(vity)l(,)374 2507 y(and)c(\002xity)h
(\(in\002x,)f(pr)o(e\002x,)g(or)i(post\002x\))f(of)g(the)g(tw)o(o)g
(operators.)h(The)f(paper)g(is)g(a)g(literate)h(pr)o(ogram.)f(It)g
(includes)f(code)h(f)n(or)374 2590 y(the)22 b(unparser)g(and)h(f)n(or)g
(its)f(in)m(v)o(erse)i(parser)-7 b(,)23 b(both)f(of)h(which)f(can)h
(handle)e(operators)j(of)f(dynamically)g(chosen)g(pr)o(ece-)374
2673 y(dence)c(and)f(associati)o(vity)-5 b(.)21 b(Supporting)c(such)i
(operators)i(is)e(useful)f(f)n(or)i(languages)g(lik)o(e)f(ML,)f(in)h
(which)f(pr)o(ogrammers)374 2756 y(may)h(assign)g(pr)o(ecedence)f(and)g
(associati)o(vity)j(to)d(their)h(o)o(wn)f(functions.)1781
3005 y FG(K)t(E)t(Y)29 b(W)s(O)t(R)t(D)t(S)376 3254 y
FE(K)t(E)t(Y)18 b(W)s(O)t(R)t(D)t(S)65 b(Unparsing)j(P)o(arsing)g
(Prettyprinting)i(Literate)19 b(Programming)68 b(Standard)19
b(ML)1614 3504 y FG(1)t(.)96 b(I)t(N)t(T)t(RO)t(D)t(U)t(C)t(T)t(I)5
b(O)t(N)374 3653 y FD(Automatic)17 b(generation)g(of)i(computer)e
(programs)g(from)g(high-le)n(v)o(el)g(speci\002cations)h(is)i(a)f
(well-kno)n(wn)e(technique,)374 3753 y(which)h(has)g(been)g(used)g(to)h
(create)f(scanners,)g(parsers,)g(code)f(generators,)g(tree)h(re)n
(writers,)g(pack)o(et)g(\002lters,)h(dialogue)374 3852
y(handlers,)h(machine-code)f(recognizers,)h(and)i(other)f(tools.)h(T)-7
b(o)22 b(mak)o(e)f(it)i(easier)f(to)g(deb)n(ug)f(an)h(application)f
(gener)n(-)374 3952 y(ator)m(,)e(and)i(to)f(help)h(con)m(vince)d
(prospecti)n(v)o(e)h(users)i(that)g(the)f(generated)f(code)h(can)h(be)f
(trusted,)g(the)h(generated)e(code)374 4051 y(should)g(be)h(as)g
(idiomatic)g(and)f(readable)g(as)i(possible.)e(It)i(is)g(therefore)d
(desirable,)h(and)g(sometimes)h(essential,)g(that)374
4151 y(the)k(generated)f(code)h(use)h(in\002x,)f(pre\002x,)f(and)h
(post\002x)h(operators,)d(and)i(that)h(e)o(xpressions)e(be)i(presented)
e(without)374 4251 y(unnecessary)h(parentheses.)g(Another)h(helpful)g
(technique)f(is)j(to)f(use)g(a)h(prettyprinter)c(to)j(automate)f
(indentation)374 4350 y(and)h(line)i(breaking.)988 4320
y FM(1,)11 b(2)1104 4350 y FD(This)28 b(paper)e(presents)h(a)h(method)d
(of)j(automatically)d(parenthesizing)g(e)o(xpressions)h(that)374
4450 y(use)18 b(pre\002x,)g(post\002x,)g(and)g(implicit)g(operators;)g
(the)g(method)f(is)j(compatible)d(with)i(automatic)e(prettyprinting.)f
(The)374 4550 y(paper)j(also)i(sho)n(ws)g(ho)n(w)f(to)g(parse)g(e)o
(xpressions)g(that)g(use)h(such)f(operators.)f(The)h(parsing)g
(algorithm)f(can)h(be)h(used)374 4649 y(e)n(v)o(en)j(if)i(operator)e
(precedences)g(are)h(not)h(kno)n(wn)e(at)i(compile)e(time,)i(so)g(it)g
(can)g(be)f(used)h(with)f(arbitrarily)g(man)o(y)374 4749
y(user)n(-de\002ned)18 b(precedences.)457 4848 y(This)27
b(paper)g(is)i(a)f(\223literate)f(program,)-6 b(\224)1625
4818 y FM(3)1684 4848 y FD(which)27 b(means)h(that)f(a)h(single)g
(source)f(\002le)h(is)h(used)e(to)h(prepare)e(both)374
4948 y(manuscript)f(and)h(code.)g(Including)f(code)h(pro)o(vides)f(a)i
(formal,)f(precise,)g(testable)h(statement)g(of)g(the)f(unparsing)374
5098 y FC(CCC)21 b(0038\2260644/98/00)q(00)q(01)q(\22630)1310
b FB(Received)25 b(29)f(A)n(ugust)g(1997)399 5194 y FC(c)374
5197 y FA(\015)p FC(1998)g(by)g(John)g(W)l(ile)o(y)g(&)f(Sons,)g(Ltd.)
1219 b FB(Re)o(vised)24 b(27)g(Mar)m(c)o(h)f(1998)p eop
%%Page: 2 2
2 1 bop 374 266 a FG(2)1339 b Fz(NORMAN)19 b(RAMSEY)374
448 y FD(algorithm.)i(The)i(code)f(is)i(written)f(in)g(the)g(purely)f
(functional)g(subset)h(of)g(Standard)e(ML.)3010 418 y
FM(4)3067 448 y FD(ML)i(is)h(a)f(good)f(choice)374 548
y(for)i(se)n(v)o(eral)g(reasons.)h(Referential)f(transparenc)o(y)f(mak)
o(es)i(the)g(subset)g(easy)g(to)g(reason)f(about,)g(so)h(we)h(can)f
(sho)n(w)374 648 y(the)20 b(correctness)g(of)h(simple)g(unparsing)e
(algorithms.)g(It)i(is)h(possible)e(to)h(e)o(xpress)g(some)f
(properties)g(of)g(the)h(data)g(as)374 747 y(type)i(properties,)f
(which)i(are)g(check)o(ed)f(by)g(the)h(compiler)-5 b(.)23
b(Finally)-5 b(,)23 b(SML)-8 b(')j(s)25 b(parameterized)d(modules)h
(mak)o(e)g(the)374 847 y(code)c(reusable)g(in)h(se)n(v)o(eral)g(dif)n
(ferent)e(conte)o(xts\227the)h(code)g(that)h(appears)g(in)g(the)g
(paper)f(is)i(the)f(code)f(used)h(in)g(both)374 946 y(the)i(SLED)h(and)
g(the)f Fy(l)p FD(-R)-5 b(TL)23 b(compilers,)1596 916
y FM(5,)12 b(6)1709 946 y FD(for)22 b(e)o(xample.)f(The)i(paper)e(e)o
(xplains)h(man)o(y)g(ML)h(constructs)f(as)h(the)o(y)374
1046 y(are)17 b(used,)g(b)n(ut)g(readers)g(not)g(f)o(amiliar)g(with)g
(ML)h(may)f(still)h(wish)g(to)f(consult)g(References)g(7\2269)f(for)h
(an)g(introduction.)457 1146 y(The)27 b(paper)g(presents)g(algorithms)g
(for)g(tw)o(o)h(v)o(ersions)f(of)g(the)h(unparsing)e(problem.)g(In)h
(the)h(\002rst)h(v)o(ersion,)d(all)374 1245 y(operators)18
b(are)j(binary)d(in\002x)j(operators;)d(this)j(v)o(ersion)e(of)h(the)g
(unparsing)f(problem)f(is)j(well)g(understood,)d(and)i(it)h(is)374
1345 y(simple)c(enough)e(to)i(mak)o(e)g(a)g(proof)f(of)h(correctness)f
(tractable.)g(The)h(in)m(v)n(ariants)f(and)g(insights)h(from)f(this)i
(proof)e(lead)374 1445 y(to)k(an)g(algorithm)e(for)i(a)g(more)f
(general)g(v)o(ersion,)f(which)i(handles)f(pre\002x)g(and)h(post\002x)g
(operators,)e(as)i(well)h(as)g(non-)374 1544 y(associati)n(v)o(e)j
(in\002x)g(operators)f(of)h(arbitrary)f(arity)-5 b(.)23
b(The)h(algorithm)f(can)h(also)h(handle)e(some)i(\223mix\002x\224)e
(operators,)374 1644 y(lik)o(e)18 b(the)f(array-inde)o(xing)d(operator)
i Fv(\001)p Fu([)p Fv(\001)p Fu(])p FD(.)i(The)f(algorithm)f(is)j(the)f
(main)f(contrib)n(ution)f(of)h(this)h(paper)-5 b(.)17
b(It)h(is)h(presented)374 1743 y(as)h(e)o(x)o(ecutable)e(code,)h(which)
g(uses)h(parameterized)e(modules)h(to)h(mak)o(e)f(it)i(independent)c
(of)i(the)h(representation)e(of)374 1843 y(the)i(unparsed)e(form.)1371
2092 y FG(2)t(.)96 b(P)l(A)t(R)t(S)t(I)t(N)t(G)30 b(A)t(N)t(D)f(U)t(N)t
(P)l(A)t(R)t(S)t(I)t(N)t(G)374 2242 y FD(P)o(arsers)i(and)f(unparsers)g
(translate)h(between)g(concrete)e(and)i(abstract)g(syntax.)f(The)h
(concrete)f(syntax)g(used)h(to)374 2341 y(represent)25
b(e)o(xpressions)g(is)i(usually)f(ambiguous;)e(ambiguities)h(are)i
(resolv)o(ed)e(using)g(operator)g(precedence)f(and)374
2441 y(parentheses.)14 b(Internal)h(representations)f(are)i
(unambiguous)d(b)n(ut)j(not)f(suitable)h(as)h(concrete)d(syntax.)i(F)o
(or)f(e)o(xample,)374 2540 y(e)o(xpressions)k(are)h(often)f
(represented)g(as)h(simple)h(trees,)f(in)g(which)g(an)g(e)o(xpression)f
(is)i(either)f(an)g(\223atom\224)g(\(constant)374 2640
y(or)f(v)n(ariable\))f(or)h(an)h(operator)e(applied)g(to)i(a)g(list)h
(of)e(e)o(xpressions.)f(W)-7 b(e)21 b(can)e(describe)g(such)g(trees)h
(by)f(the)h(follo)n(wing)374 2740 y(grammar)m(,)27 b(written)j(in)g(e)o
(xtended)e(BNF)-7 b(,)1586 2710 y FM(10)1679 2740 y FD(in)30
b(which)f(nonterminals)f(appear)h(in)h Fx(italic)g FD(and)g(terminals)f
(in)h Ft(slant)374 2839 y FD(fonts:)506 2980 y Fx(e)n(xpr)m(ession)25
b Fv(\))g Ft(atom)912 3081 y Fv(j)55 b Ft(operator)1293
3014 y Fs(\010)1342 3081 y Fx(e)n(xpr)m(ession)1693 3014
y Fs(\011)374 3238 y FD(LISP)28 b(and)g(related)g(languages)g(use)g(a)h
(nearly)f(identical)g(concrete)f(syntax,)h(simply)g(by)g(requiring)f
(parentheses)374 3337 y(around)18 b(each)i(application.)f(The)h
(designers)g(of)g(other)g(languages)f(ha)n(v)o(e)g(preferred)g(other)g
(concrete)g(syntax,)h(using)374 3437 y(in\002x)d(binary)e(operators,)h
(pre\002x)g(and)h(post\002x)g(unary)f(operators,)f(and)i(possibly)f
(\223mix\002x\224)g(operators,)g(as)i(described)374 3537
y(by)h(the)i(follo)n(wing)d(grammar:)506 3695 y Fx(e)n(xpr)m(ession)25
b Fv(\))g Ft(atom)912 3794 y Fv(j)55 b Fx(e)n(xpr)m(ession)20
b Ft(in\002x-operator)j Fx(e)n(xpr)m(ession)912 3894
y Fv(j)55 b Ft(pre\002x-operator)23 b Fx(e)n(xpr)m(ession)912
3993 y Fv(j)55 b Fx(e)n(xpr)m(ession)20 b Ft(post\002x-operator)912
4094 y Fv(j)55 b Fx(e)n(xpr)m(ession)1361 4027 y Fs(\010)1409
4094 y Ft(nary-operator)23 b Fx(e)n(xpr)m(ession)2239
4027 y Fs(\011)912 4194 y Fv(j)55 b Fx(other)20 b(form)g(of)h(e)n(xpr)m
(ession.)12 b(.)g(.)374 4350 y FD(Ev)o(en)17 b(if)i(the)g(internal)f
(form)g(distinguishes)g(these)g(kinds)h(of)f(operators,)f(this)i
(grammar)e(is)j(unsuitable)e(for)g(parsing,)374 4450
y(because)26 b(it)h(is)h(ambiguous.)d(Grammars)h(intended)f(for)h
(parsing)g(use)h(v)n(arious)f(le)n(v)o(els)h(of)f(precedence)f(and)h
(asso-)374 4550 y(ciati)n(vity)21 b(to)g(resolv)o(e)f(ambiguities.)g
(Once)i(precedence)d(and)h(associati)n(vity)h(ha)n(v)o(e)g(been)g
(determined,)e(the)o(y)h(can)i(be)374 4649 y(encoded)f(by)j
(introducing)d(ne)n(w)i(nonterminals)f(for)h(each)g(le)n(v)o(el)h(of)f
(precedence.)e(Users)k(of)e(shift-reduce)f(parsers)374
4749 y(can)d(specify)g(precedence)e(and)i(associati)n(vity)g(directly)
-5 b(,)18 b(then)h(ha)n(v)o(e)f(the)i(parser)f(use)g(them)g(to)h
(resolv)o(e)e(shift-reduce)374 4848 y(con\003icts.)457
4948 y(The)24 b(parsing)g(problem)e(is)k(to)f(translate)f(from)g
(concrete)f(syntax)h(to)h(internal)f(representation.)e(The)i(unparsing)
374 5048 y(problem)16 b(is)j(to)f(tak)o(e)g(an)g(internal)g
(representation)e(and)h(to)i(produce)d(a)i(concrete)f(syntax)h(that,)f
(when)h(parsed,)f(repro-)374 5147 y(duces)22 b(the)g(original)g
(internal)g(representation.)e(That)i(is,)i(an)e(unparser)f(is)j
(correct)e(only)f(if)i(it)h(is)f(a)g(right)f(in)m(v)o(erse)g(of)p
eop
%%Page: 3 3
3 2 bop 1116 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)739 b FG(3)374 448 y FD(its)22
b(parser)-5 b(.)21 b(F)o(or)g(e)o(xample,)f(if)i(our)f(internal)f
(representation)g(is)i(a)g(tree)g(representing)d(the)j(product)d(of)j
Fx(x)12 b Fu(+)g Fx(y)21 b FD(with)h Fx(z)p FD(,)374
548 y(we)d(cannot)e(simply)i(w)o(alk)g(the)g(tree)f(and)h(emit)g(the)f
(concrete)g(representation)f Fx(x)10 b Fu(+)g Fx(y)g
Fv(\002)g Fx(z)p FD(;)19 b(we)g(must)g(emit)g Fu(\()p
Fx(x)10 b Fu(+)g Fx(y)p Fu(\))g Fv(\002)g Fx(z)374 648
y FD(instead.)457 747 y(As)17 b(stated,)g(the)f(unparsing)f(problem)g
(does)h(not)g(ha)n(v)o(e)g(a)h(unique)e(solution;)h(in)h(general,)e
(there)h(are)g(man)o(y)g(possible)374 847 y(concrete)24
b(syntax)o(es)g(that,)h(when)g(parsed,)g(reproduce)d(the)k(original)e
(internal)g(representation.)f(F)o(or)i(e)o(xample,)f(we)374
946 y(could)18 b(choose)g(a)i(concrete)d(syntax)i(that)g(parenthesizes)
f(e)n(v)o(ery)g(e)o(xpression,)f(as)j(in)f Fu(\(\(\()p
Fx(x)p Fu(\))11 b(+)g(\()p Fx(y)p Fu(\)\))g Fv(\002)g
Fu(\()p Fx(z)p Fu(\)\))p FD(.)19 b(The)g(LISP)374 1046
y(rule)27 b(parenthesizes)g(e)n(v)o(ery)g(application,)f(as)j(in)f
Fu(\(\()p Fx(x)15 b Fu(+)f Fx(y)p Fu(\))h Fv(\002)f Fx(z)p
Fu(\))p FD(.)29 b(Rules)f(lik)o(e)h(these)f(use)g(too)g(man)o(y)f
(parentheses.)374 1146 y(Code)c(with)g(e)o(xtra)g(parentheses)f(is)j
(unidiomatic)c(and)i(unreadable,)e(lik)o(e)j(this)g(C)g(code,)f(which)f
(has)i(been)f(emitted)374 1245 y(using)c(something)g(lik)o(e)h(the)h
(LISP)f(rule:)473 1399 y Fr(if)50 b(\(\(\(\(Mem.u\).Index8\).index\))45
b(!=)k(4\))573 1499 y(if)g(\(!\(\(unsigned\(\(\(Mem.u\).Index8\).d\)\))
44 b(<)50 b(0x100\)\))672 1598 y(fail\(\(\("\(\(Mem.u\).Index8\).d)45
b(=)50 b(0x\045x)f(won't)g(fit)g(in)h(8)f(unsigned)g(bits"\),)1021
1698 y(\(\(\(Mem.u\).Index8\).d\)\)\);)573 1797 y(else)672
1897 y({)772 1997 y(emit\(\(\(\(7)f(|)i(\(15)f(<<)h(4\)\))f(|)g(\(1)h
(<<)f(3\)\),)g(1\)\);)772 2096 y(emit\(\(\(\(4)f(|)i(\(3)f(<<)h(3\)\))f
(|)h(\(1)f(<<)h(6\)\),)f(1\)\);)772 2196 y
(emit\(\(\(\(\(\(\(\(Mem.u\).Index8\).ss\))44 b(<<)50
b(6\))f(|)1121 2296 y(\(\(\(\(Mem.u\).Index8\).index\))c(<<)k(3\)\))h
(|)1121 2395 y(\(\(\(Mem.u\).Index8\).base\)\),)45 b(1\)\);)772
2495 y(emit\(\(\(\(\(\(Mem.u\).Index8\).d\))g(&)50 b(0xff\),)e(1\)\);)
672 2694 y(})473 2794 y(else)573 2893 y(fail\(\("Conditions)e(not)k
(satisfied)e(for)h(constructor)f(CALL.Epod"\)\);)374
3047 y FD(The)21 b(unparser)g(in)h(this)h(paper)e(is)i(not)f(merely)f
(a)i(parser')-5 b(s)22 b(right)f(in)m(v)o(erse;)g(it)i(also)g(produces)
d(results)j(without)e(e)o(xtra)374 3147 y(parentheses:)473
3300 y Fr(if)50 b(\(Mem.u.Index8.index)c(!=)j(4\))573
3400 y(if)g(\(!\(\(unsigned\)Mem.u.Index8.d)c(<)50 b(0x100\)\))672
3499 y(fail\("Mem.u.Index8.d)d(=)i(0x\045x)g(won't)g(fit)g(in)h(8)f
(unsigned)g(bits",)922 3599 y(Mem.u.Index8.d\);)573 3699
y(else)672 3798 y({)772 3898 y(emit\(7)g(|)g(15)h(<<)f(4)h(|)g(1)f(<<)h
(3,)f(1\);)772 3998 y(emit\(4)g(|)g(3)h(<<)f(3)h(|)g(1)f(<<)h(6,)f
(1\);)772 4097 y(emit\(Mem.u.Index8.ss)d(<<)k(6)f(|)h
(Mem.u.Index8.index)c(<<)k(3)f(|)1021 4197 y(Mem.u.Index8.base,)e(1\);)
772 4296 y(emit\(Mem.u.Index8.d)f(&)k(0xff,)f(1\);)672
4396 y(})473 4496 y(else)573 4595 y(fail\("Conditions)e(not)i
(satisfied)f(for)h(constructor)f(CALL.Epod"\);)457 4749
y FD(The)19 b(unparsing)f(method)g(uses)j(information)c(about)i
(precedence,)f(associati)n(vity)-5 b(,)19 b(and)g(\223\002xity\224)g
(of)h(operators)e(to)374 4848 y(transform)25 b(an)i(internal)g(form)f
(into)h(a)g(concrete)f(syntax.)g(The)h(method)f(w)o(orks)h(from)f(the)h
(bottom)f(up)h(and)g(from)374 4948 y(the)d(inside)h(out.)g(In)f(each)h
(e)o(xpression,)e(it)i(\002nds)g(the)g(operator)m(,)e(and)h(it)i
(considers)e(the)h(sube)o(xpressions)d(and)j(their)374
5048 y(positions,)g(left)h(or)g(right,)f(relati)n(v)o(e)h(to)g(the)g
(operator)-5 b(.)25 b(It)h(decides)g(whether)f(to)h(parenthesize)f
(sube)o(xpressions)f(by)374 5147 y(comparing)14 b(precedence)g(and)i
(associati)n(vity)g(of)h(the)f(current)f(operator)g(with)i(the)f
(precedences)f(and)h(associati)n(vities)p eop
%%Page: 4 4
4 3 bop 374 266 a FG(4)1339 b Fz(NORMAN)19 b(RAMSEY)374
448 y FD(of)g(the)g(most)h(loosely)f(binding)f(operators)f(in)j(the)g
(sube)o(xpressions.)d(Operators)h(that)i(are)f(\223co)o(v)o(ered\224)e
(by)i(parenthe-)374 548 y(ses)i(do)f(not)f(participate)h(in)g(the)g
(comparison.)e(Here)i(are)g(four)f(e)o(xample)g(trees:)1039
670 y
 tx@Dict begin tx@NodeDict begin {5.82996 0.86992 7.7699 3.88495 3.14996
} false /N@T-0 16 {InitRnode } NewNode end end
 1039 670 a Fv(\002)927 795 y
 tx@Dict begin tx@NodeDict begin {5.80994 0.81494 7.7699 3.88495 3.14996
} false /N@T-0-0 16 {InitRnode } NewNode end end
 927 795 a Fu(+)959
768 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0 /N@T-0-0 InitNC { NCLine  } if end gsave 0.4 SLW 0.
setgray 0 setlinecap stroke  grestore  grestore end
 959 768 a 833 919 a
 tx@Dict begin tx@NodeDict begin {4.3449 0.10991 4.46983 2.23491 3.14996
} false /N@T-0-0-0 16 {InitRnode } NewNode end end
 833 919 a Fx(x)852 893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-0 /N@T-0-0-0 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 852
893 a 1047 919 a
 tx@Dict begin tx@NodeDict begin {4.3449 2.03992 4.43994 2.21997 3.14996
} false /N@T-0-0-1 16 {InitRnode } NewNode end end
 1047 919 a Fx(y)1066 893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-0 /N@T-0-0-1 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 1066 893
a 1168 795 a
 tx@Dict begin tx@NodeDict begin {4.3449 0.80994 3.8899 1.94495 3.14996
} false /N@T-0-1 16 {InitRnode } NewNode end end
 1168 795 a Fx(z)1184 768 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0 /N@T-0-1 InitNC { NCLine  } if end gsave 0.4 SLW 0.
setgray 0 setlinecap stroke  grestore  grestore end
 1184 768 a 1758
670 a
 tx@Dict begin tx@NodeDict begin {5.80994 0.81494 7.7699 3.88495 3.14996
} false /N@T-0 16 {InitRnode } NewNode end end
 1758 670 a Fu(+)1543 795 y
 tx@Dict begin tx@NodeDict begin {5.82996 0.86992 7.7699 3.88495 3.14996
} false /N@T-0-0 16 {InitRnode } NewNode end end
 1543 795 a Fv(\002)1575
768 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0 /N@T-0-0 InitNC { NCLine  } if end gsave 0.4 SLW 0.
setgray 0 setlinecap stroke  grestore  grestore end
 1575 768 a 1450 919 a
 tx@Dict begin tx@NodeDict begin {4.3449 0.10991 4.46983 2.23491 3.14996
} false /N@T-0-0-0 16 {InitRnode } NewNode end end
 1450 919 a Fx(x)1468 893
y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-0 /N@T-0-0-0 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 1468 893 a 1664 919 a
 tx@Dict begin tx@NodeDict begin {4.3449 2.03992 4.43994 2.21997 3.14996
} false /N@T-0-0-1 16 {InitRnode } NewNode end end
 1664 919 a Fx(y)1682 893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-0 /N@T-0-0-1 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 1682
893 a 1972 795 a
 tx@Dict begin tx@NodeDict begin {5.80994 0.81494 7.7699 3.88495 3.14996
} false /N@T-0-1 16 {InitRnode } NewNode end end
 1972 795 a Fu(+)2005 768 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0 /N@T-0-1 InitNC { NCLine  } if end gsave 0.4 SLW 0.
setgray 0 setlinecap stroke  grestore  grestore end
 2005 768
a 1878 919 a
 tx@Dict begin tx@NodeDict begin {4.3449 0.80994 3.8899 1.94495 3.14996
} false /N@T-0-1-0 16 {InitRnode } NewNode end end
 1878 919 a Fx(z)1894 893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-1 /N@T-0-1-0 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 1894 893 a 2087
919 a
 tx@Dict begin tx@NodeDict begin {4.3449 0.1699 6.66992 3.33496 3.14996
} false /N@T-0-1-1 16 {InitRnode } NewNode end end
 2087 919 a Fx(w)2115 893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-1 /N@T-0-1-1 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 2115 893 a 2392 670
a
 tx@Dict begin tx@NodeDict begin {6.81989 0.0 41.72972 20.86485 3.14996
} false /N@T-0 16 {InitRnode } NewNode end end
 2392 670 a FD(post\002x)h Fr(++)2540 795 y
 tx@Dict begin tx@NodeDict begin {6.13995 0.0 6.0 3.0 3.14996 } false
/N@T-0-0 16 {InitRnode } NewNode end end
 2540 795
a Fr(*)2565 768 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0 /N@T-0-0 InitNC { NCLine  } if end gsave 0.4 SLW 0.
setgray 0 setlinecap stroke  grestore  grestore end
 2565 768 a 2540 919 a
 tx@Dict begin tx@NodeDict begin {4.33488 1.53992 6.0 3.0 3.14996 }
false /N@T-0-0-0 16 {InitRnode } NewNode end end
 2540 919 a Fr(p)2565
893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-0 /N@T-0-0-0 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 2565 893 a 2987 670 a
 tx@Dict begin tx@NodeDict begin {6.81989 0.0 37.82983 18.91492 3.14996
} false /N@T-0 16 {InitRnode } NewNode end end
 2987 670 a FD(pre\002x)g
Fr(++)3119 795 y
 tx@Dict begin tx@NodeDict begin {6.13995 0.0 6.0 3.0 3.14996 } false
/N@T-0-0 16 {InitRnode } NewNode end end
 3119 795 a Fr(*)3144 768 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0 /N@T-0-0 InitNC { NCLine  } if end gsave 0.4 SLW 0.
setgray 0 setlinecap stroke  grestore  grestore end
 3144 768
a 3119 919 a
 tx@Dict begin tx@NodeDict begin {4.33488 1.53992 6.0 3.0 3.14996 }
false /N@T-0-0-0 16 {InitRnode } NewNode end end
 3119 919 a Fr(p)3144 893 y
 tx@Dict begin gsave STV newpath 0.4 SLW 0. setgray  /ArrowA { moveto
} def /ArrowB { } def /NCLW CLW def tx@NodeDict begin 0.0 0.0 neg 2.0
2.0 0 0 /N@T-0-0 /N@T-0-0-0 InitNC { NCLine  } if end gsave 0.4 SLW
0. setgray 0 setlinecap stroke  grestore  grestore end
 3144 893 a 971
1056 a FD(\(a\))684 b(\(b\))673 b(\(c\))484 b(\(d\))374
1169 y(In)18 b(tree)h(\(a\),)f(discussed)g(abo)o(v)o(e,)f(the)i
(unparser)e(renders)h(the)h(left)f(subtree)h(as)g Fx(x)10
b Fu(+)g Fx(y)p FD(,)19 b(without)f(parentheses,)f(because)374
1269 y(the)g(sube)o(xpressions)f Fx(x)j FD(and)e Fx(y)h
FD(contain)f(no)h(operators.)e(At)i(the)g(root,)f(because)g(operator)f
Fv(\002)i FD(has)g(higher)f(precedence)374 1368 y(than)i(operator)f
Fu(+)p FD(,)h(the)h(unparser)e(parenthesizes)g(the)i(left)g(sube)o
(xpression,)d(and)i(the)h(\002nal)g(result)f(is)i Fu(\()p
Fx(x)11 b Fu(+)g Fx(y)p Fu(\))g Fv(\002)g Fx(z)p FD(.)20
b(In)374 1468 y(tree)e(\(b\),)g Fu(+)h FD(has)g(lo)n(wer)g(precedence)d
(than)j Fv(\002)p FD(,)f(so)h(it)h(is)g(not)e(necessary)g(to)h
(parenthesize)f(the)g(left)h(subtree.)f(Because)374 1568
y Fu(+)f FD(is)h(left-associati)n(v)o(e,)e(ho)n(we)n(v)o(er)m(,)f(it)j
(is)g(necessary)e(to)i(parenthesize)e(the)h(right)f(subtree,)h(because)
f(it)i(is)h(a)e(right)g(child)374 1667 y(of)i(a)h(parent)e(with)i(the)f
(same)h(precedence)d(and)i(left)h(associati)n(vity)-5
b(.)18 b(The)h(\002nal)h(result)f(is)i(therefore)c Fx(x)11
b Fv(\002)g Fx(y)g Fu(+)g(\()p Fx(z)g Fu(+)g Fx(w)p Fu(\))p
FD(.)374 1767 y(T)m(rees)24 b(\(c\))g(and)g(\(d\))g(sho)n(w)h(pre\002x)
e(and)h(post\002x)h(operators)e(as)i(used)f(in)h(C.)g(In)f(tree)h
(\(c\),)f Fr(++)h FD(and)f Fr(*)h FD(ha)n(v)o(e)f(opposite)374
1867 y(\223\002xity\224)18 b(\(one)h(is)h(post\002x)f(and)f(one)h(is)h
(pre\002x\),)e(and)h(because)f Fr(++)i FD(has)f(higher)f(precedence)f
(than)i Fr(*)p FD(,)g(it)h(is)g(necessary)374 1966 y(to)h(parenthesize)
f(the)h(sube)o(xpression,)e(resulting)h(in)h Fr(\(*p\)++)p
FD(.)g(In)g(tree)g(\(d\),)g Fr(++)g FD(and)g Fr(*)g FD(ha)n(v)o(e)g
(the)g(same)h(\002xity)-5 b(,)20 b(so)374 2066 y(precedence)e(is)j
(irrele)n(v)n(ant,)d(and)i(the)g(e)o(xpression)f(is)i(unparsed)d(as)j
Fr(++*p)p FD(.)457 2165 y(Although)d(the)i(full)f(unparsing)f(method)h
(handles)g(pre\002x,)f(post\002x,)i(and)f(in\002x)h(operators,)e(it)i
(is)h(easier)f(to)g(under)n(-)374 2265 y(stand)g(if)g(we)h(be)o(gin)e
(with)h(the)g(simpler)g(case)h(in)f(which)g(all)g(operators)f(are)h
(binary)f(in\002x)h(operators.)795 2514 y FG(3)t(.)96
b(P)l(A)t(R)t(S)t(I)t(N)t(G)30 b(A)t(N)t(D)e(U)t(N)t(P)l(A)t(R)t(S)t(I)
t(N)t(G)j(W)t(I)t(T)t(H)f(I)t(N)t(F)t(I)t(X)g(O)t(P)t(E)t(R)t(A)-6
b(T)r(O)t(R)t(S)374 2664 y Fq(Abstract)21 b(and)h(concr)n(ete)f(syntax)
h(f)n(or)g(in\002x)g(operators)457 2813 y FD(T)-7 b(ype)23
b Fr(rator)h FD(represents)f(a)h(binary)f(in\002x)h(operator)m(,)d
(which)j(has)g(a)g(te)o(xt)g(representation,)e(a)i(precedence,)e(and)
374 2913 y(an)e(associati)n(vity:)374 3037 y Fv(h)p Fx(in\002x)p
Fv(i)o(\021)457 3137 y Fr(type)49 b(precedence)f(=)h(int)457
3236 y(datatype)f(associativity)f(=)j(LEFT)f(|)h(RIGHT)f(|)g(NONASSOC)
457 3336 y(type)g(rator)g(=)g(string)g(*)h(precedence)d(*)j
(associativity)374 3461 y FD(This)23 b(ML)g(code)g(uses)g(simple)g
(inte)o(gers)g(\()p Fr(int)p FD(\))f(to)h(represent)f(precedence,)f(an)
i(enumeration)e(to)i(represent)f(asso-)374 3560 y(ciati)n(vity)-5
b(,)24 b(and)g(a)i(triple)f(to)g(represent)f(an)i(operator)-5
b(.)23 b(\(In)i(the)g(conte)o(xt)f(of)h(an)g(ML)g(type)g(de\002nition,)
f(a)h Fr(*)h FD(does)f(not)374 3660 y(represent)18 b(multiplication;)g
(it)i(connects)f(elements)g(of)g(a)h(tuple.\))e(The)h(more)g(general)f
(unparser)m(,)g(presented)g(belo)n(w)-5 b(,)374 3759
y(sho)n(ws)20 b(ho)n(w)f(to)i(use)f(an)g(arbitrary)f(type,)g(not)h
(just)h Fr(string)p FD(,)e(as)i(an)f(operator')-5 b(s)19
b(concrete)g(representation.)457 3859 y(Precedence)h(and)h(associati)n
(vity)g(determine)f(ho)n(w)h(in\002x)h(e)o(xpressions)e(are)i(parsed)f
(into)g(trees,)h(or)f(equi)n(v)n(alently)-5 b(,)374 3959
y(ho)n(w)24 b(the)o(y)f(are)i(parenthesized.)d(F)o(or)i(e)o(xample,)f
(if)i(operator)d Fv(\012)j FD(has)f(higher)g(precedence)e(than)i
(operator)f Fv(\010)p FD(,)h(then)374 4058 y Fx(x)12
b Fv(\010)g Fx(y)g Fv(\012)g Fx(z)j Fu(=)j Fx(x)12 b
Fv(\010)g Fu(\()p Fx(y)g Fv(\012)g Fx(z)p Fu(\))j FD(and)h
Fx(x)c Fv(\012)g Fx(y)g Fv(\010)g Fx(z)k Fu(=)i(\()p
Fx(x)12 b Fv(\012)g Fx(y)p Fu(\))g Fv(\010)g Fx(z)m FD(.)17
b(When)f(tw)o(o)g(operators)f(ha)n(v)o(e)h(the)g(same)g(precedence,)e
(asso-)374 4158 y(ciati)n(vity)h(is)i(used)f(to)g(disambiguate.)e(If)i
Fv(\010)h FD(is)g(left-associati)n(v)o(e,)d Fx(x)e Fv(\010)g
Fx(y)g Fv(\010)g Fx(z)k Fu(=)i(\()p Fx(x)12 b Fv(\010)g
Fx(y)p Fu(\))g Fv(\010)g Fx(z)n FD(;)17 b(if)f(it)h(is)g
(right-associati)n(v)o(e,)374 4258 y Fx(x)12 b Fv(\010)g
Fx(y)g Fv(\010)g Fx(z)j Fu(=)j Fx(x)12 b Fv(\010)g Fu(\()p
Fx(y)g Fv(\010)g Fx(z)p Fu(\))n FD(.)21 b(Some)f(languages)e(ha)n(v)o
(e)i Fx(non-associative)e FD(operators;)h(if)h Fv(\010)g
FD(is)h(non-associati)n(v)o(e,)d(then)1468 4440 y Fu(\()p
Fx(x)12 b Fv(\010)g Fx(y)p Fu(\))g Fv(\010)g Fx(z)k Fv(6)p
Fu(=)i Fx(x)12 b Fv(\010)g Fx(y)g Fv(\010)g Fx(z)k Fv(6)p
Fu(=)i Fx(x)12 b Fv(\010)g Fu(\()p Fx(y)g Fv(\010)g Fx(z)p
Fu(\))p Fw(;)374 4623 y FD(and)22 b Fx(x)12 b Fv(\010)g
Fx(y)g Fv(\010)g Fx(z)21 b FD(may)i(be)g(ille)o(gal.)g(The)g(comma)f
(that)h(separates)g(parameters)f(in)i(a)f(C)h(function)e(call)i(is)g
(an)f(e)o(xample)374 4722 y(of)d(a)g(non-associati)n(v)o(e)e(operator)
-5 b(.)457 4822 y(Man)o(y)18 b(e)o(xpressions)f(are)i(obtained)f(by)h
(applying)e(operators)g(to)j(other)e(e)o(xpressions,)f(b)n(ut)i(there)g
(must)g(al)o(w)o(ays)h(be)374 4922 y(indi)n(visible)j(constituents)g
(of)h(e)o(xpressions.)e(W)-7 b(e)25 b(call)g(such)e(constituents)h
Fx(atoms)p FD(.)f(The)o(y)g(appear)g(at)i(the)f(lea)n(v)o(es)g(of)374
5021 y(abstract)g(syntax)g(trees)g(and)g(as)h(the)g(non-operator)20
b(tok)o(ens)k(in)h(concrete)e(syntax.)h(In)g(most)g(languages)f(the)i
(atoms)p eop
%%Page: 5 5
5 4 bop 1116 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)739 b FG(5)374 448 y FD(include)24
b(identi\002ers,)h(inte)o(ger)f(and)h(real)g(literals,)g(string)g
(literals,)h(and)f(so)g(on.)g(In)g(our)g(initial,)g(simple)g(model,)g
(an)374 548 y(e)o(xpression)18 b(is)j(either)f(an)g(atom)g(or)g(an)g
(in\002x)g(operator)e(applied)i(to)g(tw)o(o)g(e)o(xpressions:)374
672 y Fv(h)p Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)457 772
y Fr(datatype)48 b(ast)h(=)h(ATOM)f(of)g(string)1104
872 y(|)h(APP)99 b(of)49 b(ast)h(*)f(rator)g(*)h(ast)374
996 y FD(T)-7 b(ype)17 b Fr(ast)h FD(represents)f(an)h(e)o(xpression')
-5 b(s)16 b(abstract)i(syntax)f(tree.)h(This)g(ML)g Fr(datatype)e
FD(de\002nition)h(is)i(something)374 1096 y(lik)o(e)30
b(a)g(production)d(in)j(a)g(conte)o(xt-free)e(grammar;)g(it)i(gi)n(v)o
(es)g(tw)o(o)g(alternati)n(v)o(e)e(w)o(ays)j(of)e(constructing)f(an)i
Fr(ast)p FD(.)374 1196 y(These)c(alternati)n(v)o(es)f(are)i(al)o(w)o
(ays)g(gi)n(v)o(en)e(names)h(\()p Fr(ATOM)g FD(and)g
Fr(APP)p FD(\),)f(which)h(are)h(called)f Fx(constructor)o(s)p
FD(.)g(An)g(ML)374 1295 y(datatype)g(may)h(contain)g(an)o(y)g(number)f
(of)h(constructors,)f(and)h(there)g(may)g(be)h(data)g(associated)f
(with)h(each)f(one.)374 1395 y(Here,)18 b(for)h(an)f(atom,)h(we)g(care)
g(only)f(about)g(the)h(atom')-5 b(s)19 b(string)g(representation.)d(F)o
(or)j(an)g(application,)e(we)i(w)o(ant)g(the)374 1494
y(operator)e(and)i(the)g Fr(ast)p FD(s)h(representing)d(the)i(tw)o(o)h
(operands.)d(Because)i Fr(ast)g FD(is)i(used)e(in)g(its)h(o)n(wn)f
(de\002nition,)f(it)i(is)g(a)374 1594 y(recursi)n(v)o(e)e(type,)i(and)f
(v)n(alues)h(of)g(type)g Fr(ast)g FD(are)g(trees.)457
1694 y(T)-7 b(ype)21 b(type)h Fr(ast)g FD(represents)f(the)h(input)g
(to)g(the)g(unparser;)f(we)h(also)h(need)e(a)i(type)e(to)i(represent)e
(the)h(unparser')-5 b(s)374 1793 y(output.)26 b(F)o(or)h(simplicity)-5
b(,)27 b(we)i(treat)f(this)g(output)f(as)h(a)g(sequence)f(of)h(le)o(x)o
(emes,)e(where)i(a)g(le)o(x)o(eme)f(represents)g(an)374
1893 y(atom,)e(an)h(operator)m(,)e(or)i(a)g(parenthesis.)f(Moreo)o(v)o
(er)m(,)e(we)k(undertak)o(e)d(to)i(emit)g(only)g(sequences)f(in)h
(which)g(atoms)374 1993 y(and)21 b(operators)g(alternate,)g(or)h(in)g
(which)g(parenthesized)e(sequences)h(tak)o(e)i(the)f(place)g(of)f
(atoms.)h(Let)h(us)f(call)h(such)374 2092 y(a)d(sequence)f(an)h
Fr(image)g FD(and)g(use)g(a)h(representation)d(that)i(forces)g(it)h(to)
f(satisfy)h(the)f(follo)n(wing)e(grammar:)506 2258 y
Fx(ima)o(g)o(e)25 b Fv(\))g Fx(le)n(xical-atom)1275 2190
y Fs(\010)1323 2258 y Ft(operator)g Fx(le)n(xical-atom)2042
2190 y Fs(\011)506 2450 y Fx(le)n(xical-atom)f Fv(\))h
Ft(atom)1246 2379 y Fs(\014)1246 2429 y(\014)1294 2450
y Fr(\()c Fx(ima)o(g)o(e)f Fr(\))457 2633 y FD(In)g(the)g
(corresponding)c(ML,)21 b(the)f(sequence)f(in)h(braces)g(becomes)f(the)
h(type)g Fr(image')p FD(:)374 2757 y Fv(h)p Fx(in\002x)p
Fv(i)o Fu(+)p Fv(\021)457 2857 y Fr(datatype)98 b(image)g(=)50
b(IMAGE)f(of)g(lexical_atom)f(*)i(image')457 2956 y(and)348
b(image')48 b(=)i(EOI)f(\(*)h(end)f(of)g(image)g(*\))1303
3056 y(|)h(INFIX)f(of)g(rator)g(*)h(lexical_atom)d(*)j(image')457
3156 y(and)f(lexical_atom)e(=)j(LEX_ATOM)e(of)i(string)1303
3255 y(|)g(PARENS)f(of)g(image)374 3380 y(EOI)16 b FD(represents)g(the)
h(end)f(of)h(the)g(image,)f(and)g Fr(PARENS)g FD(represents)g(an)h
(image)f(in)h(parentheses.)e(This)i(representa-)374 3479
y(tion)i(enforces)f(the)i(in)m(v)n(ariants)e(that)i(e)o(xpressions)e
(and)h(operators)f(alternate,)h(and)g(that)g(the)h(\002rst)g(and)f
(last)i(elements)374 3579 y(of)f(an)g(image)f(are)h(e)o(xpressions.)374
3828 y Fq(P)o(arsing)h(in\002x)h(expr)n(essions)457 3978
y FD(T)-7 b(o)18 b(be)g(correct,)f(an)i(unparser)d(must)j(produce)d(a)j
(sequence)e(that)h(parses)h(back)e(into)i(the)f(original)f(abstract)h
(syntax)374 4077 y(tree.)25 b(W)-7 b(e)27 b(de)n(v)o(elop)d(an)h
(unparsing)f(algorithm)g(by)h(thinking)f(about)h(parsing.)f(T)-7
b(o)26 b(understand)d(ho)n(w)i(to)h(minimize)374 4177
y(parentheses,)d(we)i(need)f(to)h(consider)f(where)g(parentheses)g(are)
h(needed)e(to)i(get)g(the)g(correct)f(parse.)g(Suppose)g(we)374
4276 y(ha)n(v)o(e)18 b(an)i(abstract)f(syntax)f(tree)i(that)f(has)h
(been)e(obtained)g(by)h(parsing)f(an)h(image)g(without)g(an)o(y)f
(parentheses.)g(Then)374 4376 y(where)n(v)o(er)i(the)i(syntax)f(tree)h
(has)h(an)f Fr(APP)g FD(node)f(whose)g(parent)g(is)i(also)g(an)f
Fr(APP)g FD(node,)f(there)g(are)h(tw)o(o)h(cases:)f(the)374
4476 y(child)d(may)h(be)g(the)g(left)h(child)f(or)g(the)g(right)f
(child)h(of)g(its)h(parent:)1597 4597 y Fr(outer)1447
4987 y(inner)1658 4711 y Fp(\014)1629 4784 y(\014)1600
4856 y(\014)1571 4928 y(\014)p 1749 4630 4 4 v 1750 4633
V 1751 4636 V 1752 4638 V 1753 4641 V 1754 4644 V 1755
4647 V 1756 4650 V 1758 4652 V 1759 4655 V 1776 4699
V 1777 4702 V 1778 4704 V 1780 4707 V 1781 4710 V 1782
4713 V 1783 4715 V 1784 4718 V 1785 4721 V 1786 4724
V 1804 4768 V 1805 4770 V 1806 4773 V 1807 4776 V 1808
4779 V 1809 4781 V 1810 4784 V 1811 4787 V 1813 4790
V 1814 4793 V 1831 4836 V 1832 4839 V 1833 4842 V 1835
4845 V 1836 4847 V 1837 4850 V 1838 4853 V 1839 4856
V 1840 4859 V 1841 4861 V 1859 4905 V 1860 4908 V 1861
4911 V 1862 4913 V 1863 4916 V 1864 4919 V 1865 4922
V 1866 4925 V 1868 4927 V 1869 4930 V 2349 4597 a Fr(outer)2499
4987 y(inner)p 2441 4630 V 2440 4633 V 2439 4636 V 2437
4638 V 2436 4641 V 2435 4644 V 2434 4647 V 2433 4650
V 2432 4652 V 2431 4655 V 2413 4699 V 2412 4702 V 2411
4704 V 2410 4707 V 2409 4710 V 2408 4713 V 2407 4715
V 2406 4718 V 2404 4721 V 2403 4724 V 2386 4768 V 2385
4770 V 2384 4773 V 2382 4776 V 2381 4779 V 2380 4781
V 2379 4784 V 2378 4787 V 2377 4790 V 2376 4793 V 2358
4836 V 2357 4839 V 2356 4842 V 2355 4845 V 2354 4847
V 2353 4850 V 2352 4853 V 2351 4856 V 2349 4859 V 2348
4861 V 2331 4905 V 2330 4908 V 2329 4911 V 2327 4913
V 2326 4916 V 2325 4919 V 2324 4922 V 2323 4925 V 2322
4927 V 2321 4930 V 2503 4711 a Fp(L)2532 4784 y(L)2561
4856 y(L)2590 4928 y(L)p eop
%%Page: 6 6
6 5 bop 374 266 a FG(6)1339 b Fz(NORMAN)19 b(RAMSEY)374
448 y FD(Because)h(this)i(tree)e(w)o(as)i(obtained)d(by)h(parsing)f
(parenthesis-free)g(syntax,)h(either)g(the)g(inner)g(operator)f(has)i
(higher)374 548 y(precedence)f(than)i(the)h(outer)m(,)e(or)i(the)o(y)f
(ha)n(v)o(e)g(the)h(same)f(precedence)f(and)h(associati)n(vity)g(and)h
(the)f(associati)n(vity)h(is)374 648 y(to)h(the)g(left)h(\(right\))e
(if)h(the)g(inner)g(is)h(a)f(left)h(\(right\))e(child)h(of)g(the)g
(outer)-5 b(.)23 b(W)-7 b(e)26 b(formalize)d(this)h(condition)f(using)g
(the)374 747 y(predicate)g Fr(noparens\(inner,)47 b(outer,)i
Fx(side)p Fr(\))o FD(,)25 b(where)f Fx(side)g FD(is)i
Fr(LEFT)e FD(or)g Fr(RIGHT)g FD(and)g Fr(noparens)g FD(is)374
847 y(de\002ned)19 b(as)i(follo)n(ws:)374 971 y Fv(h)p
Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)p 1561 899 2201 4
v 1561 1007 4 108 v 874 w Fo(noparens)43 b(:)i(rator)f(*)h(rator)f(*)g
(associativity)f(->)h(bool)p 3758 1007 V 1561 1010 2201
4 v 457 1097 a Fr(fun)49 b(noparens)f(\(inner)h(as)g(\(_,)h(pi,)f
(ai\),)g(outer)g(as)g(\(_,)g(po,)h(ao\),)f(side\))g(=)1005
1197 y(pi)g(>)h(po)656 1296 y(orelse)f(pi)g(=)h(po)f(andalso)g(ai)g(=)h
(ao)f(andalso)g(ao)g(=)h(side)374 1421 y FD(where)19
b Fr(pi)p FD(,)h Fr(ai)p FD(,)g Fr(po)p FD(,)h(and)e
Fr(ao)i FD(stand)f(for)f(precedence)f(or)i(associati)n(vity)g(of)g
(inner)f(or)h(outer)g(operators.)457 1520 y(This)d(ML)g(code)f
(de\002nes)h(a)g(function)f Fr(noparens)p FD(.)g(Its)h(name)g(and)f
(type)h(are)f(gi)n(v)o(en)g(in)h(the)g(box)g(at)g(the)g(be)o(ginning)
374 1620 y(of)g(the)h(chunk.)f(T)-7 b(ype)17 b(assertions)h(in)g(box)o
(es)f(are)h(inserted)g(into)f(the)h(code)g(and)f(check)o(ed)g(by)g(the)
h(compiler)-5 b(.)17 b(The)h(type)374 1720 y(of)23 b
Fr(noparens)g FD(sho)n(ws)h(that)g(it)h(is)g(a)f(Boolean)g(function)e
(of)h(three)h(ar)o(guments)e(\(tw)o(o)i(operators)e(and)i(an)f
(associa-)374 1819 y(ti)n(vity\).)h(The)g(structure)g(of)h(the)g
(de\002nition)f(is)i Fr(fun)20 b Ft(name)26 b Fx(binding)18
b Fr(=)j Fx(body)n FD(.)k(The)g Fx(binding)e FD(associates)j(names)e
(to)374 1919 y(the)f(ar)o(guments;)e(these)i(names)g(are)g(used)g(in)g
(the)g(body)-5 b(.)21 b Fr(inner)49 b(as)g(\()p 2542
1919 25 4 v 30 w(,)h(pi,)f(ai\))23 b FD(is)h(a)g(nested)e(binding;)g
(it)374 2019 y(binds)k Fr(pi)h FD(to)h(the)f(precedence)e(of)h
Fr(inner)h FD(and)g Fr(ai)g FD(to)g(the)g(associati)n(vity)g(of)g
Fr(inner)p FD(.)f(The)h(underscore)p 3589 2019 V 82 w(is)h(a)374
2118 y(\223wildcard,)-6 b(\224)24 b(which)h(indicates)h(that)g(the)g
(te)o(xt)f(representation)f(of)i Fr(inner)f FD(is)i(to)f(be)g(ignored)e
(and)h(not)g(bound)f(to)374 2218 y(an)o(y)i(name.)f(The)i(process)f(of)
h(using)f(the)g Fx(binding)f FD(to)i(associate)g(names)g(with)g(the)f
(ar)o(guments)f(and)h(parts)h(of)f(the)374 2317 y(ar)o(guments)18
b(is)j(called)f Fx(ML)h(pattern)f(matc)o(hing)p FD(.)457
2417 y(Readers)j(f)o(amiliar)h(with)g(the)g(treatment)e(of)i(operator)n
(-precedence)19 b(parsing)k(in)h(Section)f(4.6)h(of)f(Reference)g(11)
374 2517 y(may)c(recognize)g(that)1487 2699 y Fr(noparens)n
Fu(\()p Fx(i)p Fw(;)9 b Fx(o)p Fw(;)g Fr(LEFT)p Fu(\))83
b Fv(\021)g Fx(i)18 b Fv(\001)p Fw(>)g Fx(o)1437 2824
y Fr(noparens)n Fu(\()p Fx(i)p Fw(;)9 b Fx(o)p Fw(;)g
Fr(RIGHT)p Fu(\))83 b Fv(\021)g Fx(o)18 b Fw(<)p Fv(\001)f
Fx(i)374 3006 y FD(W)-7 b(e)28 b(use)g Fr(noparens)f
FD(during)f(unparsing)g(to)h(decide)g(when)g(parentheses)g(are)g
(needed)g(and)g(during)f(parsing)g(to)374 3106 y(decide)19
b(whether)g(to)i(shift)f(or)g(reduce.)457 3206 y(T)-7
b(o)31 b(pro)o(v)o(e)e(correctness)i(of)g(the)g(unparser)m(,)e(I)i
(introduce)f(a)h(simple)h(LR)f(parser)-5 b(.)31 b(The)g(unparser)f(is)i
(correct)e(if)374 3305 y Fr(parse)48 b(\(unparse)h(e\))g(=)h(e)31
b FD(for)f(an)o(y)g(syntax)g(tree)g Fr(e)p FD(.)h(In)f(other)g(w)o
(ords,)g(if)h(we)g(be)o(gin)e(with)i(an)g(abstract)374
3405 y(syntax)18 b(tree)i Fr(e)p FD(,)f(unparse)g(it,)h(and)e(then)h
(parse)h(the)f(resulting)g(le)o(x)o(emes,)f(we)i(get)f(back)g(the)h
(original)e(abstract)h(syntax)374 3505 y(tree.)457 3604
y(In)31 b(the)h(parser')-5 b(s)32 b(stack,)g(e)o(xpressions)e(and)h
(operators)g(alternate.)g(Unless)h(the)g(stack)g(is)h(empty)-5
b(,)30 b(there)i(is)h(an)374 3704 y(operator)18 b(on)i(the)g(top,)g
(which)f(is)i(written)f(to)h(the)f(right.)374 3828 y
Fv(h)p Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)457 3928 y
Fr(datatype)48 b(stack)h(=)g(BOT)1204 4028 y(|)g(PUSH)h(of)f(stack)g(*)
g(ast)h(*)f(rator)374 4152 y FD(This)18 b(recursi)n(v)o(e)f(datatype)g
(is)i(isomorphic)d(to)j(a)f(list)i(of)d(\(operator)m(,)f(ast\))j
(pairs,)e(b)n(ut)i(it)g(is)g(helpful)e(to)h(de\002ne)g(a)g(special)374
4252 y(type)h(because)h(the)g(constructors)f Fr(BOT)h
FD(and)f Fr(PUSH)h FD(distinguish)g(parser)f(stacks)i(from)e(other)g
(kinds)h(of)g(lists.)p eop
%%Page: 7 7
7 6 bop 1116 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)739 b FG(7)457 448 y FD(The)21
b(parser)f(itself)i(can)f(be)h(simpli\002ed)f(by)g(a)g(bit)h(of)f
(trick)o(ery)-5 b(.)19 b(Instead)i(of)g(treating)g(\223bottom)f(of)h
(stack\224)g(or)g(\223end)374 548 y(of)j(input\224)h(as)h(special)f
(cases,)g(treat)h(them)e(as)i(occurrences)d(of)i(a)h(sentinel)f
(operator)m(,)d Fr(minrator)p FD(.)i Fr(minrator)374
648 y FD(has)f(precedence)f Fr(minprec)p FD(,)h(which)g(must)g(be)h(lo)
n(wer)f(than)g(the)h(precedence)e(of)h(an)o(y)g(real)g(operator)-5
b(.)22 b(Using)i(this)374 747 y(trick,)e(we)h(de\002ne)g(functions)e
(that)j(return)d(the)i(operator)f(on)g(the)h(top)g(of)g(the)g(stack)g
(and)f(the)h(operator)e(about)h(to)i(be)374 847 y(scanned)19
b(in)h(the)g(input.)374 985 y Fv(h)p Fx(in\002x)p Fv(i)o
Fu(+)p Fv(\021)p 2637 913 1125 4 v 2637 1112 4 200 v
1950 w Fo(srator)44 b(:)g(stack)89 b(->)45 b(rator)2661
1077 y(irator)f(:)g(image')g(->)h(rator)p 3758 1112 V
2637 1115 1125 4 v 457 1111 a Fr(val)k(minrator)f(:)i(rator)f(=)506
1210 y(\("<minimum-precedence)d(sentinel>",)i(minprec,)g(NONASSOC\))457
1310 y(fun)h(srator)g(\(PUSH)98 b(\(_,)50 b(_,)f($\)\))g(=)h($)556
1410 y(|)g(srator)f(BOT)746 b(=)50 b(minrator)457 1509
y(fun)f(irator)g(\(INFIX)f(\($,)i(_,)f(_\)\))g(=)h($)556
1609 y(|)g(irator)f(EOI)746 b(=)50 b(minrator)374 1733
y FD(Gi)n(v)o(en)25 b(a)h(stack)g Fr(stack)g FD(and)f(an)h(input)f
(sequence)g(of)h(tok)o(ens)f Fr(ipts)p FD(,)h(we)g(may)g(abbre)n(viate)
e Fr(srator)49 b(stack)374 1833 y FD(as)21 b Fv(\010)529
1845 y Fn(stack)737 1833 y FD(and)f(abbre)n(viate)e Fr(irator)49
b(ipts)20 b FD(as)h Fv(\010)1966 1845 y Fn(ipts)2117
1833 y FD(.)457 1933 y(These)33 b(function)g(de\002nitions)g(sho)n(w)h
(a)g(ne)n(w)g(ML)g(construct\227we)f(de\002ne)g(functions)g(on)g
Fr(datatype)p FD(s)h(by)374 2032 y(pattern-matching)25
b(against)j(the)h(datatype)e(constructors.)g(W)-7 b(e)30
b(pro)o(vide)d(a)i Fx(binding)e FD(and)h(a)h Fx(body)f
FD(for)g(each)g(con-)374 2132 y(structor)-5 b(.)19 b(This)i(ability)f
(to)h(use)f(pattern)g(matching)f(to)i(do)f(case)g(analysis)h(is)g(one)f
(of)g(the)h(adv)n(antages)e(of)h(using)g(ML,)374 2232
y(especially)f(because)h(the)g(compiler)f(ensures)h(that)g(all)h(cases)
g(are)f(co)o(v)o(ered.)457 2331 y(This)30 b(code)f(also)h(illustrates)g
(an)f(unusual)g(syntactic)g(feature)g(of)g(ML:)h(we)g(can)g(use)g
(strings)f(of)h(symbols,)f(as)374 2431 y(well)20 b(as)h(strings)f(of)g
(letters,)g(to)g(mak)o(e)g(identi\002ers.)g(In)f(this)i(paper)m(,)d(by)
i(con)m(v)o(ention,)d(the)j(identi\002er)f Fr($)i FD(stands)f(for)g(an)
374 2530 y(arbitrary)e(operator)-5 b(.)457 2630 y(W)e(e)21
b(no)n(w)f(ha)n(v)o(e)g(enough)e(machinery)h(to)h(write)h(a)g
(shift-reduce)d(LR)j(parser)m(,)f(which)g(continues)f(parsing)g(until)h
(its)374 2730 y(stack)e(and)g(input)g(are)g(empty)-5
b(.)17 b(The)h(parser')-5 b(s)18 b(state)h(includes)f(a)g(stack)h(with)
f(an)h(operator)d Fv(\010)3015 2742 y Fn(stack)3222 2730
y FD(on)i(top,)g(a)h(current)374 2829 y(e)o(xpression)i
Fr(e)p FD(,)j(and)f(the)g(input,)f(which)h(be)o(gins)f(with)i(the)f
(operator)f Fv(\010)2459 2841 y Fn(ipts)2610 2829 y FD(.)i(This)f
(state)h(is)g(represented)e(by)h(three)374 2929 y(parameters)c(to)i
(the)g(function)e Fr(parse')p FD(.)h(P)o(arsing)g(is)i(complete)e(when)
g(the)h(stack)f(is)i(empty)e(\()p Fr(BOT)p FD(\))g(and)g(the)h(input)
374 3029 y(is)g(empty)e(\()p Fr(EOI)p FD(\).)374 3167
y Fv(h)p Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)p 2099 3095
1663 4 v 2099 3385 4 291 v 1412 w Fo(parse')44 b(:)g(stack)g(*)h(ast)f
(*)h(image')f(->)g(ast)2123 3258 y(parse)89 b(:)44 b(image)g(->)h(ast)
2123 3350 y(parseAtom)e(:)i(lexical_atom)e(->)h(ast)p
3758 3385 V 2099 3388 1663 4 v 457 3293 a Fr(exception)k(Associativity)
457 3392 y(local)556 3492 y(exception)g(Impossible)556
3591 y(fun)i(parse')e(\(BOT,)h(e,)h(EOI\))f(=)g(e)656
3691 y(|)h(parse')e(\(stack,)h(e,)g(ipts\))g(=)855 3791
y Fv(h)p Fx(shift)21 b(or)g(r)m(educe)o(,)e(depending)f(on)i(r)m
(elative)g(pr)m(ecedence)f(of)h Fv(\010)2697 3803 y Fn(stack)2906
3791 y Fx(and)f Fv(\010)3116 3803 y Fn(ipts)3267 3791
y Fv(i)556 3890 y Fr(and)50 b(parse)e(\(IMAGE\(a,)h(tail\)\))f(=)i
(parse'\(BOT,)e(parseAtom)g(a,)h(tail\))556 3990 y(and)h(parseAtom)e
(\(LEX_ATOM)g(a\))h(=)h(ATOM)f(a)656 4090 y(|)h(parseAtom)e(\(PARENS)g
(im\))h(=)h(parse)f(im)457 4189 y(in)556 4289 y(val)h(parse)e(=)i
(parse)457 4388 y(end)374 4513 y FD(The)15 b(ML)i(code)e(uses)i(tw)o(o)
f(ne)n(w)g(constructs,)f(and)h(it)h(sho)n(ws)f(a)h(ne)n(w)f(w)o(ay)g
(to)g(use)g(pattern)g(matching.)e(The)i(declaration)374
4613 y Fr(local)j Fx(private-declar)o(ations)f Fr(in)i
Fx(public-declar)o(ations)d Fr(end)31 b FD(hides)g(information.)e(Pri)n
(v)n(ate)i(declarations)f(are)374 4712 y(in)m(visible)25
b(outside)g(the)h Fr(local)g FD(construct;)f(only)g(public)h
(declarations)e(escape.)i(The)g(connecti)n(v)o(e)e Fr(and)i
FD(is)h(used)374 4812 y(with)19 b Fr(fun)h FD(to)g(de\002ne)f(a)h(nest)
g(of)f(mutually)g(recursi)n(v)o(e)f(functions.)g(The)h(\002rst)i(match)
e(in)g(the)h(de\002nition)f(of)g Fr(parse')374 4911 y
FD(handles)h(the)h(case)h(when)f(both)g(the)g(stack)g(and)g(the)h
(input)e(are)h(empty)-5 b(.)20 b(The)h(ne)o(xt)g(match)g(handles)f(all)
i(other)f(cases;)374 5011 y(this)f(w)o(orks)g(because)g(a)g(v)n
(ariable)f(in)i(a)f Fx(binding)f FD(matches)h(an)o(y)f(datatype)g
(constructor)-5 b(.)p eop
%%Page: 8 8
8 7 bop 374 266 a FG(8)1339 b Fz(NORMAN)19 b(RAMSEY)457
448 y FD(The)e(interesting)g(part)g(of)h(the)f(parser)g(is)i(deciding)d
(whether)h(to)h(shift)g(or)f(reduce.)f(Shifting)h(pushes)h
Fr(e)g FD(and)f Fv(\010)3610 460 y Fn(ipts)374 548 y
FD(onto)28 b(the)h(stack.)g(Reducing)f(pops)h Fv(\010)1503
560 y Fn(stack)1721 548 y FD(and)g(the)g(e)o(xpression)f(belo)n(w)g
(it,)i(creating)e(a)i(ne)n(w)f Fr(APP)g FD(node)f(with)374
648 y(operator)19 b Fv(\010)737 660 y Fn(stack)925 648
y FD(.)i(Shifting)g Fv(\010)1322 660 y Fn(ipts)1494 648
y FD(guarantees)f(that)h Fv(\010)2082 660 y Fn(ipts)2255
648 y FD(will)h(be)f(reduced)f(before)f Fv(\010)3089
660 y Fn(stack)3277 648 y FD(,)j(and)e(therefore)374
747 y(that)29 b Fv(\010)593 759 y Fn(ipts)773 747 y FD(will)h(e)n(v)o
(entually)c(be)j(a)g(right)g(descendant)e(of)h Fv(\010)2225
759 y Fn(stack)2413 747 y FD(.)i(Reducing)d(guarantees)g(that)i
Fv(\010)3414 759 y Fn(stack)3632 747 y FD(will)374 847
y(e)n(v)o(entually)18 b(be)h(a)i(left)f(descendant)e(of)i
Fv(\010)1568 859 y Fn(ipts)1719 847 y FD(.)g(The)f(parser)h(uses)g
Fr(noparens)f FD(to)h(choose)f(whiche)n(v)o(er)f(alternati)n(v)o(e)374
946 y(is)33 b(correct)e(without)g(parentheses.)g(The)h(choice)f(is)i
(deterministic)e(because)g(the)i(conditions)d(for)i(shifting)f(and)374
1046 y(reducing)18 b(are)i(mutually)f(e)o(xclusi)n(v)o(e;)g(the)h
(proof)f(of)g(correctness)h(relies)g(on)g(that)g(f)o(act.)374
1171 y Fv(h)p Fx(shift)h(or)f(r)m(educe)o(,)g(depending)d(on)j(r)m
(elative)g(pr)m(ecedence)f(of)h Fv(\010)2215 1183 y Fn(stack)2424
1171 y Fx(and)f Fv(\010)2634 1183 y Fn(ipts)2786 1171
y Fv(i\021)457 1270 y Fr(if)49 b(noparens\(irator)e(ipts,)i(srator)g
(stack,)f(RIGHT\))h(then)g(\(*)h(shift)e(*\))556 1370
y(case)h(ipts)656 1469 y(of)g(INFIX)g(\($,)g(a,)h(ipts'\))f(=>)905
1569 y(parse'\(PUSH\(stack,)d(e,)k($\),)f(parseAtom)f(a,)i(ipts'\))706
1669 y(|)f(EOI)h(=>)f(raise)g(Impossible)f(\(*)h(EOI)h(has)f(lowest)f
(precedence)g(*\))457 1768 y(else)h(if)g(noparens\(srator)e(stack,)i
(irator)g(ipts,)f(LEFT\))h(then)g(\(*)h(reduce)e(*\))556
1868 y(case)h(stack)656 1968 y(of)g(PUSH)g(\(stack',)g(e',)g($\))g(=>)h
(parse'\(stack',)d(APP\(e',)i($,)g(e\),)g(ipts\))706
2067 y(|)g(BOT)h(=>)f(raise)g(Impossible)f(\(*)h(BOT)h(has)f(lowest)f
(precedence)g(*\))457 2167 y(else)556 2267 y(raise)h(Associativity)656
2366 y(\(*)g(saw)h(a)f(+)h(b)f(+)h(c,)g(for)f(some)g(nonassociative)e
(+)j(*\))374 2491 y FD(P)o(attern)21 b(matching)g(can)h(be)g(used)g(in)
h Fr(case)f FD(statements)g(as)h(well)g(as)g(in)f(function)f
(de\002nitions.)g(Here)h(it)h(is)g(used)f(to)374 2590
y(e)o(xtract)i(the)h(\002rst)h(tw)o(o)g(inputs)e(or)h(the)g(e)o
(xpression)f(and)h(operator)e(on)i(top)g(of)g(the)g(stack.)g(Because)g
Fr(srator)g FD(and)374 2690 y Fr(irator)d FD(return)h
Fr(minrator)f FD(for)h Fr(BOT)g FD(and)g Fr(EOI)p FD(,)g(the)g(parser)g
(shifts)h(when)f(the)g(stack)h(is)g(empty)f(and)f(reduces)374
2790 y(when)f(there)g(are)h(no)g(more)f(inputs.)g(Therefore,)f(the)h
(lines)i(that)f(raise)g Fr(Impossible)f FD(are)g(ne)n(v)o(er)g(e)o(x)o
(ecuted;)f(the)o(y)374 2889 y(are)g(included)e(only)i(to)g(k)o(eep)g
(the)g(compiler)f(from)g(complaining)f(about)h(cases)i(that)f(are)g
(not)g(co)o(v)o(ered.)457 2989 y(The)k(parser)g(uses)i(tw)o(o)f(dif)n
(ferent)e(kinds)h(of)h(recursion.)e(The)h(direct)h(recursi)n(v)o(e)e
(calls)j(from)e Fr(parse')g FD(to)h(itself)374 3088 y(are)i(all)i(tail)
f(calls;)h(such)e(calls)i(are)f(ML)g(programmers')c(w)o(ay)k(of)g
(writing)f(loops.)g(In)h(an)f(imperati)n(v)o(e)f(language,)374
3188 y Fr(parse')21 b FD(w)o(ould)g(be)h(written)g(with)g(a)g(loop,)f
(and)g(it)i(w)o(ould)e(modify)f(three)i(v)n(ariables:)f(the)h(stack,)g
(the)g(current)e(e)o(x-)374 3288 y(pression,)e(and)g(the)h(inputs.)g
(When)g(the)g(stack)g(and)f(inputs)h(were)g(empty)-5
b(,)17 b(it)j(w)o(ould)f(e)o(xit)f(the)i(loop)e(by)g(returning)f(the)
374 3387 y(current)22 b(e)o(xpression.)g(An)i(imperati)n(v)o(e)e(v)o
(ersion)g(of)i Fr(parse')f FD(w)o(ould)g(k)o(eep)g(the)h(indirect)f
(recursi)n(v)o(e)f(call)j(through)374 3487 y Fr(parseAtom)19
b FD(and)g Fr(parse)p FD(.)374 3736 y Fq(Unparsing)h(in\002x)j(expr)n
(essions)457 3885 y FD(Before)f(getting)h(into)g(the)g(details)g(of)g
(unparsing,)e(we)j(de\002ne)e(functions)g(that)h(mak)o(e)g(images)g
(from)f(atoms)h(and)374 3985 y(put)c(parentheses)h(around)e(images.)374
4123 y Fv(h)p Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)p 2368
4051 1394 4 v 2368 4250 4 200 v 1681 w Fo(image)358 b(:)44
b(string)g(->)h(image)2392 4215 y(parenthesize)e(:)h(image)89
b(->)45 b(image)p 3758 4250 V 2368 4253 1394 4 v 457
4323 a Fr(fun)k(image)397 b(a)100 b(=)50 b(IMAGE)e(\(LEX_ATOM)h(a,)g
(EOI\))457 4422 y(fun)g(parenthesize)e(im)j(=)g(IMAGE)e(\(PARENS)h(im,)
99 b(EOI\))374 4547 y(infixImage)17 b FD(combines)g(tw)o(o)h(images)g
(by)g(putting)f(an)i(in\002x)f(operator)e(between)i(them.)f(It)i(uses)g
Fr(append)f FD(as)h(an)374 4646 y(auxiliary)f(function.)374
4785 y Fv(h)p Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)p 1785
4713 1976 4 v 1785 4912 4 200 v 1098 w Fo(append)223
b(:)45 b(image')f(*)g(image')g(->)h(image')1809 4876
y(infixImage)e(:)i(image)f(*)h(rator)f(*)g(image)g(->)h(image)p
3758 4912 V 1785 4915 1976 4 v 457 4908 a Fr(local)556
5008 y(fun)50 b(append)e(\(EOI,)h(image'\))g(=)g(image')656
5107 y(|)h(append)e(\(INFIX\($,)g(a,)i(tail\),)e(image'\))h(=)p
eop
%%Page: 9 9
9 8 bop 1116 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)739 b FG(9)855 448 y Fr(INFIX\($,)48
b(a,)i(append\(tail,)d(image'\)\))457 548 y(in)556 648
y(fun)j(infixImage)d(\(IMAGE\(a,)i(tail\),)f($,)i(IMAGE\(a',)e
(tail'\)\))g(=)855 747 y(IMAGE\(a,)g(append\(tail,)g(INFIX\($,)g(a',)i
(tail'\)\)\))457 847 y(end)457 971 y FD(T)-7 b(o)23 b(unparse)f(an)g(e)
o(xpression,)g(we)h(produce)e(a)i Fx(fr)o(a)o(gment)h
FD(containing)d(not)i(only)f(the)h(image)g(of)f(the)h(e)o(xpression,)
374 1071 y(b)n(ut)c(also)g(the)g(lo)n(west-precedence)e(operator)g
(used)i(in)g(the)h(e)o(xpression.)d(That)i(operator)e(tells)j(us)g
(enough)d(to)i(decide)374 1171 y(whether)g(to)h(parenthesize)f(that)h
(e)o(xpression)f(when)g(it)i(is)g(used.)374 1295 y Fv(h)p
Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)457 1395 y Fr(type)49
b(fragment)f(=)i(rator)f(*)g(image)457 1519 y FD(The)23
b Fx(top-le)o(vel)g(oper)o(ator)o(s)g FD(of)h(an)g(image)f(are)h(the)g
(operators)e(that)i(appear)f(outside)g(of)h(parentheses.)e(If)i(an)g
(im-)374 1619 y(age)j(has)i(top-le)n(v)o(el)d(operators,)h(then)g(the)h
(top-le)n(v)o(el)f(operators)f(of)i(least)h(precedence)d(must)i(all)h
(ha)n(v)o(e)e(the)h(same)374 1719 y(associati)n(vity)-5
b(,)21 b(which)i(must)g(be)f Fr(LEFT)h FD(or)g Fr(RIGHT)p
FD(.)f(Otherwise,)g(one)h(of)f(those)h(operators)e(w)o(ould)h(ha)n(v)o
(e)h(to)g(be)f(in)374 1818 y(parentheses,)c(which)i(contradicts)f(the)h
(assumption)f(that)i(the)o(y)e(are)h(top-le)n(v)o(el)f(operators.)457
1918 y(The)26 b(function)e Fr(bracket\(frag,)48 b(side,)h(rator\))26
b FD(parenthesizes)f(a)i(fragment)d Fr(frag)i FD(that)h(is)g(to)g(ap-)
374 2017 y(pear)19 b(ne)o(xt)h(to)g(an)g(operator)f Fr(rator)g
FD(on)h(the)g(side)h(labelled)e Fr(side)p FD(:)374 2156
y Fv(h)p Fx(in\002x)p Fv(i)o Fu(+)p Fv(\021)p 1426 2084
2335 4 v 1426 2191 4 108 v 739 w Fo(bracket)44 b(:)h(fragment)e(*)i
(associativity)e(*)h(rator)g(->)h(image)p 3758 2191 V
1426 2194 2335 4 v 457 2281 a Fr(fun)k(bracket\(\(inner,)e(image\),)h
(side,)h(outer\))g(=)556 2381 y(if)h(noparens\(inner,)d(outer,)h
(side\))h(then)g(image)g(else)g(parenthesize)f(image)374
2506 y FD(Gi)n(v)o(en)14 b(the)i(ability)f(to)g(brack)o(et)g
(fragments,)f(unparsing)f(is)j(straightforw)o(ard.)d(W)-7
b(e)17 b(create)e(another)f(sentinel)h(operator)374 2605
y Fr(maxrator)p FD(,)30 b(ha)n(ving)f(precedence)g Fr(maxprec)p
FD(,)i(which)f(must)h(be)g(higher)f(than)h(the)g(precedence)e(of)i(an)o
(y)f(true)374 2705 y(operator)m(,)17 b(so)k(we)g(can)f(use)g(it)h(in)f
(fragments)f(made)h(from)f(atoms.)374 2843 y Fv(h)p Fx(in\002x)p
Fv(i)o Fu(+)p Fv(\021)p 2323 2771 1438 4 v 2323 2970
4 200 v 1636 w Fo(unparse')44 b(:)g(ast)h(->)f(rator)g(*)h(image)2347
2934 y(unparse)89 b(:)44 b(ast)h(->)f(image)p 3758 2970
V 2323 2973 1438 4 v 457 2966 a Fr(local)556 3066 y(val)50
b(maxrator)e(=)h(\("<max-precedence)e(sentinel>",)h(maxprec,)g
(NONASSOC\))556 3166 y(fun)i(unparse')e(\(ATOM)h(a\))g(=)h(\(maxrator,)
e(image)h(a\))656 3265 y(|)h(unparse')e(\(APP\(l,)g($,)i(r\)\))f(=)855
3365 y(let)g(val)h(l')f(=)h(bracket)e(\(unparse')g(l,)i(LEFT,)98
b($\))1054 3464 y(val)50 b(r')f(=)h(bracket)e(\(unparse')g(r,)i(RIGHT,)
e($\))855 3564 y(in)99 b(\($,)50 b(infixImage\(l',)d($,)i(r'\)\))855
3664 y(end)457 3763 y(in)556 3863 y(fun)h(unparse)e(e)i(=)656
3963 y(let)f(val)g(\($,)h(im\))f(=)h(unparse')e(e)656
4062 y(in)99 b(im)656 4162 y(end)457 4261 y(end)374 4386
y FD(Using)28 b Fr(bracket)f FD(maintains)h(the)g(precedence)e(and)h
(associati)n(vity)h(in)m(v)n(ariants)f(of)h(the)g(fragments.)e
Fr(unparse)374 4486 y FD(\002rst)21 b(computes)e(a)h(fragment,)e(then)i
(discards)g(the)g(operator)m(,)e(lea)n(ving)h(only)h(the)g(image.)p
eop
%%Page: 10 10
10 9 bop 374 266 a FG(10)1316 b Fz(NORMAN)19 b(RAMSEY)374
448 y Fq(Pr)n(oof)j(of)h(corr)n(ectness)457 598 y FD(Pro)o(ving)h(the)i
(simple)g(unparser)f(correct)g(helps)h(clarify)f(ho)n(w)h(the)g(parser)
f(and)h(unparser)e(w)o(ork)i(together)-5 b(.)25 b(The)374
697 y(result)i(gi)n(ving)g(the)g(most)h(insight)f(is)i(Proposition)d
(3,)i(which)f(gi)n(v)o(es)g(the)h(properties)e(of)h(the)h(top-le)n(v)o
(el)e(operators)374 797 y(produced)17 b(during)g(unparsing.)h(Most)h
(of)h(the)f(proof)f(is)j(omitted)d(from)h(the)g(body)g(of)g(the)g
(paper;)g(it)h(appears)f(instead)374 897 y(in)h(Appendix)e(B.)374
1079 y Fm(Pr)o(oposition)g(1)41 b Fr(parse)49 b(\(unparse)g(e\))20
b Fu(=)g Fr(e)p Fx(.)374 1262 y FD(This)g(proposition)e(follo)n(ws)i
(from)f(Proposition)g(2.)374 1445 y Fm(Pr)o(oposition)f(2)j(\(Corr)o
(ectness)e(of)h(unparsing)g(in)h(context\))40 b Fx(If)22
b Fr(e)g Fx(is)g(any)g(e)n(xpr)m(ession,)f(and)g(if)35
b Fr(a)22 b Fx(and)h Fr(tail)e Fx(ar)m(e)374 1544 y(c)o(hosen)29
b(suc)o(h)h(that)g Fr(unparse)48 b(e)i(=)f(IMAGE\(a,)g(tail\))o
Fx(,)30 b(and)g(if)h Fr(s)f Fx(is)h(a)g(par)o(ser)g(stac)n(k)f(and)g
Fr(i)g Fx(an)g(input)374 1644 y(sequence)19 b(of)h(type)g
Fr(image')g Fx(suc)o(h)f(that)h(for)h(all)f(top-le)o(vel)f(oper)o(ator)
o(s)h Fv(\010)2527 1614 y Fl(0)2568 1644 y Fx(in)h Fr(tail)p
Fx(,)766 1826 y Fr(noparens)p Fu(\()p Fv(\010)1263 1792
y Fl(0)1282 1826 y Fw(;)9 b Fr(srator)20 b(s)p Fw(;)9
b Fr(RIGHT)p Fu(\))20 b Fx(and)g Fr(noparens)p Fu(\()p
Fv(\010)2661 1792 y Fl(0)2680 1826 y Fw(;)9 b Fr(irator)20
b(i)p Fw(;)9 b Fr(LEFT)p Fu(\))p Fw(;)374 2009 y Fx(then)19
b Fr(parse')49 b(\(s,)g(parseAtom)f(a,)i(append\(tail,)d(i\)\))j(=)f
(parse')g(\(s,)g(e,)h(i\))p Fx(.)374 2192 y FD(In)17
b(other)f(w)o(ords,)h(e)n(v)o(en)f(when)h Fr(e)h FD(is)g(a)g(fragment)e
(of)h(a)h(lar)o(ger)e(e)o(xpression,)f(we)j(can)f(parse)g(the)h
(concrete)e(syntax)g Fr(\(a,)374 2291 y(tail\))j FD(after)g(ha)n(ving)f
(parsed)h(a)h(pre\002x)f(\(stack)g Fr(s)p FD(\))h(and)f(before)f
(parsing)h(a)h(suf)n(\002x)f(\(inputs)g Fr(i)p FD(\),)g(and)g(in)h
(this)g(conte)o(xt)374 2391 y(we)h(reco)o(v)o(er)e(the)i(original)f(e)o
(xpression)f Fr(e)p FD(,)i(lea)n(ving)f(stack)h Fr(s)h
FD(and)e(inputs)h Fr(i)g FD(to)g(be)g(processed.)f(The)g(conditions)g
(in-)374 2491 y(v)n(olving)e Fr(noparens)g FD(say)h(that)h(the)f
(top-le)n(v)o(el)f(operators)g(in)h Fr(unparse)48 b(e)20
b FD(bind)f(at)g(least)h(as)g(tightly)f(as)h Fv(\010)3552
2503 y Fn(stack)3740 2491 y FD(,)374 2590 y(which)h(is)i(on)f(top)g(of)
g(the)g(stack,)g(and)g(at)h(least)g(as)g(tightly)e(as)i
Fv(\010)2231 2602 y Fn(ipts)2382 2590 y FD(,)g(which)e(follo)n(ws)h
Fr(e)p FD(;)h(furthermore,)c(when)i(the)374 2690 y(binding)d(po)n(wers)
i(are)g(the)g(same,)g(the)g(associati)n(vity)g(forces)g(the)g(parser)f
(to)i(shift)f(or)g(reduce)f(as)i(appropriate.)374 2873
y Fm(De\002nition)f(1)g(\(Binds)i(as)e(tightly)g(as\))41
b Fx(An)23 b(oper)o(ator)f Fv(\010)i FD(binds)f(as)h(tightly)f(as)h
Fx(another)f(oper)o(ator)f Fr(rator)h Fx(if)h(and)374
2972 y(only)19 b(if)829 3150 y FD(precedence)7 b Fv(\010)18
b Fw(>)g FD(precedence)6 b Fr(rator)765 3250 y Fv(_)j
FD(precedence)e Fv(\010)18 b Fu(=)g FD(precedence)6 b
Fr(rator)11 b Fv(^)h FD(associati)n(vity)c Fv(\010)18
b Fu(=)g FD(associati)n(vity)8 b Fr(rator)o Fw(:)374
3428 y FD(This)18 b(relation)g(is)i(lik)o(e)f Fr(noparens)p
FD(,)e(e)o(xcept)h(it)i(ignores)d(the)i(relati)n(v)o(e)f(positions)g
(of)g(operators)g(of)g(the)h(same)g(prece-)374 3527 y(dence)25
b(and)g(associati)n(vity)-5 b(.)25 b(This)h(weak)o(ening)e(of)h
Fr(noparens)g FD(yields)h(a)g(re\003e)o(xi)n(v)o(e,)e(transiti)n(v)o
(e,)h(binary)g(relation,)374 3627 y(which)19 b(is)i(in)g(f)o(act)f(a)h
(slight)f(v)n(ariation)f(on)h(\223has)g(precedence)e(at)j(least)g(as)g
(great.)-6 b(\224)457 3727 y(The)22 b(proof)e(of)i(Proposition)f(2)h
(is)i(by)e(structural)f(induction)g(on)h Fr(e)p FD(.)g(The)g(base)g
(case)h(is)g(straightforw)o(ard.)d(T)-7 b(o)22 b(get)374
3826 y(the)k(idea)g(of)g(the)g(proof)e(of)i(the)g(induction)e(step,)j
(we)f(use)g(te)o(xtual)g(juxtaposition)e(to)i(write)h(e)o(xpressions,)d
(inputs,)374 3926 y(and)f(parser)h(stacks.)h(If)f Fr(e)18
b Fu(=)g Fr(l)12 b Fv(\010)g Fr(r)n FD(,)25 b(we)g(can)f(write)g
Fr(unparse)c(e)e Fu(=)g Fr(a)2487 3938 y Fn(l)2528 3926
y Fr(t)2578 3938 y Fn(l)2630 3926 y Fv(\010)12 b Fr(a)2757
3938 y Fn(r)2797 3926 y Fr(t)2847 3938 y Fn(r)2888 3926
y FD(,)25 b(where)e Fr(a)p FD(')-5 b(s)25 b(are)g(atoms)f(and)374
4026 y Fr(t)p FD(')-5 b(s)28 b(\(tails\))g(are)g(sequences)f(of)h
(atoms)g(and)f(operators.)g(Writing)g Fr(parse)2592 3995
y Fl(0)2612 4026 y Fu(\()p Fr(s)p Fw(;)9 b Fr(parseAtom)20
b(a)3246 4038 y Fn(l)3287 4026 y Fw(;)9 b Fr(t)3369 4038
y Fn(l)3421 4026 y Fv(\010)j Fr(a)3548 4038 y Fn(r)3588
4026 y Fr(t)3638 4038 y Fn(r)3679 4026 y Fr(i)p Fu(\))374
4125 y FD(for)19 b(the)h(state)h(of)f(the)g(parser)m(,)f(we)i(pro)o(v)o
(e)d(Proposition)h(2)h(by)g(sho)n(wing)589 4290 y Fr(parse)839
4260 y Fl(0)860 4290 y Fu(\()p Fr(s)p Fw(;)9 b Fr(parseAtom)19
b(a)1493 4302 y Fn(l)1534 4290 y Fw(;)9 b Fr(t)1616 4302
y Fn(l)1668 4290 y Fv(\010)j Fr(a)1795 4302 y Fn(r)1835
4290 y Fr(t)1885 4302 y Fn(r)1926 4290 y Fr(i)p Fu(\))374
4457 y(=)20 b FD(\(by)f(the)h(induction)f(hypothesis)f(applied)i(to)g
Fr(l)p FD(\))589 4622 y Fr(parse)839 4592 y Fl(0)860
4622 y Fu(\()p Fr(s)p Fw(;)9 b Fr(l)p Fw(;)g Fv(\010)p
Fr(a)1171 4634 y Fn(r)1211 4622 y Fr(t)1261 4634 y Fn(r)1302
4622 y Fr(i)p Fu(\))374 4789 y(=)20 b FD(\(by)f(hypothesis,)g
Fr(noparens)p Fu(\()p Fv(\010)p Fw(;)9 b Fr(srator)18
b(s)p Fw(;)9 b Fr(RIGHT)p Fu(\))o FD(,)20 b(and)g(the)g(parser)g
(shifts\))589 4954 y Fr(parse)839 4924 y Fl(0)860 4954
y Fu(\()p Fr(sl)p Fv(\010)p Fw(;)9 b Fr(parseAtom)18
b(a)1607 4966 y Fn(r)1648 4954 y Fw(;)9 b Fr(t)1730 4966
y Fn(r)1771 4954 y Fr(i)p Fu(\))374 5122 y(=)20 b FD(\(by)f(the)h
(induction)f(hypothesis)f(applied)i(to)g Fr(r)p FD(\))p
eop
%%Page: 11 11
11 10 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(11)589 447 y Fr(parse)839
417 y Fl(0)860 447 y Fu(\()p Fr(sl)p Fv(\010)p Fw(;)9
b Fr(r)p Fw(;)g Fr(i)p Fu(\))374 614 y(=)20 b FD(\(by)f(hypothesis,)g
Fr(noparens)p Fu(\()p Fv(\010)p Fw(;)9 b Fr(irator)18
b(i)p Fw(;)9 b Fr(LEFT)p Fu(\))o FD(,)21 b(and)e(the)h(parser)g
(reduces\))589 779 y Fr(parse)839 749 y Fl(0)860 779
y Fu(\()p Fr(s)p Fw(;)9 b Fr(l)j Fv(\010)g Fr(r)p Fw(;)d
Fr(i)p Fu(\))19 b(=)h Fr(parse)1631 749 y Fl(0)1651 779
y Fu(\()p Fr(s)p Fw(;)9 b Fr(e)p Fw(;)g Fr(i)p Fu(\))374
946 y FD(The)17 b(details)i(in)m(v)n(olv)o(e)d(sho)n(wing)h(that)i(the)
f(preconditions)d(hold)j(and)f(it)i(is)g(safe)f(to)h(apply)e(the)h
(induction)e(hypothesis.)374 1046 y(W)-7 b(e)33 b(need)e(f)o(acts)i
(about)e(the)h(results)g(returned)e(by)i Fr(unparse)f
FD(and)h Fr(unparse')p FD(,)f(as)h(stated)h(in)f(the)g(ne)o(xt)f(tw)o
(o)374 1146 y(propositions.)374 1328 y Fm(Pr)o(oposition)18
b(3)41 b Fx(If)23 b(an)f(e)n(xpr)m(ession)h Fr(e)18 b
Fu(=)g Fr(APP)p Fu(\()p Fr(l)p Fw(;)9 b Fv(\010)p Fw(;)g
Fr(r)p Fu(\))o Fx(,)23 b(then)f(we)h(can)f(c)o(hoose)g
Fr(l)2804 1298 y Fl(0)2848 1328 y Fx(and)f Fr(r)3045
1298 y Fl(0)3089 1328 y Fx(as)i(in)g Fr(unparse)3624
1298 y Fl(0)3643 1328 y Fx(,)g(so)374 1428 y(that)d Fr(unparse)f(e)f
Fu(=)g Fr(l)1094 1398 y Fl(0)1127 1428 y Fv(\010)12 b
Fr(r)1254 1398 y Fl(0)1273 1428 y Fx(.)270 1594 y(1.)41
b(If)23 b Fv(\010)f Fx(is)i(non-associative)o(,)c(then)i(e)o(very)h
(top-le)o(vel)f(oper)o(ator)f(in)i Fr(l)2309 1564 y Fl(0)2353
1594 y Fx(and)f Fr(r)2551 1564 y Fl(0)2595 1594 y Fx(has)g(a)h(pr)m
(ecedence)e(gr)m(eater)i(than)f(that)374 1694 y(of)e
Fv(\010)p Fx(.)270 1793 y(2.)41 b(If)20 b Fv(\010)g Fx(is)h
(left-associative)o(,)f(then)g(e)o(very)g(top-le)o(vel)f(oper)o(ator)g
(in)h Fr(r)2268 1763 y Fl(0)2310 1793 y Fx(has)g(a)g(pr)m(ecedence)f
(gr)m(eater)h(than)f(that)h(of)h Fv(\010)p Fx(.)270 1893
y(3.)41 b(If)20 b Fv(\010)g Fx(is)h(right-associative)o(,)e(then)h(e)o
(very)g(top-le)o(vel)f(oper)o(ator)g(in)i Fr(l)2324 1863
y Fl(0)2365 1893 y Fx(has)f(a)h(pr)m(ecedence)d(gr)m(eater)i(than)g
(that)g(of)g Fv(\010)p Fx(.)374 2076 y Fm(Pr)o(oposition)e(4)41
b Fx(F)-9 b(or)21 b(any)f(e)n(xpr)m(ession)g Fr(e)p Fx(,)g
Fr(unparse')48 b(e)21 b Fx(is)g(pr)l(operly)f(co)o(ver)m(ed,)f(as)i
(de\002ned)d(below)-6 b(.)374 2258 y Fm(De\002nition)20
b(2)g(\(Co)o(v)o(er)o(ed,)f(pr)o(operly)g(co)o(v)o(er)o(ed\))40
b Fx(A)30 b(fr)o(a)o(gment)g Fr(frag)49 b(=)h(\(rator,)e(im\))31
b Fx(is)g FD(co)o(v)o(ered)d Fx(if)j(and)374 2358 y(only)g(if)i(e)o
(very)f(top-le)o(vel)f(oper)o(ator)g(in)i Fr(im)f Fx(binds)g(as)g
(tightly)g(as)h Fr(rator)p Fx(.)e(A)i(co)o(ver)m(ed)e(fr)o(a)o(gment)h
(is)h FD(properly)374 2457 y(co)o(v)o(ered)18 b Fx(if)j(and)e(only)h
(if)g Fr(rator)49 b(=)h(maxrator)19 b Fx(or)i(ther)m(e)f(is)h(at)g
(least)f(one)g(top-le)o(vel)f(oper)o(ator)g(in)h Fr(im)p
Fx(.)374 2640 y FD(The)15 b(intuition)f(behind)g(a)h(co)o(v)o(ered)e
(fragment)h Fr(\(rator,)48 b(im\))16 b FD(is)g(that)f(lo)n
(w-precedence)e(operators)g(in)j Fr(im)p FD(,)f(which)374
2740 y(do)i(not)g(bind)f(as)i(tightly)f(as)h Fr(rator)p
FD(,)f(are)g(safely)g(\223co)o(v)o(ered\224)e(with)j(parentheses.)e
(Proper)g(co)o(v)o(erage)f(a)n(v)n(oids)j(pathol-)374
2839 y(ogy)h(for)g(fragments)g(that)h(don')o(t)f(ha)n(v)o(e)h(an)o(y)f
(top-le)n(v)o(el)g(operators.)457 2939 y(Proposition)d(3)i(is)h(pro)o
(v)o(ed)d(by)h(case)i(analysis)f(on)f(the)h(result)h(returned)d(by)h
Fr(bracket)p FD(.)g(Proposition)g(4)h(is)h(pro)o(v)o(ed)374
3039 y(by)g(structural)h(induction)e(on)i(the)g(e)o(xpression)f
(unparsed.)f(The)i(proof)e(uses)j(this)g(lemma:)374 3221
y Fm(Lemma)f(1)h(\(Brack)o(eting)e(lemma\))41 b Fx(If)22
b(fr)o(a)o(gment)f Fr(f)h Fx(is)h(pr)l(operly)f(co)o(ver)m(ed,)f(then)g
(for)h(any)f(oper)o(ator)g Fr(rator)g Fx(and)374 3321
y(associativity)e Fr(a)p Fx(,)i Fr(bf)49 b(=)h(\(rator,)e(bracket\(f,)g
(a,)i(rator\)\))19 b Fx(is)i(co)o(ver)m(ed.)374 3504
y FD(The)27 b(lemma)h(is)h(pro)o(v)o(ed)d(by)h(case)i(analysis)f(on)g
(whether)f Fr(bracket)g FD(parenthesizes)g(its)i(fragment.)d(The)i
(proof)374 3603 y(uses)20 b(transiti)n(vity)g(of)g(\223binds)f(as)i
(tightly)f(as.)-6 b(\224)457 3703 y(The)27 b(proof)f(is)i(not)f(as)i
(simple)e(as)i(it)f(w)o(ould)f(ha)n(v)o(e)g(been)f(if)i
Fr(parse)f FD(and)g Fr(unparse)g FD(had)g(been)g(designed)f(in)374
3802 y(tandem)e(with)h(a)g(proof,)f(b)n(ut)h Fr(parse)f
FD(and)h Fr(unparse)f FD(were)h(designed)f(to)h(ha)n(v)o(e)g(simple)g
(implementations,)e(not)374 3902 y(a)28 b(simple)g(proof.)e(One)i
(reason)f(the)h(proof)f(is)i(comple)o(x)d(is)j(that)f(the)g(functions)f
(are)g(not)h(full)g(in)m(v)o(erses;)f(because)374 4002
y(parsing)18 b(lea)n(v)o(es)h(no)f(record)g(of)g(redundant)f
(parentheses,)g Fr(unparse)p Fu(\()p Fr(parse)i(e)p Fu(\))g
Fv(6)p Fu(=)f Fr(e)o FD(.)i(Moreo)o(v)o(er)m(,)15 b(although)i(the)374
4101 y(functions)22 b(are)i(partial)f(in)m(v)o(erses,)f(the)i
(computations)e(are)h(not)h(in)m(v)o(erses.)e(The)i(parser)f(is)h(an)g
(LR)g(parser)m(,)f(w)o(orking)374 4201 y(left)d(to)h(right)f(with)h(an)
f(e)o(xplicit)g(stack.)g(The)h(unparser)d(w)o(orks)j(not)f(left)h(to)f
(right)g(b)n(ut)h(bottom-up,)c(with)k(an)g(implicit)374
4301 y(stack)f(created)f(by)h(recursi)n(v)o(e)f(calls.)457
4400 y(An)25 b(alternati)n(v)o(e)g(approach)e(to)j(unparsing)e(might)h
(be)o(gin)f(with)i(a)g(parser)f(and)g(attempt)g(to)h(deri)n(v)o(e)e(an)
i(unparser)374 4500 y(using)e(the)i(program-transformation)19
b(techniques)24 b(kno)n(wn)g(as)i Fx(pr)l(o)o(gr)o(am)f(in)m(ver)o
(sion)p FD(.)2894 4470 y FM(12-14)3058 4500 y FD(If)h(successful,)e
(this)i(at-)374 4599 y(tempt)17 b(w)o(ould)h(produce)e(an)i(unparser)f
(that)h(w)o(ould)f(be)h(correct)g(by)f(construction,)f(b)n(ut)i(it)h(w)
o(ould)f(look)f(substantially)374 4699 y(dif)n(ferent)25
b(from)g(the)i(one)f(presented)g(here.)g(Program-in)m(v)o(ersion)c
(rules)k(ha)n(v)o(e)h(been)f(de)n(v)o(eloped)e(for)i(simple)h(pro-)374
4799 y(gramming)18 b(calculi,)i(not)g(real)h(programming)c(languages,)h
(so)j(the)g(unparser)d(w)o(ould)i(ha)n(v)o(e)g(to)h(be)f(translated)g
(into)g(a)374 4898 y(programming)14 b(language)j(in)h(order)f(to)h(be)g
(e)o(x)o(ecuted.)e(The)i(unparsers)f(in)h(this)h(paper)e(are)h(e)o(x)o
(ecutable)e(directly)-5 b(,)17 b(and)374 4998 y(the)o(y)h(are)h
(designed)e(to)j(be)e(easy)i(to)f(understand,)d(e)n(v)o(en)i(if)i(that)
f(design)f(mak)o(es)h(the)g(proof)e(of)i(correctness)f(harder)f(to)374
5098 y(understand.)p eop
%%Page: 12 12
12 11 bop 374 266 a FG(12)1316 b Fz(NORMAN)19 b(RAMSEY)986
448 y FG(4)t(.)96 b(A)t(D)t(D)t(I)t(N)t(G)31 b(P)t(R)t(E)t(F)t(I)t(X)e
(A)t(N)t(D)g(P)t(O)t(S)t(T)t(F)t(I)t(X)h(O)t(P)t(E)t(R)t(A)-6
b(T)r(O)t(R)t(S)374 598 y FD(Simple)23 b(in\002x)g(e)o(xpressions)f
(are)h(inadequate)e(for)i(man)o(y)f(real)h(programming)d(languages,)h
(including)h(C)i(and)f(ML.)374 697 y(In)f(this)i(section,)f(we)g(add)g
(unary)e(pre\002x)i(and)f(post\002x)h(operators,)e(as)j(well)g(as)g
(in\002x)e(operators)g(of)h(arbitrary)e(arity)-5 b(.)374
797 y(Moreo)o(v)o(er)m(,)18 b(we)j(use)h(the)f(Standard)f(ML)h(modules)
f(system)h(to)h(generalize)e(our)g(idea)h(of)g(what)g(an)g(image)g(is,)
h(so)f(we)374 897 y(can)f(produce)e(output)h(for)g(a)i(prettyprinter)m
(,)c(not)j(just)h(te)o(xt.)457 996 y Fx(F)l(ixity)i FD(distinguishes)g
(pre\002x)g(and)f(post\002x)h(operators)f(from)h(in\002x)g(operators.)e
(Only)i(in\002x)g(operators)f(ha)n(v)o(e)h(as-)374 1096
y(sociati)n(vity)-5 b(.)374 1220 y Fv(h)p Fx(assoc.sml)p
Fv(i\021)457 1320 y Fr(structure)48 b(Assoc)h(=)g(struct)556
1420 y(datatype)g(associativity)e(=)j(LEFT)f(|)g(RIGHT)g(|)h(NONASSOC)
556 1519 y(datatype)f(fixity)f(=)i(PREFIX)f(|)g(POSTFIX)g(|)g(INFIX)g
(of)h(associativity)457 1619 y(end)374 1743 y FD(From)20
b(these)i(de\002nitions,)e(the)h(possible)g(v)n(alues)g(of)g(type)g
Fr(fixity)f FD(are)h Fr(PREFIX)p FD(,)g Fr(POSTFIX)p
FD(,)f Fr(INFIX)49 b(LEFT)o FD(,)374 1843 y Fr(INFIX)f(RIGHT)p
FD(,)20 b(and)g Fr(INFIX)49 b(NONASSOC)n FD(.)457 1943
y(Ha)n(ving)24 b(pre\002x)g(and)h(post\002x)f(operators)g(means)g(that)
h(precedence)e(alone)h(no)h(longer)f(determines)f(the)i(correct)374
2042 y(parse,)d(because)g(the)h(order)f(of)h(tw)o(o)g(pre\002x)f(or)h
(of)g(tw)o(o)g(post\002x)f(operators)g(o)o(v)o(errides)f(precedence.)g
(F)o(or)h(e)o(xample,)374 2142 y(if)h Fr(++)h FD(and)f
Fr(*)h FD(are)g(pre\002x)f(operators)f(and)h Fr(p)h FD(is)g(an)g(atom,)
f(then)g(no)g(matter)g(what)h(the)f(precedences)f(of)i
Fr(++)f FD(and)g Fr(*)p FD(,)374 2242 y Fr(++*p)18 b
FD(and)f Fr(*++p)h FD(are)g(both)g(correct)f(and)g(unambiguous,)e(equi)
n(v)n(alent)i(to)h Fr(++\(*p\))g FD(and)f Fr(*\(++p\))p
FD(,)h(respecti)n(v)o(ely)-5 b(.)457 2341 y(In\002x)17
b(operators)f(of)h(arbitrary)f(arity)i(broaden)d(our)i(vie)n(w)h(of)f
(non-associati)n(v)o(e)e(operators.)h(F)o(or)h(e)o(xample,)f(in)i(both)
374 2441 y(ML)i(and)g(C,)g(the)h(follo)n(wing)d(three)i(e)o(xpressions)
f(are)h(all)h(le)o(gal,)e(b)n(ut)h(all)h(dif)n(ferent:)581
2607 y Fr(f)p Fu(\(\()p Fr(a)p Fw(;)30 b Fr(b)p Fu(\))p
Fw(;)g Fr(c)p Fu(\))19 b Fv(6)p Fu(=)f Fr(f)p Fu(\()p
Fr(a)p Fw(;)29 b Fr(b)p Fw(;)h Fr(c)p Fu(\))19 b Fv(6)p
Fu(=)f Fr(f)p Fu(\()p Fr(a)p Fw(;)29 b Fu(\()p Fr(b)p
Fw(;)h Fr(c)p Fu(\)\))374 2773 y FD(The)19 b(comma)h(operator)e(is)j
(an)f Fx(n)p FD(-ary)-5 b(,)19 b(in\002x,)g(non-associati)n(v)o(e)f
(operator)-5 b(.)457 2873 y(Operators)19 b(no)n(w)g(ha)n(v)o(e)h(a)h
(concrete)e(representation,)e(a)k(precedence,)d(and)h(a)i(\002xity)-5
b(.)374 2997 y Fv(h)p Fx(g)o(ener)o(al)19 b(types)p Fv(i\021)457
3097 y Fr(type)49 b(precedence)f(=)h(int)457 3196 y(type)g(rator)g(=)g
(Atom.atom)f(*)i(precedence)e(*)i(Assoc.fixity)374 3321
y FD(In)20 b(e)o(xpressions,)e(operators)h(may)h(be)g(unary)-5
b(,)18 b(binary)-5 b(,)18 b(or)i Fx(n)p FD(-ary)-5 b(.)374
3445 y Fv(h)p Fx(type)20 b(of)g(e)n(xpr)m(essions)p Fv(i\021)457
3545 y Fr(datatype)48 b(ast)h(=)h(ATOM)149 b(of)49 b(Atom.atom)1104
3645 y(|)h(UNARY)99 b(of)49 b(rator)g(*)g(ast)1104 3744
y(|)h(BINARY)f(of)g(ast)g(*)h(rator)f(*)g(ast)1104 3844
y(|)h(NARY)149 b(of)49 b(rator)g(*)g(ast)h(list)374 3968
y FD(List)27 b(types)f(are)g(b)n(uilt)g(in)g(to)h(ML.)f(T)-7
b(ype)25 b Fr('a)50 b(list)26 b FD(means)g(\223a)g(list)h(of)f(v)n
(alues)g(of)g(type)g Fr('a)p FD(,)-6 b(\224)26 b(for)f(an)o(y)h(type)g
Fr('a)p FD(.)374 4068 y(It)32 b(is)h(con)m(v)o(enient)d(to)i(treat)g
Fr(NARY\()p Fv(\010)p Fr(,)48 b([e]\))32 b FD(as)h(equi)n(v)n(alent)e
(to)h Fr(e)h FD(for)e(an)o(y)g Fv(\010)p FD(;)i Fr([e])f
FD(is)h(the)f(singleton)f(list)374 4168 y(containing)18
b Fr(e)p FD(.)457 4267 y(In)j(this)h(ne)n(w)g(implementation,)d(atomic)
i(components)f(of)h(e)o(xpressions)f(are)i(no)f(longer)g(limited)g(to)h
(strings,)f(b)n(ut)374 4367 y(may)30 b(be)h(an)o(y)f(v)n(alues)h(of)g
(an)o(y)f(type.)g(That)h(type)g(is)h(gi)n(v)o(en)d(the)j(name)e
Fr(Atom.atom)p FD(,)g(b)n(ut)h(it)g(is)h(not)f(otherwise)374
4467 y(speci\002ed.)e(The)g(user)g(of)h(the)f(unparser)f(can)i(pick)f
(an)o(y)g(con)m(v)o(enient)e(type,)h(e.g.,)h(prettyprinter)e(directi)n
(v)o(es.)i(The)374 4566 y(structure)19 b Fr(Atom)h FD(is)h(a)g
(parameter)d(to)j(the)f(unparser)e(module.)h(It)h(must)h(pro)o(vide)d
(the)i(follo)n(wing)f(types)h(and)f(v)n(alues:)374 4691
y Fv(h)p Fx(pr)l(operties)h(of)g(structur)m(e)h Fr(Atom)p
Fv(i)o(\021)457 4790 y Fr(type)49 b(atom)g(\(*)g(representation)e(of)j
(operator)e(or)i(atomic)e(expression)g(*\))457 4890 y(val)h
(parenthesize)e(:)j(atom)f(list)g(->)h(atom)374 5015
y FD(The)19 b(unparser)g(uses)i Fr(Atom.parenthesize)c
FD(to)k(parenthesize)d(a)j(list)g(of)f(atoms.)p eop
%%Page: 13 13
13 12 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(13)457 448 y FD(The)24
b(chunk)f Fv(h)p Fx(pr)l(operties)j(of)f(structur)m(e)g
Fr(Atom)p Fv(i)f FD(e)o(xploits)h(a)g(feature)f(of)g(the)h(Standard)f
(ML)g(modules)g(system;)374 548 y(in)d(a)h Fx(signatur)m(e)p
FD(,)e(we)i(can)f(name)g(types)g(and)g(v)n(alues)g(without)f(gi)n(ving)
g(their)h(de\002nitions.)g(The)g(unparser)f(module)g(is)374
648 y(parameterized)j(by)j(a)g(module)e(called)i Fr(Atom)p
FD(,)g(and)f(it)h(w)o(orks)g(with)g Fx(any)f Fr(Atom)h
FD(that)g(pro)o(vides)e(a)i(type)g Fr(atom)p FD(,)f(a)374
747 y(function)19 b Fr(parenthesize)p FD(,)g(and)h(the)h(other)f(v)n
(alues)h(listed)g(in)g Fv(h)p Fx(pr)l(operties)h(of)f(structur)m(e)g
Fr(Atom)p Fv(i)p FD(.)g(This)g(param-)374 847 y(eterization)e(mak)o(es)
h(the)g(unparser)f(general)g(and)g(easy)i(to)f(reuse.)457
946 y(T)-7 b(o)22 b(mak)o(e)h(this)g(general)e(capability)h(as)h
(useful)f(as)i(possible,)e(we)h(mak)o(e)f(it)h(possible)g(to)f(ha)n(v)o
(e)g(the)h(unparser)e(add)374 1046 y(\223decorations\224)d(to)i(list)h
(of)f(atoms.)g(W)-7 b(e)22 b(do)d(so)i(by)f(adding)e(another)h(kind)h
(of)f(e)o(xpression.)374 1171 y Fv(h)p Fx(type)h(of)g(e)n(xpr)m
(essions)p Fv(i)p Fu(+)p Fv(\021)1104 1270 y Fr(|)50
b(DECORATE)e(of)i(\(Atom.atom)e(list)h(->)g(Atom.atom\))f(*)i(ast)374
1395 y FD(The)16 b Fr(DECORATE)g FD(constructor)f(attaches)h(a)h
(\223decoration)e(function\224)g(to)i(an)f(e)o(xpression.)f(The)h
(decoration)f(function)374 1494 y(must)h(transform)f(a)i(list)h(of)e
(atoms)g(into)h(a)g(single)f(atom)g(in)h(a)g(w)o(ay)g(that)f(is)i
(indetectible)d(by)h(the)h(parser)-5 b(.)16 b(F)o(or)g(e)o(xample,)374
1594 y(a)g(decoration)f(function)f(might)i(add)g(v)n(alues)g(of)g(type)
g Fr(Atom.atom)f FD(that)i(indicate)f(changes)f(in)i(indentation,)d
(color)m(,)374 1694 y(or)20 b(font)f(of)h(the)g(unparsed)f(te)o(xt.)g
(These)h(v)n(alues)g(w)o(ould)g(appear)f(to)h(the)g(parser)g(as)h
(white)f(space.)457 1793 y(Finally)-5 b(,)21 b(the)g(user)h(of)f(the)h
(unparser)e(must)i(supply)f(minimum)f(and)h(maximum)f(precedences,)g
(which)h(are)h(used)374 1893 y(to)e(de\002ne)g(the)g(sentinels)g
Fr(minrator)f FD(and)h Fr(maxrator)p FD(.)374 2017 y
Fv(h)p Fx(pr)l(operties)g(of)g(structur)m(e)h Fr(Atom)p
Fv(i)o Fu(+)p Fv(\021)457 2117 y Fr(val)49 b(minprec)f(:)i(int)f(\(*)h
(precedence)e(below)h(that)g(of)g(any)g(operator)g(*\))457
2217 y(val)g(maxprec)f(:)i(int)f(\(*)h(precedence)e(above)h(that)g(of)g
(any)g(operator)g(*\))457 2316 y(val)g(bogus)g(:)g(atom)g(\(*)h(bogus)f
(atom)g(used)g(to)g(make)g(sentinel)g(operators)f(*\))374
2441 y FD(In)20 b(man)o(y)e(applications,)h Fr(minprec)h
FD(and)f Fr(maxprec)h FD(can)g(be)g(computed)e(automatically)-5
b(.)457 2540 y(The)19 b(datatype)g Fr(ast)h FD(and)f(the)h(structure)f
Fr(Atom)h FD(form)e(the)i(e)o(xternal)f(interf)o(aces)g(to)h(the)g
(unparser)-5 b(.)19 b(In)g(the)h(imple-)374 2640 y(mentation,)e(images)
i(are)f(more)h(general\227operators)c(and)k(atomic)f(terms)h(no)g
(longer)e(alternate,)h(b)n(ut)h(the)o(y)f(are)h(still)374
2740 y(properly)e(parenthesized:)506 2906 y Fx(ima)o(g)o(e)25
b Fv(\))841 2838 y Fs(\010)889 2906 y Ft(operator)1193
2835 y Fs(\014)1193 2885 y(\014)1241 2906 y Fx(le)n(xical-atom)1675
2835 y Fs(\014)1675 2885 y(\014)1724 2906 y Fx(decor)o(ated-ima)o(g)o
(e)2287 2838 y Fs(\011)506 3054 y Fx(le)n(xical-atom)f
Fv(\))h Ft(atom)1246 2983 y Fs(\014)1246 3033 y(\014)1294
3054 y Fr(\()c Fx(ima)o(g)o(e)f Fr(\))374 3237 y FD(The)f
(corresponding)e(ML)j(types)g(are:)374 3362 y Fv(h)p
Fx(g)o(ener)o(al)f(types)p Fv(i)p Fu(+)o Fv(\021)457
3461 y Fr(datatype)98 b(image)g(=)50 b(IMAGE)248 b(of)50
b(lexeme)e(list)457 3561 y(and)348 b(lexeme)48 b(=)i(RATOR)248
b(of)50 b(rator)1303 3660 y(|)g(EXP)348 b(of)50 b(lexical_atom)1303
3760 y(|)g(DECORATED)e(of)i(\(Atom.atom)e(list)h(->)g(Atom.atom\))f(*)i
(image)457 3860 y(and)f(lexical_atom)e(=)j(LEX_ATOM)98
b(of)50 b(Atom.atom)1303 3959 y(|)g(PARENS)198 b(of)50
b(image)374 4084 y FD(where)19 b Fr(lexeme)h FD(corresponds)e(to)1424
4017 y Fs(\000)1462 4084 y Ft(operator)1766 4013 y Fs(\014)1766
4063 y(\014)1814 4084 y Fx(le)n(xical-atom)2248 4013
y Fs(\014)2248 4063 y(\014)2297 4084 y Fx(decor)o(ated-ima)o(g)o(e)2860
4017 y Fs(\001)2894 4084 y FD(.)p eop
%%Page: 14 14
14 13 bop 374 266 a FG(14)1316 b Fz(NORMAN)19 b(RAMSEY)457
448 y FD(T)-7 b(ype)18 b Fr(image)h FD(is)h(internal;)f(the)g(unparser)
f(returns)g(a)h(list)i(of)e(atoms.)g(It)g(uses)h Fr(flatten)e
FD(to)i(con)m(v)o(ert)d(an)i Fr(image)374 548 y FD(into)h(such)f(a)i
(list.)g(It)g(uses)f Fr(Atom.parenthesize)e FD(for)h(parenthesization.)
374 682 y Fv(h)p Fx(g)o(ener)o(al)p Fv(i)o(\021)p 1919
610 1842 4 v 1919 992 4 382 v 1189 w Fo(image)357 b(:)45
b(image)89 b(->)44 b(Atom.atom)g(list)1944 773 y(lexeme)312
b(:)45 b(lexeme)f(->)g(Atom.atom)1944 865 y(lexical_atom)e(:)j
(lexical_atom)e(->)h(Atom.atom)1944 956 y(flatten)267
b(:)45 b(image)89 b(->)44 b(Atom.atom)g(list)p 3758 992
V 1919 995 1842 4 v 457 981 a Fr(local)556 1081 y(fun)50
b(image)e(\(IMAGE)h(l\))h(=)f(map)g(lexeme)g(l)556 1180
y(and)h(lexeme)e(\(RATOR)h(\(atom,)g(_,)g(_\)\))g(=)h(atom)656
1280 y(|)g(lexeme)e(\(EXP)h(a\))h(=)f(lexical_atom)f(a)656
1379 y(|)i(lexeme)e(\(DECORATED)g(\(f,)h(im\)\))g(=)h(f)g(\(image)e
(im\))556 1479 y(and)i(lexical_atom)d(\(LEX_ATOM)h(atom\))h(=)h(atom)
656 1579 y(|)g(lexical_atom)d(\(PARENS)i(im\))g(=)g(Atom.parenthesize)e
(\(image)i(im\))457 1678 y(in)556 1778 y(val)h(flatten)e(=)i(image)457
1878 y(end)374 1998 y FD(Each)28 b(local)h(function)e(computes)g(an)i
(atom)f(or)h(list)h(of)e(atoms)h(that)g(corresponds)d(to)j(a)g(v)n
(alue)f(of)h(one)f(type.)g(By)374 2097 y(programming)22
b(con)m(v)o(ention,)g(the)j(name)g(of)h(each)f(function)f(is)i(the)g
(name)f(of)g(the)g(type)g(it)i(operates)d(on.)h(Because)374
2197 y Fr(local)19 b FD(hides)h(these)h(functions,)d
Fr(flatten)i FD(is)h(the)f(only)f(name)h(visible)g(outside)g(this)h
(code)e(chunk.)374 2446 y Fq(P)o(ar)n(enthesizing)h(general)h(expr)n
(essions)457 2596 y FD(As)16 b(in)g(the)g(simpler)f(case,)h(de)n(v)o
(elopment)d(of)j(an)f(unparser)f(be)o(gins)h(with)h(the)g(in)m(v)n
(ariants)e(that)i(apply)f(to)h(an)g(abstract)374 2695
y(syntax)k(tree)h(produced)d(by)i(parsing)g(an)h(image)f(without)g
(parentheses.)g(There)g(are)g(no)n(w)h(three)f(cases)i(to)f(consider:)
374 2795 y(an)e(operator)g(may)g(be)h(the)g(left)g(child)g(of)f(a)i
(binary)d(in\002x)i(operator)m(,)e(the)i(right)f(child)h(of)f(a)i
(binary)d(in\002x)i(operator)m(,)e(or)374 2895 y(the)i(only)f(child)h
(of)g(a)h(unary)d(pre\002x)i(or)g(post\002x)f(operator)-5
b(.)1313 3023 y Fv(\010)1142 3468 y(\010)1207 3480 y
Fn(l)1282 3143 y Fp(\014)1253 3216 y(\014)1224 3288 y(\014)1195
3360 y(\014)p 1373 3062 4 4 v 1374 3065 V 1375 3067 V
1376 3070 V 1377 3073 V 1378 3076 V 1379 3079 V 1380
3081 V 1382 3084 V 1383 3087 V 1400 3131 V 1401 3133
V 1402 3136 V 1403 3139 V 1405 3142 V 1406 3145 V 1407
3147 V 1408 3150 V 1409 3153 V 1410 3156 V 1428 3199
V 1429 3202 V 1430 3205 V 1431 3208 V 1432 3211 V 1433
3213 V 1434 3216 V 1435 3219 V 1437 3222 V 1438 3224
V 1455 3268 V 1456 3271 V 1457 3274 V 1458 3276 V 1460
3279 V 1461 3282 V 1462 3285 V 1463 3288 V 1464 3290
V 1465 3293 V 1483 3337 V 1484 3340 V 1485 3342 V 1486
3345 V 1487 3348 V 1488 3351 V 1489 3354 V 1490 3356
V 1492 3359 V 1493 3362 V 1304 3587 a Fz(\(a\))2065 3023
y Fv(\010)2224 3468 y(\010)2289 3480 y Fn(r)2054 3587
y Fz(\(b\))p 2065 3062 V 2064 3065 V 2063 3067 V 2061
3070 V 2060 3073 V 2059 3076 V 2058 3079 V 2057 3081
V 2056 3084 V 2055 3087 V 2037 3131 V 2036 3133 V 2035
3136 V 2034 3139 V 2033 3142 V 2032 3145 V 2031 3147
V 2029 3150 V 2028 3153 V 2027 3156 V 2010 3199 V 2009
3202 V 2008 3205 V 2006 3208 V 2005 3211 V 2004 3213
V 2003 3216 V 2002 3219 V 2001 3222 V 2000 3224 V 1982
3268 V 1981 3271 V 1980 3274 V 1979 3276 V 1978 3279
V 1977 3282 V 1976 3285 V 1974 3288 V 1973 3290 V 1972
3293 V 1955 3337 V 1954 3340 V 1953 3342 V 1951 3345
V 1950 3348 V 1949 3351 V 1948 3354 V 1947 3356 V 1946
3359 V 1945 3362 V 2127 3143 a Fp(L)2156 3216 y(L)2185
3288 y(L)2214 3360 y(L)2817 3023 y Fv(\010)2817 3473
y(\010)2882 3443 y Fl(0)p 2847 3360 5 301 v 2808 3587
a Fz(\(c\))374 3689 y FD(As)16 b(before,)e(the)i(rules)f(for)g
(parenthesization)f(are)h(encapsulated)f(in)i(a)g Fr(noparens)f
FD(function.)f(Because)h(these)h(trees)374 3789 y(are)27
b(obtained)g(by)g(parsing)g(parenthesis-free)e(syntax,)i(in)h(case)g
(\(a\),)f Fr(noparens)p Fu(\()p Fv(\010)2928 3801 y Fn(l)2967
3789 y Fw(;)9 b Fv(\010)p Fw(;)g Fr(LEFT)p Fu(\))p FD(;)28
b(in)g(case)g(\(b\),)374 3889 y Fr(noparens)p Fu(\()p
Fv(\010)871 3901 y Fn(r)910 3889 y Fw(;)9 b Fv(\010)p
Fw(;)g Fr(RIGHT)p Fu(\))o FD(;)21 b(and)f(in)g(case)h(\(c\),)e
Fr(noparens)p Fu(\()p Fv(\010)2384 3858 y Fl(0)2403 3889
y Fw(;)9 b Fv(\010)p Fw(;)g Fr(NONASSOC)p Fu(\))o FD(.)374
4025 y Fv(h)p Fx(g)o(ener)o(al)p Fv(i)o Fu(+)o Fv(\021)p
1292 3953 2470 4 v 1292 4061 4 108 v 497 w Fo(noparens)43
b(:)i(rator)f(*)h(rator)f(*)g(Assoc.associativity)e(->)i(bool)p
3758 4061 V 1292 4064 2470 4 v 457 4151 a Fr(fun)49 b(noparens\(inner)e
(as)j(\(_,)f(pi,)g(fi\),)g(outer)g(as)g(\(_,)h(po,)f(fo\),)g(side\))g
(=)556 4251 y(pi)h(>)f(po)h(orelse)1393 b(\(*)50 b(\(a\),)f(\(b\),)g
(or)g(\(c\))h(*\))556 4350 y(case)f(\(fi,)g(side\))656
4450 y(of)g(\(POSTFIX,)248 b(LEFT\))98 b(=>)50 b(true)447
b(\(*)50 b(\(a\))f(*\))706 4550 y(|)g(\(PREFIX,)298 b(RIGHT\))48
b(=>)i(true)447 b(\(*)50 b(\(b\))f(*\))706 4649 y(|)g(\(INFIX)g(LEFT,)
99 b(LEFT\))f(=>)955 4749 y(pi)49 b(=)h(po)f(andalso)g(fo)g(=)h(INFIX)f
(LEFT)148 b(\(*)50 b(\(a\))f(*\))706 4848 y(|)g(\(INFIX)g(RIGHT,)g
(RIGHT\))f(=>)955 4948 y(pi)h(=)h(po)f(andalso)g(fo)g(=)h(INFIX)f
(RIGHT)98 b(\(*)50 b(\(b\))f(*\))706 5048 y(|)g(\(_,)548
b(NONASSOC\))48 b(=>)h(fi)h(=)f(fo)149 b(\(*)50 b(\(c\))f(*\))706
5147 y(|)g(_)h(=>)f(false)p eop
%%Page: 15 15
15 14 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(15)374 448 y FD(These)20
b(rules)g(can)g(be)g(understood)e(as)i(follo)n(ws:)498
604 y Fv(\017)41 b FD(If)20 b(the)g(inner)g(operator)e(has)j(higher)d
(precedence,)g(parentheses)h(are)h(not)g(needed.)498
704 y Fv(\017)41 b FD(If)20 b(a)f(post\002x)h(operator)d(appears)i(to)h
(the)f(left)h(of)f(an)h(in\002x)f(operator)f(\(a\),)h(it)h(al)o(w)o
(ays)g(applies)f(to)h(the)g(preceding)581 804 y(e)o(xpression,)c(and)i
(parentheses)f(are)h(not)g(needed.)f(Similarly)g(when)h(a)h(pre\002x)e
(operator)f(appears)i(to)g(the)g(right)581 903 y(of)i(an)g(in\002x)g
(operator)f(\(b\).)498 1003 y Fv(\017)41 b FD(In)32 b(case)g(\(a\),)f
(if)h Fv(\010)1151 1016 y Fi(l)1207 1003 y FD(has)g(lo)n(wer)f
(precedence)f(than)h Fv(\010)p FD(,)g(then)h(parentheses)e(are)i
(needed,)e(b)n(ut)i(if)f(the)h(tw)o(o)581 1102 y(ha)n(v)o(e)23
b(the)h(same)g(precedence,)e(then)i(parentheses)e(can)i(be)g(a)n(v)n
(oided,)f Fx(pr)l(o)o(vided)i FD(both)e(are)h(left-associati)n(v)o(e.)
581 1202 y(A)d(similar)f(ar)o(gument)e(applies)i(to)g(case)h(\(b\))f
(when)f(both)h(operators)e(are)i(right-associati)n(v)o(e.)498
1302 y Fv(\017)41 b FD(Finally)-5 b(,)22 b(in)g(case)g(\(c\),)g(if)h
(the)f(precedence)e(of)i Fv(\010)1994 1272 y Fl(0)2037
1302 y FD(is)h(not)f(greater)f(than)h(the)g(precedence)e(of)i
Fv(\010)p FD(,)g(then)g(paren-)581 1401 y(theses)30 b(can)g(be)g(a)n(v)
n(oided)f(if)h(and)f(only)g(if)h(both)f(operators)g(ha)n(v)o(e)g(the)h
(same)g(\002xity)-5 b(,)29 b(i.e.,)g(both)g(are)h(pre\002x)581
1501 y(operators)24 b(or)g(both)g(are)h(post\002x)g(operators.)e(This)i
(is)h(the)f(case)h(in)f(the)g(e)o(xample)e(of)i Fr(++*p)g
FD(used)f(to)h(intro-)581 1601 y(duce)20 b(this)g(section.)374
1756 y(These)15 b(rules)g(for)g(parenthesization,)e(as)j(embodied)e(in)
h(the)h Fr(noparens)e FD(predicate,)g(are)i(the)f(k)o(e)o(y)g(to)g
(understanding)374 1856 y(both)i(parsing)f(and)i(unparsing)e
(algorithms.)g(The)h Fr(noparens)g FD(function)f(is)j(used)f(in)g(an)f
(unparser)m(,)f(which)h(appears)374 1956 y(belo)n(w)-5
b(,)19 b(and)g(in)i(a)f(parser)m(,)f(which)h(appears)f(in)h(Appendix)f
(A.)457 2055 y(As)25 b(before,)e(the)i(unparser)e(needs)i(auxiliary)e
(functions)h(to)h(manipulate)e(images.)h(Because)h(an)g(image)f(is)i
(no)n(w)374 2155 y(simply)19 b(a)i(list)g(of)f(le)o(x)o(emes,)f(these)i
(functions)d(are)j(a)f(bit)h(simpler)-5 b(.)374 2291
y Fv(h)p Fx(g)o(ener)o(al)p Fv(i)o Fu(+)o Fv(\021)p 1695
2219 2066 4 v 1695 2692 4 474 v 900 w Fo(image)358 b(:)45
b(Atom.atom)e(->)i(image)1719 2382 y(parenthesize)e(:)i(image)f(->)g
(image)1719 2473 y(infixImage)133 b(:)45 b(image)f(*)h(rator)f(*)g
(image)g(->)h(image)1719 2565 y(prefixImage)88 b(:)404
b(rator)44 b(*)g(image)g(->)h(image)1719 2656 y(postfixImage)e(:)i
(image)f(*)h(rator)402 b(->)45 b(image)p 3758 2692 V
1695 2695 2066 4 v 457 2789 a Fr(fun)k(image)g(a)597
b(=)50 b(IMAGE)f([EXP)g(\(LEX_ATOM)f(a\)])457 2889 y(fun)h
(parenthesize)e(image)i(=)h(IMAGE)f([EXP)g(\(PARENS)f(image\)])457
2988 y(fun)h(infixImage)98 b(\(IMAGE)48 b(l,)i($,)f(IMAGE)g(r\))h(=)f
(IMAGE)g(\(l)g(@)h(RATOR)f($)h(::)f(r\))457 3088 y(fun)g(prefixImage)f
(\()448 b($,)49 b(IMAGE)g(r\))h(=)f(IMAGE)g(\()199 b(RATOR)49
b($)h(::)f(r\))457 3187 y(fun)g(postfixImage\(IMAGE)d(l,)k($)448
b(\))50 b(=)f(IMAGE)g(\(l)g(@)h(RATOR)f($)h(::)f([]\))374
3309 y FD(where)19 b Fr(@)p FD(,)h Fr(::)p FD(,)h(and)e
Fr([])i FD(are)f(list)h(append,)d(cons,)i(and)g(the)g(empty)f(list,)i
(which)f(are)g(all)h(prede\002ned)d(in)i(ML.)457 3409
y(W)-7 b(e)21 b(use)f(the)h(same)f Fr(bracket)f FD(to)i(parenthesize)d
(sub-e)o(xpressions.)374 3545 y Fv(h)p Fx(g)o(ener)o(al)p
Fv(i)o Fu(+)o Fv(\021)p 1157 3473 2604 4 v 1157 3581
4 108 v 362 w Fo(bracket)44 b(:)h(fragment)e(*)i(Assoc.associativity)d
(*)i(rator)g(->)h(image)p 3758 3581 V 1157 3584 2604
4 v 457 3671 a Fr(type)k(fragment)f(=)i(rator)f(*)g(image)457
3770 y(fun)g(bracket\(\(inner,)e(image\),)h(side,)h(outer\))g(=)556
3870 y(if)h(noparens\(inner,)d(outer,)h(side\))h(then)g(image)g(else)g
(parenthesize)f(image)457 3992 y FD(The)19 b(structure)h(of)g(the)g
(unparser)e(is)k(as)e(before:)374 4128 y Fv(h)p Fx(g)o(ener)o(al)p
Fv(i)o Fu(+)o Fv(\021)p 2323 4055 1438 4 v 2323 4163
4 108 v 1528 w Fo(unparse)44 b(:)g(ast)h(->)f(Atom.atom)f(list)p
3758 4163 V 2323 4166 1438 4 v 457 4251 a Fr(local)556
4350 y(val)50 b(maxrator)e(=)h(\(Atom.bogus,)f(Atom.maxprec,)f(INFIX)i
(NONASSOC\))556 4450 y(exception)f(Impossible)556 4550
y Fv(h)p Fx(function)19 b Fr(unparse')p Fx(,)g(to)i(map)e(an)h(e)n(xpr)
m(ession)g(to)h(a)f(fr)o(a)o(gment)q Fv(i)457 4649 y
Fr(in)556 4749 y(fun)50 b(unparse)e(e)i(=)656 4848 y(let)f(val)g(\($,)h
(im\))f(=)h(unparse')e(e)656 4948 y(in)99 b(flatten)49
b(im)656 5048 y(end)457 5147 y(end)p eop
%%Page: 16 16
16 15 bop 374 266 a FG(16)1316 b Fz(NORMAN)19 b(RAMSEY)457
448 y FD(The)d(unparsing)f(function)g(itself)i(has)g(ne)n(w)g(cases:)h
(the)e(unary)g(operator)m(,)e(the)j Fx(n)p FD(-ary)f(operator)m(,)e
(and)i(the)h(decorated)374 548 y(e)o(xpression.)h(The)i(unary)f
(operator)f(appears)h(before)g(or)h(after)g(its)h(operand,)d(depending)
g(on)h(its)j(\002xity)-5 b(.)374 686 y Fv(h)p Fx(function)19
b Fr(unparse')p Fx(,)g(to)h(map)g(an)g(e)n(xpr)m(ession)g(to)g(a)g(fr)o
(a)o(gment)q Fv(i\021)p 2547 614 1214 4 v 2547 722 4
108 v 164 w Fo(unparse')44 b(:)g(ast)h(->)f(fragment)p
3758 722 V 2547 725 1214 4 v 457 812 a Fr(fun)49 b(unparse')f(\(ATOM)h
(a\))h(=)f(\(maxrator,)f(image)h(a\))556 912 y(|)h(unparse')e
(\(BINARY\(l,)g($,)i(r\)\))f(=)756 1011 y(let)g(val)g(l')g(=)h(bracket)
f(\(unparse')f(l,)h(LEFT,)99 b($\))955 1111 y(val)49
b(r')g(=)h(bracket)f(\(unparse')f(r,)h(RIGHT,)g($\))756
1210 y(in)99 b(\($,)49 b(infixImage\(l',)e($,)j(r'\)\))756
1310 y(end)556 1410 y(|)g(unparse')e(\(UNARY\($,)g(e\)\))i(=)756
1509 y(let)f(val)g(e')g(=)h(bracket)f(\(unparse')f(e,)h(NONASSOC,)f
($\))955 1609 y(val)h(\(_,)g(_,)h(fixity\))e(=)i($)756
1709 y(in)99 b(\($,)49 b(case)g(fixity)g(of)g(PREFIX)99
b(=>)49 b(prefixImage)f(\($,)h(e'\))1802 1808 y(|)g(POSTFIX)g(=>)g
(postfixImage\(e',)e($\))1802 1908 y(|)i(INFIX)g(_)h(=>)f(raise)g
(Impossible\))756 2007 y(end)556 2107 y(|)h(unparse')e(\(NARY\(_,)h
([]\)\))198 b(=)50 b(raise)f(Impossible)556 2207 y(|)h(unparse')e
(\(NARY\($,)h([e]\)\))148 b(=)50 b(unparse')e(e)556 2306
y(|)i(unparse')e(\(NARY\($,)h(e::es\)\))f(=)756 2406
y(let)h(val)g(leftmost)f(=)i(bracket\(unparse')d(e,)i(LEFT,)g($\))955
2506 y(fun)g(addOne\(r,)f(leftPrefix\))g(=)1254 2605
y(infixImage\(leftPrefix,)d($,)1802 2705 y(bracket\(unparse')h(r,)k
(RIGHT,)f($\)\))756 2804 y(in)99 b(\($,)49 b(foldl)g(addOne)g(leftmost)
f(es\))756 2904 y(end)556 3004 y(|)i(unparse')e(\(DECORATE)g(\(f,)i
(e\)\))f(=)756 3103 y(let)g(val)g(\($,)g(im\))h(=)f(unparse')f(e)756
3203 y(in)99 b(\($,)49 b(IMAGE)g([DECORATED)f(\(f,)h(im\)]\))756
3303 y(end)374 3427 y FD(The)22 b(interesting)g(case)i(for)e(the)h
Fx(n)p FD(-ary)f(operator)f(is)j(co)o(v)o(ered)d(by)h(the)h(pattern)f
Fr(NARY\($,)49 b(e::es\))p FD(,)22 b(which)g(rep-)374
3527 y(resents)27 b(the)h(operator)d Fr($)j FD(applied)e(to)i(more)e
(than)h(one)g(operand.)e(The)i(code)g(inserts)h Fr($)f
FD(between)g(the)g(operands.)374 3626 y(The)e(\002rst)i(operand,)d
Fr(e)p FD(,)i(is)h(used)f(to)g(mak)o(e)f Fr(leftmost)p
FD(,)g(an)h(initial)h(\223left)f(pre\002x.)-6 b(\224)25
b(The)g Fr(addOne)h FD(function)e(e)o(x-)374 3726 y(tends)c(the)h(left)
g(pre\002x,)f(adding)f(operator)g(and)h(operand)f(on)h(the)h(right.)f
(The)h(b)n(uilt-in)f Fr(foldl)g FD(function)f(w)o(alks)i(the)374
3826 y(list)h Fr(es)p FD(,)f(using)f Fr(addOne)h FD(to)g(e)o(xtend)f
(the)h(left)g(pre\002x)g(with)g(the)g(remaining)e(operands.)h(Because)h
(both)f Fr(LEFT)h FD(and)374 3925 y Fr(RIGHT)28 b FD(are)h(used)g(in)g
(the)g(ar)o(guments)d(to)k Fr(bracket)p FD(,)d(operator)h(must)h(be)f
(non-associati)n(v)o(e)f(for)h(the)h(operands)374 4025
y(to)d(be)f(parenthesized)f(properly)-5 b(.)23 b(Of)j(course,)f(no)h
(other)f(associati)n(vity)g(mak)o(es)h(sense,)g(because)f(a)h(left-)g
(or)f(right-)374 4124 y(associati)n(v)o(e)f(operator)g(can)h(al)o(w)o
(ays)g(be)g(treated)g(as)h(an)f(in\002x)g(binary)f(operator)-5
b(.)23 b(The)i Fx(n)p FD(-ary)f(case)h(is)h(needed)e(only)374
4224 y(for)19 b(non-associati)n(v)o(e)f(operators.)1463
4473 y FG(5)t(.)96 b(U)t(S)t(I)t(N)t(G)29 b(T)t(H)t(E)g(U)t(N)t(P)l(A)t
(R)t(S)t(E)t(R)374 4623 y FD(Before)h(the)h(unparser)e(can)i(be)g
(used,)g(it)g(has)h(to)f(be)g(instantiated)f(with)h(a)h(suitable)f
Fr(Atom)f FD(module.)g(Once)g(the)374 4722 y(user)h(creates)g(an)g
Fr(Atom)f FD(module,)g(he)h(or)g(she)g(combines)f(it)i(with)f(the)g
(unparser')-5 b(s)30 b(implementation)f(to)i(create)374
4822 y Fr(Unparser)p FD(,)20 b(an)h(instance)g(of)g(the)g(unparser)f
(that)h(is)h(specialized)f(to)g(that)h(particular)d Fr(Atom)p
FD(.)i(This)h(instance)f(pro-)374 4922 y(vides)d(the)g(datatype)f
Fr(ast)p FD(,)g(with)i(its)g(contructors)d Fr(ATOM)p
FD(,)i Fr(UNARY)p FD(,)f(etc.)h(It)h(also)f(pro)o(vides)e(an)i
(unparsing)e(function.)374 5046 y Fv(h)p Fx(values)k(e)n(xported)f(by)h
(the)h(unpar)o(ser)r Fv(i)o(\021)457 5146 y Fr(val)49
b(unparse)f(:)i(ast)f(->)h(Atom.atom)e(list)p eop
%%Page: 17 17
17 16 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(17)457 448 y FD(Once)23
b(the)h(unparser)e(is)j(instantiated,)e(it)i(can)e(be)h(used)g(in)g(a)g
(real)g(tool,)f(where)g(unparsing)f(is)j(usually)e(one)g(of)h(a)374
548 y(series)c(of)f(transformations.)e(In)i(a)h(typical)f(application)e
(generator)m(,)g(a)j(program)d(being)i(generated)f(passes)i(through)374
648 y(se)n(v)o(eral)f(representations:)498 793 y Fv(\017)41
b FD(an)20 b(application-speci\002c)e(internal)i(representation,)498
893 y Fv(\017)41 b FD(an)20 b(unparsing)e(tree)j(of)f(type)f
Fr(Unparser.ast)p FD(,)498 993 y Fv(\017)41 b FD(a)19
b(list)h(of)e(atoms)g(of)g(type)g Fr(Atom.atom)48 b(list)p
FD(,)18 b(which)g(typically)g(includes)g(prettyprinting)d(directi)n(v)o
(es)j(as)581 1092 y(well)j(as)g(te)o(xt,)f(and)498 1192
y Fv(\017)41 b FD(the)20 b(\002nal)h(program,)d(represented)g(as)j
(nicely)e(indented)g(te)o(xt)h(in)h(the)f(tar)o(get)f(language.)374
1338 y(This)31 b(section)g(discusses)h(transformation)d(from)h(an)h
(internal)g(representation)e(into)i(an)h(unparsing)d(tree,)i(using)374
1437 y(e)o(xamples)25 b(from)g(the)i(Ne)n(w)f(Jerse)o(y)h(Machine-Code)
d(T)-7 b(oolkit.)2225 1407 y FM(15)2313 1437 y FD(The)26
b(\002rst)h(part)f(of)g(this)h(paper)f(discusses)h(trans-)374
1537 y(formation)i(from)h(an)h(unparsing)e(tree)i(to)h(a)f(list)h(of)f
(atoms.)g(References)g(1)g(and)f(2)i(discuss)f(transformation)e(of)374
1636 y(prettyprinting)17 b(directi)n(v)o(es)i(to)i(indented)d(te)o(xt.)
457 1736 y(A)g(preliminary)d(step)j(in)g(creating)e(unparsing)g(trees)i
(is)g(assigning)f(precedence)e(and)i(associati)n(vity)h(to)f(the)h
(opera-)374 1836 y(tors)h(of)g(the)g(tar)o(get)g(language.)e(This)i
(can)g(be)h(done)e(easily)h(and)g(reliably)f(by)h(putting)f(operators)g
(in)i(a)f(data)g(structure)374 1935 y(that)j(indicates)g(precedence)e
(implicitly)h(and)h(\002xity)g(\(which)f(includes)g(associati)n(vity\))
g(e)o(xplicitly)-5 b(.)21 b(A)h(fragment)f(of)374 2035
y(the)f(structure)f(used)h(for)g(C)h(is)623 2150 y Fr(.)623
2183 y(.)623 2216 y(.)473 2316 y(\(L,)49 b([">>",)g("<<"]\),)473
2415 y(\(L,)g(["+",)g("-"]\),)473 2515 y(\(L,)g(["\045",)g("/",)g
("*"]\),)623 2592 y(.)623 2625 y(.)623 2658 y(.)374 2804
y FD(where)20 b Fr(L)h FD(is)h(an)e(abbre)n(viation)f(for)h
Fr(Assoc.INFIX)48 b(Assoc.LEFT)p FD(,)19 b(\223in\002x)h(left\224)h
(being)f(one)g(of)h(the)f(\002)n(v)o(e)h(pos-)374 2904
y(sible)i(\002xities.)g(Precedence)e(increases)h(as)i(we)f(mo)o(v)o(e)e
(do)n(wn)h(the)g(structure.)g(This)h(data)f(structure)g(is)i
(transformed)374 3003 y(into)19 b(functions)f Fr(Cprec)h
FD(and)f Fr(Cfixity)h FD(that)h(return)e(the)h(precedence)e(and)i
(\002xity)g(of)h(gi)n(v)o(en)e(operators.)f(It)j(is)g(also)374
3103 y(used)g(to)g(compute)f(the)h(v)n(alues)g(of)f Fr(minprec)h
FD(and)g Fr(maxprec)p FD(,)f(which)g(are)i(needed)d(to)j(create)f(an)g
(unparser)-5 b(.)457 3203 y(Supplying)18 b Fr(minprec)i
FD(and)h Fr(maxprec)f FD(to)h(the)g(unparser)e(may)h(seem)h(a)o(wkw)o
(ard.)e(One)i(could)f(supply)g(instead)374 3302 y(a)d(list)h(of)e(all)i
(operators)d(to)i(be)g(used,)f(letting)h(the)f(unparser)g(compute)f
Fr(minprec)h FD(and)g Fr(maxprec)p FD(.)g(This)h(technique)374
3402 y(seems)22 b(unnecessarily)f(restricti)n(v)o(e;)h(it)h(w)o(ould)e
(limit)i(the)f(unparser)f(not)h(only)f(to)i(a)g(single)f(kind)f(of)h
(atom,)g(b)n(ut)g(also)374 3501 y(to)17 b(a)h(single)g(set)g(of)f
(operators.)f(As)i(written,)f(one)g(unparser)f(can)h(be)h(\(and)e(is\))
i(used)g(to)f(emit)h(code)f(in)h(dif)n(ferent)d(tar)o(get)374
3601 y(languages,)j(using)i(dif)n(ferent)e(operator)h(sets.)457
3701 y(Another)25 b(w)o(ay)i(to)g(eliminate)f Fr(minprec)g
FD(and)h Fr(maxprec)f FD(w)o(ould)g(be)h(to)g(use)g(a)g(dif)n(ferent)e
(representation)g(of)374 3800 y(precedence)c(inside)j(the)g(unparser)m
(,)d(e.g.,)i(to)h(represent)f(precedence)e(by)j(an)f(ML)h(datatype)f
(that)h(included)e(v)n(alues)374 3900 y Fu(+)p Fy(\245)k
FD(and)g Fv(\000)p Fy(\245)g FD(in)h(addition)e(to)h(all)h(the)f(inte)o
(gers.)f(In)h(a)h(production)d(en)m(vironment,)e(eliminating)k
Fr(minprec)f FD(and)374 4000 y Fr(maxprec)19 b FD(from)h(the)h(interf)o
(ace)e(w)o(ould)h(justify)h(a)g(more)e(comple)o(x)g(implementation.)f
(F)o(or)j(e)o(xpository)d(purposes,)374 4099 y(ho)n(we)n(v)o(er)m(,)h
(another)i(user)n(-de\002ned)g(datatype)g(and)h(special)g(comparison)e
(functions)h(w)o(ould)h(distract)g(readers)g(from)374
4199 y(the)e(e)o(xplanation)e(of)i(unparsing.)457 4298
y(The)d(\002xities)i(of)e(operators)g(can)h(be)f(surprising.)g(F)o(or)g
(e)o(xample,)g(the)h(C)g(operators)f Fr(.)h FD(and)g
Fr(->)p FD(,)f(which)h(are)g(used)f(to)374 4398 y(select)h(members)f
(from)g(structures)g(and)g(unions,)g(are)g(super\002cially)g(binary)g
(in\002x)h(operators,)e(b)n(ut)h(their)h(right-hand)374
4498 y(\223ar)o(guments\224)e(are)j(not)f(e)o(xpressions)f(b)n(ut)i
(identi\002ers,)f(and)g(semantically)g(the)o(y)g(are)h(unary)e
(operators.)g(The)h(T)-7 b(oolkit)374 4597 y(in)21 b(f)o(act)g(treats)h
(them)f(as)g(unary)f(post\002x)h(operators,)e(choosing)h(their)h
(representations)e(dynamically)g(according)g(to)374 4697
y(what)f(member)f(is)i(being)e(selected.)h(F)o(or)g(e)o(xample,)e(to)j
(create)f(an)g(unparsing)e(tree)i(corresponding)d(to)k(the)f(selection)
374 4797 y(of)i(member)e Fr(tag)j FD(from)e(structure)g
Fr(e)p FD(,)h(it)h(uses)g(the)f(function)374 4925 y Fv(h)p
Fx(tr)m(ee-cr)m(eation)f(functions)p Fv(i)o(\021)p 1785
4852 1976 4 v 1785 4960 4 108 v 553 w Fo(dot)44 b(:)h(Unparser.ast)e(*)
i(string)e(->)i(Unparser.ast)p 3758 4960 V 1785 4963
1976 4 v 457 5048 a Fr(fun)k(dot)g(\(e,)g(tag\))g(=)556
5147 y(Unparser.UNARY\(\(pptext)d(\(".")j(\210)h(tag\),)f(Cprec)f(".",)
h(Assoc.POSTFIX\),)e(e\))p eop
%%Page: 18 18
18 17 bop 374 266 a FG(18)1316 b Fz(NORMAN)19 b(RAMSEY)374
448 y FD(Here)g(the)g(ML)h Fr(\210)g FD(operator)d(is)k(string)e
(concatenation.)d(The)j Fr(pptext)g FD(function)f(tak)o(es)i(a)g
(string)f(and)g(con)m(v)o(erts)e(it)j(to)374 548 y(an)g
Fr(Atom.atom)p FD(,)f(making)f(it)j(intelligible)f(to)g(the)g
(prettyprinter)-5 b(.)457 648 y(Handling)19 b(mix\002x)h(operators)g
(may)g(in)m(v)n(olv)o(e)f(unparsing)g(some)i(trees)g(during)e(the)i
(construction)e(of)h(other)g(trees.)374 747 y(F)o(or)27
b(e)o(xample,)g(to)h(translate)g(an)h(array-inde)o(xing)24
b(e)o(xpression)i(into)i(C,)h(one)f(must)g(put)g(the)g(subscript)g(in)g
(square)374 847 y(brack)o(ets.)20 b(The)h(subscript)g(is)i(unparsed)d
(independently)e(and)j(turned)f(into)i(an)f(atom)g(by)g(applying)f
Fr(pplist)p FD(.)h(It)h(is)374 946 y(then)g(wrapped)f(in)i(square)f
(brack)o(ets,)g(and)g(the)h(inde)o(xing)e(operation)g(itself)i(is)h
(represented)d(by)h(the)h(empty)f(string,)374 1046 y(b)n(ut)17
b(with)g(proper)f(precedence)f(and)i(associati)n(vity)-5
b(,)16 b(which,)h(for)g(e)o(xample,)e(enable)i(the)g(unparser)f(to)i
(produce)d(either)374 1146 y Fr(*p[n])26 b FD(or)g Fr(\(*p\)[n])f
FD(as)i(required.)e(A)i(similar)f(trick)g(is)i(used)e(to)g(unparse)f
(function)g(calls)i(after)f(applying)f(an)374 1245 y
Fx(n)p FD(-ary)19 b(comma)g(operator)f(to)i(the)h(ar)o(guments.)374
1370 y Fv(h)p Fx(tr)m(ee-cr)m(eation)e(functions)p Fv(i)o
Fu(+)o Fv(\021)p 1247 1414 2514 4 v 1247 1522 4 108 v
1271 1486 a Fo(subscript)43 b(:)i(Unparser.ast)e(*)i(Unparser.ast)d(->)
j(Unparser.ast)p 3758 1522 V 1247 1525 2514 4 v 457 1612
a Fr(fun)k(subscript\(array,)e(index\))h(=)756 1711 y(let)h(val)g
(index)g(=)h(pplist)e(\(Unparser.unparse)f(index\))955
1811 y(val)i(index)g(=)h(pplist)e([pptext)h("[",)g(index,)f(pptext)h
("]"])756 1911 y(in)99 b(Unparser.BINARY)47 b(\()i(array)1752
2010 y(,)g(\(pptext)g("",)g(Cprec)g("subscript",)f(L\))1752
2110 y(,)h(Unparser.ATOM)f(index)1752 2209 y(\))756 2309
y(end)374 2434 y(pplist)19 b FD(concatenates)g(atoms;)h(it)h(is)g(also)
g(used)f(to)g(de\002ne)g Fr(Atom.parenthesize)p FD(:)374
2600 y Fr(fun)49 b(parenthesize)e(l)j(=)g(pplist)e([pptext)h("\(",)g
(pplist)g(l,)g(pptext)g("\)"])1423 2849 y FG(6)t(.)96
b(U)t(S)t(E)28 b(A)t(N)t(D)h(A)-8 b(V)g(A)t(I)t(L)t(A)t(B)t(I)t(L)t(I)t
(T)t(Y)374 2998 y FD(The)22 b(unparser)g(described)g(in)h(this)h(paper)
e(is)i(used)f(in)g(tw)o(o)g(application)f(generators.)2870
2968 y FM(6,)12 b(15)3011 2998 y FD(Because)24 b(the)f(paper)f(is)i(a)
374 3098 y(literate)19 b(program,)f(the)i(code)f(used)g(in)h(the)g
(generators)e(is)j(e)o(xtracted)d(directly)h(from)f(the)i(source)f(te)o
(xt)h(of)f(the)h(paper)m(,)374 3197 y(and)d(it)i(is)g(a)n(v)n(ailable)f
(from)f(the)h(author')-5 b(s)18 b(W)-7 b(eb)19 b(site,)f
Fr(http://www.cs.virginia.edu/\230nr)p FD(.)13 b(Practition-)374
3297 y(ers)k(who)h(can')o(t)e(use)i(this)g(code)f(directly)f(can)i(b)n
(uild)f(unparsers)f(by)h(implementing)f(the)h Fr(noparens)g
FD(predicate)f(and)374 3397 y(writing)j Fr(unparse)h
FD(as)h(a)f(bottom-up)e(tree)i(w)o(alk.)g(Appendix)f(A)h(of)g(this)h
(paper)e(presents)h(the)g(in)m(v)o(erse)f(of)h(the)g(gen-)374
3496 y(eral)g(unparser)m(,)e(i.e.,)i(a)h(parser)e(that)i(handles)e
(pre\002x)h(and)f(post\002x)h(as)h(well)g(as)g(in\002x)f(operators,)f
(all)h(of)g(dynamically)374 3596 y(chosen)f(precedence)f(and)i
(associati)n(vity)-5 b(.)19 b(This)h(parser)m(,)f(which)h(is)h(used)f
(in)g(one)g(of)f(the)i(application)d(generators,)h(is)374
3696 y(also)h(a)n(v)n(ailable)g(online.)f(Appendix)f(B)j(presents)f
(the)g(full)g(proof)f(of)h(correctness)f(of)h(the)g(simple)g(unparser)
-5 b(.)1526 3945 y FG(AC)t(K)t(N)t(O)q(W)t(L)t(E)t(D)t(G)t(E)t(M)5
b(E)t(N)g(T)t(S)457 4094 y FD(This)19 b(w)o(ork)f(w)o(as)h(supported)e
(in)i(part)f(by)g(NSF)i(grant)e(ASC-9612756)e(and)i(by)g(the)h(US)g
(Department)e(of)i(Defense)374 4194 y(under)28 b(contract)g(MD)m
(A904-97-C-0247)c(and)29 b(D)m(ARP)-8 b(A)30 b(order)e(number)g(E381.)g
(The)h(vie)n(ws)g(e)o(xpressed)f(are)i(my)374 4293 y(o)n(wn)19
b(and)h(should)f(not)h(be)g(tak)o(en)g(to)g(be)g(those)g(of)g(the)g
(DoD.)457 4393 y(I)g(thank)f(Referee)h(A)h(for)e(demanding)f(impro)o(v)
o(ements)f(in)k(presentation.)790 4742 y FG(A)t(P)t(P)t(E)t(N)t(D)t(I)t
(X)t(:)31 b(A)t(.)97 b(A)27 b(P)l(A)t(R)t(S)t(E)t(R)i(F)t(O)t(R)f(G)t
(E)t(N)t(E)t(R)t(A)t(L)i(E)t(X)t(P)t(R)t(E)t(S)t(S)t(I)t(O)t(N)t(S)374
4891 y FD(The)19 b(parser)g(sho)n(wn)f(here)h(is)i(the)e(in)m(v)o(erse)
f(of)h(the)h(unparser)e(in)h(the)h(body)e(of)h(the)h(paper)-5
b(.)18 b(It)i(handles)f(pre\002x,)f(post\002x,)374 4991
y(and)k(in\002x)g(operators.)f(It)i(also)g(supports)f(concrete)f
(syntax)h(in)h(which)f(concatenation)e(of)j(tw)o(o)f(e)o(xpressions)g
(signi-)374 5090 y(\002es)j(the)g(application)e(of)h(a)h
(\223juxtaposition\224)d(operator)h(to)i(the)f(tw)o(o)h(e)o
(xpressions.)e(Lik)o(e)h(other)g(binary)f(operators,)p
eop
%%Page: 19 19
19 18 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(19)374 448 y FD(juxtaposition)26
b(has)i(precedence)e(and)h(associati)n(vity)-5 b(.)27
b(F)o(or)h(e)o(xample,)e(in)j(Standard)d(ML,)i(juxtaposition)e(denotes)
374 548 y(function)d(application,)h(it)i(associates)g(to)g(the)g(left,)
f(and)g(it)h(has)g(a)g(precedence)d(higher)i(than)g(that)g(of)g(an)o(y)
g(e)o(xplicit)374 648 y(in\002x)19 b(operator)-5 b(.)841
617 y FM(4)892 648 y FD(In)19 b(a)o(wk,)g(juxtaposition)f(denotes)h
(string)g(concatenation,)e(and)i(it)h(has)g(a)g(precedence)e(higher)g
(than)374 747 y(the)i(comparison)e(operators)h(b)n(ut)h(lo)n(wer)g
(than)f(the)h(arithmetic)g(operators.)2542 717 y FM(16)457
847 y FD(The)30 b(parser)h(handles)f(juxtaposition)f(by)i(inserting)f
(an)h(implicit)g(\223juxtaposition)e(operator\224)g(whene)n(v)o(er)g
(tw)o(o)374 946 y(e)o(xpressions)c(are)j(juxtaposed)d(in)i(the)h
(input.)e(\(The)g(unparser)g(handles)g(juxtaposition)g(by)g(using)h(a)h
(binary)e(in\002x)374 1046 y(operator)17 b(whose)i(representation)e(is)
j(white)f(space.\))g(The)f(user)h(supplies)g(a)h(speci\002cation)e(of)h
(this)h(operator)d(as)j(part)374 1146 y(of)f(the)h(structure)g
Fr(Atom)p FD(.)f(The)h(speci\002cation)f(includes)g(an)h(associati)n
(vity)-5 b(,)19 b(not)h(a)h(\002xity)-5 b(,)19 b(because)g
(juxtaposition)g(is)374 1245 y(in\002x)h(by)f(de\002nition.)374
1370 y Fv(h)p Fx(pr)l(operties)h(of)g(structur)m(e)h
Fr(Atom)p Fv(i)o Fu(+)p Fv(\021)457 1469 y Fr(val)49
b(juxtapositionSpec)e(:)i(atom)g(*)h(int)f(*)h(Assoc.associativity)374
1594 y FD(Internally)-5 b(,)17 b(the)k(parser)e(con)m(v)o(erts)g(this)h
(speci\002cation)g(into)g(an)g(in\002x)g(operator)-5
b(.)374 1719 y Fv(h)p Fx(g)o(ener)o(al)19 b(par)o(ser)r
Fv(i\021)457 1818 y Fr(local)556 1918 y(val)50 b(\(rep,)e(prec,)h
(assoc\))g(=)h(Atom.juxtapositionSpec)457 2017 y(in)556
2117 y(val)g(juxtarator)d(=)j(\(rep,)f(prec,)g(Assoc.INFIX)f(assoc\))
457 2217 y(end)457 2341 y FD(The)19 b(parser')-5 b(s)20
b(main)g(data)g(structure)g(is)h(a)f(stack)h(of)f(operators)e(and)i(e)o
(xpressions)f(satisfying)g(these)i(in)m(v)n(ariants:)477
2507 y(1.)41 b(No)20 b(post\002x)g(operator)f(appears)g(on)h(the)g
(stack.)477 2640 y(2.)41 b(If)20 b(a)h(binary)e(operator)f(is)j(on)f
(the)g(stack,)g(its)i(left)e(ar)o(gument)e(is)j(belo)n(w)e(it.)477
2773 y(3.)41 b(An)21 b(e)o(xpression)e(on)h(the)h(stack)g(is)g
(preceded)e(by)i(a)g(list)g(of)g(pre\002x)f(operators,)f(then)h(either)
g(an)h(in\002x)f(operator)581 2873 y(or)g(the)g(bottom)f(of)h(the)g
(stack.)374 3039 y(These)j(in)m(v)n(ariants)g(are)h(only)f(partially)h
(enforced)e(by)h(the)h(type)g(system.)g(All)h(operators)d(ha)n(v)o(e)i
(the)g(same)g(type,)f(so)374 3138 y Fr(prefixop)c FD(and)g
Fr(infixop)h FD(are)g(only)f(hints.)374 3263 y Fv(h)p
Fx(g)o(ener)o(al)g(par)o(ser)r Fv(i)p Fu(+)p Fv(\021)457
3362 y Fr(type)49 b(infixop)148 b(=)49 b(rator)457 3462
y(type)g(prefixop)98 b(=)49 b(rator)457 3562 y(datatype)f(stack)h(=)g
(BOT)1204 3661 y(|)g(BIN)h(of)f(stack)g(*)h(prefixop)e(list)h(*)h(ast)f
(*)h(infixop)457 3761 y(type)f(stack_top)f(=)h(\(prefixop)g(list)g(*)g
(ast\))374 3885 y FD(The)19 b(sentinel)h(operator)f Fr(minrator)g
FD(appears)g(on)h(the)g(bottom)f(of)h(the)h(stack:)374
4024 y Fv(h)p Fx(g)o(ener)o(al)e(par)o(ser)r Fv(i)p Fu(+)p
Fv(\021)p 2682 3952 1080 4 v 2682 4059 4 108 v 1648 w
Fo(srator)44 b(:)g(stack)g(->)h(rator)p 3758 4059 V 2682
4062 1080 4 v 457 4149 a Fr(val)k(minrator)f(=)i(\(Atom.bogus,)d
(Atom.minprec,)h(INFIX)h(NONASSOC\))457 4249 y(fun)g(srator)98
b(\(BIN)49 b(\(_,)h(_,)f(_,)h($\)\))f(=)g($)556 4349
y(|)h(srator)98 b(BOT)50 b(=)f(minrator)p eop
%%Page: 20 20
20 19 bop 374 266 a FG(20)1316 b Fz(NORMAN)19 b(RAMSEY)457
448 y FD(The)g(parser')-5 b(s)20 b(input)g(looks)g(something)e(lik)o(e)
j(this:)506 614 y Fx(ima)o(g)o(e)k Fv(\))841 547 y Fs(\010)889
614 y Ft(pre\002x)1090 547 y Fs(\011)1137 614 y Fx(le)n(xical-atom)1552
547 y Fs(\010)1599 614 y Ft(post\002x)1832 547 y Fs(\011)20
b(\010)q(\002)1983 614 y Ft(in\002x)2142 547 y Fs(\003)g(\010)2246
614 y Ft(pre\002x)2447 547 y Fs(\011)2494 614 y Fx(le)n(xical-atom)2909
547 y Fs(\010)2956 614 y Ft(post\002x)3189 547 y Fs(\011)o(\011)457
780 y FD(In)26 b(parsing,)f(we)h(assume)h(that)f(we)h(can)f
(distinguish)f(pre\002x,)g(post\002x,)h(and)g(in\002x)g(operators.)e
(If)i(juxtaposition)374 880 y(is)f(forbidden,)c(these)j(restrictions)f
(can)h(be)g(relax)o(ed)f(some)n(what;)g(it)h(is)h(then)f(suf)n
(\002cient)f(to)i(be)e(able)h(to)g(distinguish)374 980
y(post\002x)30 b(from)f(in\002x)i(operators.)d(The)j(adjustments)e
(needed)h(are)g(left)h(as)g(an)g(e)o(x)o(ercise.)e Fr(isPrefix)g
FD(identi\002es)374 1079 y(pre\002x)19 b(operators.)374
1218 y Fv(h)p Fx(g)o(ener)o(al)g(par)o(ser)r Fv(i)p Fu(+)p
Fv(\021)p 2637 1145 1125 4 v 2637 1253 4 108 v 1603 w
Fo(isPrefix)43 b(:)i(rator)f(->)g(bool)p 3758 1253 V
2637 1256 1125 4 v 457 1343 a Fr(fun)49 b(isPrefix)f(\(_,)h(_,)h(f\))f
(=)h(f)g(=)f(PREFIX)457 1468 y FD(The)23 b(parser)g(uses)h(tw)o(o)g
(functions,)f Fr(parsePrefix)f FD(and)h Fr(parsePostfix)p
FD(,)f(depending)f(on)i(whether)g(it)i(is)374 1567 y(scanning)18
b(before)h(or)h(after)g(an)g(atomic)g(input.)f(The)h(o)o(v)o(erall)f
(structure)g(of)h(the)g(parser)g(is)374 1706 y Fv(h)p
Fx(g)o(ener)o(al)f(par)o(ser)r Fv(i)p Fu(+)p Fv(\021)p
2816 1634 945 4 v 2816 1741 4 108 v 1782 w Fo(parse)44
b(:)h(image)f(->)g(ast)p 3758 1741 V 2816 1744 945 4
v 457 1831 a Fr(exception)k(ParseError)g(of)h(string)g(*)g(rator)g
(list)457 1931 y(local)556 2031 y(exception)f(Impossible)556
2130 y Fv(h)p Fx(g)o(ener)o(al)20 b(par)o(sing)f(functions)p
Fv(i)457 2230 y Fr(in)556 2330 y(val)50 b(parse)e(=)i(parse)457
2429 y(end)374 2554 y FD(There)30 b(are)h(man)o(y)f(cases.)i
Fr(parsePrefix)e FD(maintains)h(a)g(list)i(of)e(pre\002x)f(operators,)g
(which)h(is)h(sa)n(v)o(es)g(until)f(it)374 2653 y(reaches)24
b(an)h(atomic)f(input.)g(It)h(is)h(not)e(safe)h(to)g(reduce)f(the)h
(pre\002x)f(operators,)f(because)h(the)h(atomic)f(input)g(might)374
2753 y(be)k(follo)n(wed)e(by)i(a)g(post\002x)g(operator)e(of)i(higher)f
(precedence.)f(If)i Fr(parsePrefix)e FD(encounters)h(a)h(non-pre\002x)
374 2853 y(operator)22 b(or)i(end)f(of)h(\002le,)g(the)g(input)f(is)i
(not)f(correct.)f(When)h Fr(parsePrefix)e FD(encounters)g(an)i(atomic)g
(input,)f(it)374 2952 y(passes)d(the)h(input)e(and)h(the)g(sa)n(v)o(ed)
g(pre\002x)o(es)f(to)i Fr(parsePostfix)p FD(.)374 3077
y Fv(h)p Fx(g)o(ener)o(al)e(par)o(sing)h(functions)p
Fv(i)n(\021)p 1202 3121 2559 4 v 1202 3229 4 108 v 1226
3193 a Fo(parsePrefix)43 b(:)i(stack)f(*)h(prefixop)e(list)h(*)h
(lexeme)f(list)g(->)g(ast)p 3758 3229 V 1202 3232 2559
4 v 457 3319 a Fr(fun)49 b(parsePrefix\(stack,)d(prefixes,)i(RATOR)h($)
h(::)f(ipts'\))g(=)756 3418 y(if)g(isPrefix)f($)i(then)855
3518 y(parsePrefix\(stack,)d($)i(::)h(prefixes,)e(ipts'\))756
3617 y(else)855 3717 y(raise)h(ParseError\("\045s)e(is)j(not)f(a)h
(prefix)e(operator",)g([$]\))556 3817 y(|)i(parsePrefix\(_,)d(_,)j
([]\))f(=)756 3916 y(raise)f(ParseError)g(\("premature)g(end)h(of)h
(expression",)d([]\))556 4016 y(|)j(parsePrefix\(stack,)c(prefixes,)i
(EXP)i(a)f(::)h(ipts'\))e(=)756 4116 y(parsePostfix\(stack,)e
(\(parseAtom)i(a,)h(prefixes\),)f(ipts'\))556 4215 y(|)i
(parsePrefix\(stack,)c(prefixes,)i(DECORATED)h(\(_,)g(IMAGE)g(l\))g(::)
h(ipts'\))e(=)756 4315 y(parsePrefix\(stack,)e(prefixes,)i(l)i(@)f
(ipts'\))374 4439 y FD(If)20 b(it)h(encounters)d(decorated)g(le)o(x)o
(emes,)i Fr(parsePrefix)e FD(ignores)h(the)i(decoration.)p
eop
%%Page: 21 21
21 20 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(21)457 448 y FD(In)28
b(addition)g(to)g(the)h(stack)g(and)f(the)h(input,)f
Fr(parsePostfix)f FD(maintains)h(a)h(current)f(e)o(xpression)f
Fr(e)p FD(,)i(and)f(a)374 548 y(list)h Fr(prefixes)e
FD(containing)f(unreduced)g(pre\002x)h(operators)g(that)h(immediately)f
(precede)f Fr(e)p FD(.)j(The)e(idea)h(is)h(that)374 648
y(operators)18 b(arri)n(ving)h(in)h(the)h(input)e(must)i(be)f(tested)g
(either)g(against)g(the)g(nearest)g(unreduced)e(pre\002x)h(operator)m
(,)f(or)i(if)374 747 y(there)j(are)h(no)f(unreduced)e(pre\002x)i
(operators,)f(against)i(the)f(operator)f(on)i(the)g(top)f(of)h(the)g
(stack.)f(In)h(the)g(\002rst)g(case,)374 847 y(the)g(nearest)f
(unreduced)f(pre\002x)h(operator)f(is)j(called)f Fr($)p
FD(,)h(and)e(it)i(may)e(be)i(compared)c(with)k(an)f(operator)e
Fr(irator)374 946 y FD(from)j(the)i(input.)f(If)g Fr($)h
FD(has)g(higher)e(precedence,)g(it)i(is)h(reduced,)d(by)h(using)g
Fr(UNARY)g FD(to)h(apply)f(it)h(to)g(the)g(current)374
1046 y(e)o(xpression)h Fr(e)p FD(,)i(and)f(it)i(becomes)e(the)h(ne)n(w)
g(e)o(xpression.)e(Otherwise,)h(the)h(parser')-5 b(s)30
b(beha)n(vior)e(depends)h(on)g(the)374 1146 y(\002xity)20
b(of)g Fr(irator)p FD(;)f(it)i(may)f(reduce)f Fr(irator)p
FD(,)g(shift)i(it,)f(or)g(insert)h Fr(juxtarator)p FD(.)374
1270 y Fv(h)p Fx(g)o(ener)o(al)e(par)o(sing)h(functions)p
Fv(i)n Fu(+)p Fv(\021)p 799 1314 2963 4 v 799 1422 4
108 v 823 1386 a Fo(parsePostfix)43 b(:)h(stack)g(*)h(\(ast)f(*)h
(prefixop)e(list\))h(*)h(lexeme)f(list)g(->)g(ast)p 3758
1422 V 799 1425 2963 4 v 457 1512 a Fr(and)49 b(parsePostfix\(stack,)d
(\(e,)j($)h(::)f(prefixes\),)1303 1612 y(ipts)h(as)f(RATOR)g(\(irator)f
(as)i(\(_,)f(_,)g(ifixity\)\))g(::)g(ipts'\))g(=)756
1711 y(if)g(noparens\($,)f(irator,)g(NONASSOC\))g(then)h(\(*)h(reduce)f
(prefix)f($)i(*\))855 1811 y(parsePostfix\(stack,)c(\(UNARY\($,)j(e\),)
g(prefixes\),)f(ipts\))756 1911 y(else)h(if)g(noparens\(irator,)e($,)i
(NONASSOC\))f(then)855 2010 y(\(*)i(irator)e(has)i(higher)e(precedence)
g(*\))855 2110 y(case)h(ifixity)955 2209 y(of)g(POSTFIX)g(=>)g(\(*)h
(reduce)e(postfix)h(rator)g(*\))1204 2309 y(parsePostfix\(stack,)1851
2409 y(\(UNARY\(irator,)f(e\),)h($)g(::)h(prefixes\),)1851
2508 y(ipts'\))1005 2608 y(|)f(INFIX)g(_)h(=>)f(\(*)h(shift,)e(look)h
(for)h(prefixes)e(*\))1204 2708 y(parsePrefix\(BIN\(stack,)e($)j(::)h
(prefixes,)e(e,)h(irator\),)1802 2807 y([],)g(ipts'\))1005
2907 y(|)g(PREFIX)99 b(=>)49 b Fv(h)p Fx(insert)21 b
Fr(juxtarator)p Fv(i)756 3006 y Fr(else)855 3106 y(raise)49
b(ParseError)1054 3206 y(\("can't)g(parse)g(\(\045s)g(e)h(\045s\);)f(")
g(\210)1104 3305 y("operators)f(have)h(equal)g(precedence",)f([$,)h
(irator]\))374 3430 y FD(If)19 b Fr(parsePostfix)f FD(encounters)g(an)h
(atom)g(in)h(the)f(input,)g(it)h(inserts)g Fr(juxtarator)e
FD(no)h(matter)h(what)f(the)h(state)374 3530 y(of)g(unreduced)d
(pre\002x)o(es,)i(since)i(consuming)d(atoms)i(is)h(the)f(purvie)n(w)f
(of)h Fr(parsePrefix)p FD(.)374 3654 y Fv(h)p Fx(g)o(ener)o(al)f(par)o
(sing)h(functions)p Fv(i)n Fu(+)p Fv(\021)556 3754 y
Fr(|)50 b(parsePostfix\(stack,)c(\(e,)j(prefixes\),)f(ipts)h(as)h(EXP)f
(_)h(::)f(_\))h(=)756 3853 y Fv(h)p Fx(insert)21 b Fr(juxtarator)p
Fv(i)374 3978 y FD(The)e(insertion)h(itself)h(is)g(straightforw)o(ard.)
374 4102 y Fv(h)p Fx(insert)g Fr(juxtarator)p Fv(i)n(\021)457
4202 y Fr(parsePostfix\(stack,)46 b(\(e,)j(prefixes\),)f(RATOR)h
(juxtarator)f(::)h(ipts\))p eop
%%Page: 22 22
22 21 bop 374 266 a FG(22)1316 b Fz(NORMAN)19 b(RAMSEY)457
448 y FD(The)h(other)h(major)f(case)i(for)e Fr(parsePostfix)g
FD(occurs)g(when)h(there)g(are)g(no)g(more)f(unreduced)e(pre\002x)j
(opera-)374 548 y(tors.)f(In)g(that)g(case,)g(comparison)e(must)j(be)f
(made)f(with)i Fr(srator)48 b(stack)p FD(,)20 b(the)g(operator)f(on)g
(top)h(of)g(the)g(stack.)374 672 y Fv(h)p Fx(g)o(ener)o(al)f(par)o
(sing)h(functions)p Fv(i)n Fu(+)p Fv(\021)556 772 y Fr(|)50
b(parsePostfix\(stack,)c(\(e,)j(prefixes)g(as)g([]\),)1303
872 y(ipts)h(as)f(RATOR)g(\(irator)f(as)i(\(_,)f(_,)g(ifixity\)\))g(::)
g(ipts')1254 971 y(\))g(=)756 1071 y(if)g(noparens\(srator)e(stack,)i
(irator,)f(LEFT\))h(then)855 1171 y(\(*)h(reduce)e(infix)h(on)h(stack)e
(*\))855 1270 y(case)h(stack)955 1370 y(of)g(BIN)g(\(stack',)g
(prefixes,)f(e',)h($\))h(=>)1204 1469 y(parsePostfix\(stack',)c
(\(BINARY\(e',)i($,)h(e\),)g(prefixes\),)1851 1569 y(ipts\))1005
1669 y(|)g(BOT)g(=>)h(raise)f(Impossible)f(\(*)99 b(BOT)49
b(has)g(lowest)g(prec)g(*\))756 1768 y(else)g(if)g(noparens\(irator,)e
(srator)i(stack,)f(RIGHT\))h(then)855 1868 y(case)g(ifixity)955
1968 y(of)g(POSTFIX)g(=>)g(\(*)h(reduce)e(postfix)h(rator)g(*\))1204
2067 y(parsePostfix\(stack,)d(\(UNARY\(irator,)h(e\),)j([]\),)f
(ipts'\))1005 2167 y(|)g(INFIX)g(_)h(=>)f(\(*)h(shift,)e(look)h(for)h
(prefixes)e(*\))1204 2267 y(parsePrefix\(BIN\(stack,)e([],)j(e,)g
(irator\),)g([],)g(ipts'\))1005 2366 y(|)g(PREFIX)99
b(=>)49 b Fv(h)p Fx(insert)21 b Fr(juxtarator)p Fv(i)756
2466 y Fr(else)905 2565 y(raise)49 b(ParseError)f(\("\045s)h(is)g
(non-associative",)e([irator]\))457 2690 y FD(As)21 b(abo)o(v)o(e,)d
(decorations)g(are)i(ignored.)374 2814 y Fv(h)p Fx(g)o(ener)o(al)f(par)
o(sing)h(functions)p Fv(i)n Fu(+)p Fv(\021)556 2914 y
Fr(|)50 b(parsePostfix)d(\(stack,)i(\(e,)g(prefixes\),)1353
3014 y(DECORATED)f(\(_,)i(IMAGE)f(l\))g(::)g(ipts'\))g(=)756
3113 y(parsePostfix\(stack,)d(\(e,)j(prefixes\),)f(l)i(@)f(ipts'\))457
3238 y FD(When)21 b(the)g(input)g(is)h(e)o(xhausted,)d(the)j(parser)e
(reduces)h(\002rst)h(the)f(pre\002x)o(es,)f(then)h(the)g(stack,)h
(until)f(it)h(reaches)e(the)374 3337 y(result.)374 3462
y Fv(h)p Fx(g)o(ener)o(al)f(par)o(sing)h(functions)p
Fv(i)n Fu(+)p Fv(\021)556 3562 y Fr(|)50 b(parsePostfix\(stack,)c(\(e,)
j($)h(::)f(prefixes\),)f([]\))i(=)756 3661 y(\(*)f(reduce)g(prefix)f($)
i(*\))756 3761 y(parsePostfix\(stack,)c(\(UNARY\($,)i(e\),)h
(prefixes\),)f([]\))556 3861 y(|)i(parsePostfix\(BIN)d(\(stack',)h
(prefixes,)g(e',)h($\),)h(\(e,)f([]\),)g([]\))g(=)756
3960 y(\(*)g(reduce)g(stack)g(*\))756 4060 y(parsePostfix\(stack',)d
(\(BINARY\(e',)h($,)j(e\),)f(prefixes\),)f([]\))556 4159
y(|)i(parsePostfix\(BOT,)d(\(e,)i([]\),)g([]\))g(=)h(e)457
4284 y FD(W)-7 b(e)21 b(complete)e(the)h(parser)g(with)g(functions)f
(that)h(parse)g(an)g(entire)g(input,)f(or)h(an)g(input)g(in)g
(parentheses.)374 4422 y Fv(h)p Fx(g)o(ener)o(al)f(par)o(sing)h
(functions)p Fv(i)n Fu(+)p Fv(\021)p 2323 4350 1438 4
v 2323 4549 4 200 v 929 w Fo(parse)44 b(:)h(image)f(->)g(ast)2347
4514 y(parseAtom)f(:)i(lexical_atom)e(->)h(ast)p 3758
4549 V 2323 4552 1438 4 v 457 4622 a Fr(and)49 b(parse\(IMAGE\(l\)\))e
(=)j(parsePrefix\(BOT,)c([],)k(l\))457 4721 y(and)f(parseAtom)f
(\(LEX_ATOM)g(a\))i(=)f(ATOM)g(a)556 4821 y(|)h(parseAtom)e(\(PARENS)h
(im\))99 b(=)49 b(parse)g(im)p eop
%%Page: 23 23
23 22 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(23)1089 448 y(A)t(P)t(P)t(E)t(N)
t(D)t(I)t(X)t(:)32 b(B)t(.)96 b(P)t(RO)t(O)t(F)t(S)30
b(O)t(F)e(C)t(O)t(R)t(R)t(E)t(C)t(T)t(N)t(E)t(S)t(S)374
598 y FD(Proofs)15 b(are)h(written)g(in)g(a)h(goal-directed,)d
(calculational)h(style.)h(A)h(goal-directed)c(proof)i(be)o(gins)g(with)
i(a)f(conclusion)374 697 y(to)26 b(be)g(pro)o(v)o(ed,)e(then)i(reasons)
g(backw)o(ards)f(to)n(w)o(ards)h(premises.)f(The)h(backw)o(ards)f(arro)
n(w)h Fv(\()h FD(is)g(pronounced)c(\223is)374 797 y(implied)c(by)-5
b(.)f(\224)374 975 y Fm(Pr)o(oposition)18 b(1)41 b Fr(parse)49
b(\(unparse)g(e\))20 b Fu(=)g Fr(e)p Fx(.)374 1153 y
Fm(Pr)o(oof)e FD(Re)n(write)j Fr(parse)49 b(\(unparse)f(e\))20
b FD(into)g(an)g(e)o(xpression)f(more)g(easily)i(pro)o(v)o(ed)c(equal)j
(to)g Fr(e)p FD(.)589 1314 y Fr(parse)49 b(\(unparse)g(e\))374
1477 y Fu(=)20 b FD(\(by)f(choosing)g(suitable)h Fr(a)g
FD(and)g Fr(tail)g FD(for)g(the)g(result)g(of)g Fr(unparse)48
b(e)p FD(\))589 1639 y Fr(parse)h(\(IMAGE)g(\(a,)g(tail\)\))374
1802 y Fu(=)20 b FD(\(by)f(the)h(de\002nition)g(of)f
Fr(parse)p FD(\))589 1963 y Fr(parse')49 b(\(BOT,)g(parseAtom)f(a,)i
(tail\))374 2127 y Fu(=)20 b FD(\(by)f(the)h(de\002nition)g(of)f
Fr(append)p FD(\))589 2288 y Fr(parse')49 b(\(BOT,)g(parseAtom)f(a,)i
(append\(tail,)d(EOI\)\))374 2451 y Fu(=)20 b FD(\(by)f(Proposition)g
(2\))589 2612 y Fr(parse'\(BOT,)48 b(e,)i(EOI\))374 2776
y Fu(=)20 b FD(\(by)f(de\002nition)g(of)h Fr(parse')p
FD(\))589 2937 y Fr(e)3695 3100 y Fh(3)374 3278 y Fm(Pr)o(oposition)e
(2)j(\(Corr)o(ectness)e(of)h(unparsing)g(in)h(context\))40
b Fx(If)22 b Fr(e)g Fx(is)g(any)g(e)n(xpr)m(ession,)f(and)g(if)35
b Fr(a)22 b Fx(and)h Fr(tail)e Fx(ar)m(e)374 3378 y(c)o(hosen)29
b(suc)o(h)h(that)g Fr(unparse)48 b(e)i(=)f(IMAGE\(a,)g(tail\))o
Fx(,)30 b(and)g(if)h Fr(s)f Fx(is)h(a)g(par)o(ser)g(stac)n(k)f(and)g
Fr(i)g Fx(an)g(input)374 3478 y(sequence)19 b(of)h(type)g
Fr(image')g Fx(suc)o(h)f(that)h(for)h(all)f(top-le)o(vel)f(oper)o(ator)
o(s)h Fv(\010)2527 3447 y Fl(0)2568 3478 y Fx(in)h Fr(tail)p
Fx(,)766 3655 y Fr(noparens)p Fu(\()p Fv(\010)1263 3621
y Fl(0)1282 3655 y Fw(;)9 b Fr(srator)20 b(s)p Fw(;)9
b Fr(RIGHT)p Fu(\))20 b Fx(and)g Fr(noparens)p Fu(\()p
Fv(\010)2661 3621 y Fl(0)2680 3655 y Fw(;)9 b Fr(irator)20
b(i)p Fw(;)9 b Fr(LEFT)p Fu(\))p Fw(;)374 3833 y Fx(then)19
b Fr(parse')49 b(\(s,)g(parseAtom)f(a,)i(append\(tail,)d(i\)\))j(=)f
(parse')g(\(s,)g(e,)h(i\))p Fx(.)374 4011 y Fm(Pr)o(oof)18
b FD(By)j(structural)e(induction)f(on)i Fr(e)p FD(.)h(If)f
Fr(e)g FD(is)h(an)f(atom,)g(write)g Fr(e)50 b(=)g(ATOM)f(x)p
FD(,)20 b(and)589 4173 y Fr(parse')49 b(\(s,)g(parseAtom)g(a,)g
(append\(tail,)f(i\)\))374 4336 y Fu(=)20 b FD(\(because)f(by)h
(assumption)f Fr(unparse)48 b(e)i(=)g(IMAGE)e(\(LEX)p
2374 4336 25 4 v 30 w(ATOM)h(x,)g(EOI\))p FD(\))589 4497
y Fr(parse')g(\(s,)g(parseAtom)g(\(LEX)p 1841 4497 V
29 w(ATOM)g(x\),)g(append\(EOI,)f(i\)\))374 4661 y Fu(=)20
b FD(\(by)f(de\002nitions)h(of)g Fr(parseAtom)f FD(and)g
Fr(append)p FD(\))589 4822 y Fr(parse')49 b(\(s,)g(ATOM)g(x,)h(i\))374
4985 y Fu(=)20 b FD(\(by)f(assumption\))589 5146 y Fr(parse')49
b(\(s,)g(e,)h(i\))p eop
%%Page: 24 24
24 23 bop 374 266 a FG(24)1316 b Fz(NORMAN)19 b(RAMSEY)457
448 y FD(F)o(or)27 b(the)h(induction)e(step,)i Fr(e)h
FD(must)f(ha)n(v)o(e)f(the)h(form)f Fr(e)18 b Fu(=)g
Fr(APP)p Fu(\()p Fr(l)p Fw(;)9 b Fv(\010)p Fw(;)g Fr(r)p
Fu(\))p FD(,)28 b(and)f(we)i(can)e(choose)h Fr(l)3395
418 y Fl(0)3444 448 y FD(and)f Fr(r)3642 418 y Fl(0)3692
448 y FD(as)374 548 y(in)20 b Fr(unparse)809 518 y Fl(0)829
548 y FD(,)h(so)g Fr(unparse)e(e)f Fu(=)g Fr(infixImage)p
Fu(\()p Fr(l)2068 518 y Fl(0)2087 548 y Fw(;)9 b Fv(\010)p
Fw(;)g Fr(r)2266 518 y Fl(0)2287 548 y Fu(\))p FD(.)21
b(Because)g(both)f Fr(l)2878 518 y Fl(0)2919 548 y FD(and)g
Fr(r)3110 518 y Fl(0)3152 548 y FD(ha)n(v)o(e)g(type)g
Fr(image)p FD(,)374 648 y(we)h(can)g(write)h Fr(l)872
617 y Fl(0)911 648 y Fu(=)c Fr(IMAGE)p Fu(\()p Fr(a)1326
660 y Fn(l)1366 648 y Fw(;)9 b Fr(t)1448 660 y Fn(l)1489
648 y Fu(\))22 b FD(and)f Fr(r)1735 617 y Fl(0)1774 648
y Fu(=)d Fr(IMAGE)p Fu(\()p Fr(a)2189 660 y Fn(r)2229
648 y Fw(;)9 b Fr(t)2311 660 y Fn(r)2352 648 y Fu(\))p
FD(.)22 b(By)g(using)e(juxtaposition)g(to)h(abbre)n(viate)f(ap-)374
747 y(pending,)e(we)i(write)h Fr(unparse)e(e)f Fu(=)g
Fr(a)1562 759 y Fn(l)1603 747 y Fr(t)1653 759 y Fn(l)1705
747 y Fv(\010)12 b Fr(a)1832 759 y Fn(r)1872 747 y Fr(t)1922
759 y Fn(r)1963 747 y FD(.)1984 717 y Fj(1)2039 747 y
FD(W)-7 b(e)22 b(therefore)c(consider)589 911 y Fr(parse)839
881 y Fl(0)860 911 y Fu(\()p Fr(s)p Fw(;)9 b Fr(parseAtom)19
b(a)1493 923 y Fn(l)1534 911 y Fw(;)9 b Fr(t)1616 923
y Fn(l)1668 911 y Fv(\010)j Fr(a)1795 923 y Fn(r)1835
911 y Fr(t)1885 923 y Fn(r)1926 911 y Fr(i)p Fu(\))374
1077 y(=)20 b FD(\(by)f(applying)g(the)h(induction)e(hypothesis)h(to)h
Fr(l)1869 1047 y Fl(0)1890 1077 y FD(,)g(as)h(justi\002ed)g(belo)n(w\))
589 1241 y Fr(parse)839 1211 y Fl(0)860 1241 y Fu(\()p
Fr(s)p Fw(;)9 b Fr(l)p Fw(;)g Fv(\010)p Fr(a)1171 1253
y Fn(r)1211 1241 y Fr(t)1261 1253 y Fn(r)1302 1241 y
Fr(i)p Fu(\))374 1406 y(=)20 b FD(\(by)j(de\002nition)g(of)h
Fr(parse')p FD(,)g(the)g(parser)f(shifts,)i(because)e(by)h(hypothesis,)
e Fv(\010)j FD(is)g(a)g(top-le)n(v)o(el)d(operator)h(from)487
1506 y Fr(unparse)48 b(e)21 b FD(and)e(therefore)g Fr(noparens)p
Fu(\()p Fv(\010)p Fw(;)9 b Fr(srator)18 b(s)p Fw(;)9
b Fr(RIGHT)p Fu(\))o FD(\))589 1670 y Fr(parse)839 1640
y Fl(0)860 1670 y Fu(\()p Fr(sl)p Fv(\010)p Fw(;)g Fr(parseAtom)18
b(a)1607 1682 y Fn(r)1648 1670 y Fw(;)9 b Fr(t)1730 1682
y Fn(r)1771 1670 y Fr(i)p Fu(\))374 1835 y(=)20 b FD(\(by)f(applying)g
(the)h(induction)e(hypothesis)h(to)h Fr(r)1869 1805 y
Fl(0)1890 1835 y FD(,)g(as)h(justi\002ed)g(belo)n(w\))589
1999 y Fr(parse)839 1969 y Fl(0)860 1999 y Fu(\()p Fr(sl)p
Fv(\010)p Fw(;)9 b Fr(r)p Fw(;)g Fr(i)p Fu(\))374 2165
y(=)20 b FD(\(by)e(de\002nition)h(of)g Fr(parse')p FD(,)f(the)h(parser)
g(reduces,)f(because)h(by)g(hypothesis,)e Fv(\010)i FD(is)i(a)e(top-le)
n(v)o(el)f(operator)g(from)487 2265 y Fr(unparse)48 b(e)21
b FD(and)e(therefore)g Fr(noparens)p Fu(\()p Fv(\010)p
Fw(;)9 b Fr(irator)18 b(i)p Fw(;)9 b Fr(LEFT)p Fu(\))o
FD(\))589 2428 y Fr(parse)839 2398 y Fl(0)860 2428 y
Fu(\()p Fr(s)p Fw(;)g Fr(APP)p Fu(\()p Fr(l)p Fw(;)g
Fv(\010)p Fw(;)g Fr(r)p Fu(\))p Fw(;)g Fr(i)p Fu(\))374
2594 y(=)20 b FD(\(by)f(assumption\))589 2758 y Fr(parse)839
2728 y Fl(0)860 2758 y Fu(\()p Fr(s)p Fw(;)9 b Fr(e)p
Fw(;)g Fr(i)p Fu(\))457 2924 y FD(It)21 b(remains)g(to)h(justify)f
(applying)f(the)i(induction)d(hypothesis)h(to)i Fr(l)2421
2894 y Fl(0)2464 2924 y FD(and)f Fr(r)2656 2894 y Fl(0)2677
2924 y FD(.)h(By)g(de\002nition)e(of)h Fr(unparse)g FD(and)374
3023 y Fr(bracket)p FD(,)e(either)933 3204 y Fr(l)983
3170 y Fl(0)1022 3204 y Fu(=)f Fr(unparse)h(l)166 b FD(or)f
Fr(l)1975 3170 y Fl(0)2015 3204 y Fu(=)18 b Fr(parenthesize)p
Fu(\()p Fr(unparse)f(l)p Fu(\))p Fw(:)374 3386 y FD(In)23
b(the)h(latter)f(case,)h Fr(l)1025 3355 y Fl(0)1065 3386
y Fu(=)18 b Fr(IMAGE)p Fu(\()p Fr(PARENS)p Fu(\()p Fr(unparse)f(l)p
Fu(\))p Fw(;)9 b Fr(EOI)p Fu(\))p FD(,)24 b(so)g(by)f(the)h
(de\002nitions)f(of)g Fr(a)3319 3398 y Fn(l)3384 3386
y FD(and)g Fr(t)3578 3398 y Fn(l)3619 3386 y FD(,)h(we)374
3485 y(ha)n(v)o(e)19 b Fr(a)598 3497 y Fn(l)657 3485
y Fu(=)f Fr(PARENS)p Fu(\()p Fr(unparse)h(l)p Fu(\))i
FD(and)e Fr(t)1734 3497 y Fn(l)1794 3485 y Fu(=)f Fr(EOI)o
FD(,)j(and)589 3649 y Fr(parse)839 3619 y Fl(0)860 3649
y Fu(\()p Fr(s)p Fw(;)9 b Fr(parseAtom)19 b(a)1493 3661
y Fn(l)1534 3649 y Fw(;)9 b Fr(t)1616 3661 y Fn(l)1668
3649 y Fv(\010)j Fr(a)1795 3661 y Fn(r)1835 3649 y Fr(t)1885
3661 y Fn(r)1926 3649 y Fr(i)p Fu(\))374 3815 y(=)20
b FD(\(by)f(assumption)g(and)h(by)g(de\002nition)f(of)h
Fr(parseAtom)p FD(\))589 3978 y Fr(parse)839 3948 y Fl(0)860
3978 y Fu(\()p Fr(s)p Fw(;)9 b Fr(parse)p Fu(\()p Fr(unparse)19
b(l)p Fu(\))p Fw(;)9 b Fv(\010)p Fr(a)1854 3990 y Fn(r)1894
3978 y Fr(t)1944 3990 y Fn(r)1985 3978 y Fr(i)p Fu(\))374
4144 y(=)20 b FD(\(by)f(the)h(induction)f(hypothesis)f(applied)i(to)g
Fr(l)p FD(,)g(with)h(empty)e(stack)h(and)g(inputs\))589
4308 y Fr(parse)839 4278 y Fl(0)860 4308 y Fu(\()p Fr(s)p
Fw(;)9 b Fr(l)p Fw(;)g Fv(\010)p Fr(a)1171 4320 y Fn(r)1211
4308 y Fr(t)1261 4320 y Fn(r)1302 4308 y Fr(i)p Fu(\))374
4474 y FD(which)19 b(is)i(the)g(step)f(made)g(abo)o(v)o(e.)457
4573 y(The)f(case)i(where)f Fr(l)1044 4543 y Fl(0)1083
4573 y Fu(=)e Fr(unparse)h(l)i FD(is)g(the)f(interesting)g(case.)589
4737 y Fr(parse)839 4707 y Fl(0)860 4737 y Fu(\()p Fr(s)p
Fw(;)9 b Fr(parseAtom)19 b(a)1493 4749 y Fn(l)1534 4737
y Fw(;)9 b Fr(t)1616 4749 y Fn(l)1668 4737 y Fv(\010)j
Fr(a)1795 4749 y Fn(r)1835 4737 y Fr(t)1885 4749 y Fn(r)1926
4737 y Fr(i)p Fu(\))374 4903 y(=)20 b FD(\(F)o(or)d(all)i(top-le)n(v)o
(el)e(operators)f Fv(\010)1424 4873 y Fl(0)1463 4903
y FD(in)j Fr(t)1597 4915 y Fn(l)1638 4903 y FD(,)f Fr(noparens)p
Fu(\()p Fv(\010)2174 4873 y Fl(0)2193 4903 y Fw(;)9 b
Fv(\010)p Fw(;)g Fr(LEFT)p Fu(\))p FD(,)18 b(and)g(we)g(apply)g(the)g
(induction)e(hypoth-)487 5003 y(esis)21 b(with)f(the)g(inputs)g
Fv(\010)p Fr(r)1261 4972 y Fl(0)1302 5003 y Fr(i)p FD(,)h(concluding)c
(that\))p 374 5074 399 5 v 374 5123 a Fg(\003)419 5147
y FE(This)g(shorthand)i(abbre)n(viates)h Ff(unparse)15
b(e)g Fd(=)f Ff(IMAGE)p Fd(\()p Ff(a)1832 5157 y Fc(l)1865
5147 y Fb(;)7 b Ff(append)p Fd(\()p Ff(t)2196 5157 y
Fc(l)2230 5147 y Fb(;)g Ff(INFIX)p Fd(\()p Fa(\010)p
Fb(;)g Ff(a)2598 5157 y Fc(r)2632 5147 y Fb(;)g Ff(t)2697
5157 y Fc(r)2732 5147 y Fd(\)\)\))o FE(.)p eop
%%Page: 25 25
25 24 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(25)589 447 y Fr(parse)839
417 y Fl(0)860 447 y Fu(\()p Fr(s)p Fw(;)9 b Fr(parseAtom)19
b(a)1493 459 y Fn(l)1534 447 y Fw(;)9 b Fr(t)1616 459
y Fn(l)1668 447 y Fv(\010)j Fr(a)1795 459 y Fn(r)1835
447 y Fr(t)1885 459 y Fn(r)1926 447 y Fr(i)p Fu(\))374
611 y FD(W)-7 b(e)16 b(must)g(sho)n(w)f Fr(noparens)p
Fu(\()p Fv(\010)1362 581 y Fl(0)1381 611 y Fw(;)9 b Fv(\010)p
Fw(;)g Fr(LEFT)p Fu(\))15 b FD(for)g(an)o(y)g(top-le)n(v)o(el)e
Fv(\010)2377 581 y Fl(0)2414 611 y FD(from)h Fr(t)2641
623 y Fn(l)2682 611 y FD(.)i(If)f Fv(\010)g FD(is)i(non-)d(or)h
(right-associati)n(v)o(e,)374 711 y(then)22 b(by)h(Proposition)e(3,)i
(precedence)7 b Fv(\010)1587 681 y Fl(0)1627 711 y Fw(>)20
b FD(precedence)6 b Fv(\010)p FD(,)23 b(and)g Fr(noparens)p
Fu(\()p Fv(\010)2844 681 y Fl(0)2863 711 y Fw(;)9 b Fv(\010)p
Fw(;)g Fr(LEFT)p Fu(\))23 b FD(follo)n(ws.)f(If)h Fv(\010)h
FD(is)374 810 y(left-associati)n(v)o(e,)18 b(then)589
972 y Fr(noparens)p Fu(\()p Fv(\010)1086 942 y Fl(0)1106
972 y Fw(;)9 b Fv(\010)p Fw(;)g Fr(LEFT)p Fu(\))374 1136
y Fv(\()20 b FD(\(by)g(de\002nition)f(of)h Fr(noparens)f
FD(and)h(left-associati)n(vity)f(of)h Fv(\010)p FD(\))589
1298 y Fv(\010)654 1268 y Fl(0)696 1298 y FD(binds)f(as)i(tightly)f(as)
h Fv(\010)374 1462 y(\()f FD(\(transiti)n(vity\))589
1624 y Fv(\010)654 1594 y Fl(0)696 1624 y FD(binds)f(as)i(tightly)f(as)
h Fv(\010)1379 1637 y Fi(l)1414 1624 y Fv(^)12 b(\010)1546
1637 y Fi(l)1591 1624 y FD(binds)19 b(as)i(tightly)f(as)h
Fv(\010)374 1787 y FD(Where)i Fr(unparse)969 1757 y Fl(0)1009
1787 y Fr(l)c Fu(=)f(\()p Fv(\010)1258 1799 y Fn(l)1298
1787 y Fw(;)9 b Fr(a)1380 1799 y Fn(l)1421 1787 y Fr(t)1471
1799 y Fn(l)1512 1787 y Fu(\))25 b FD(and)e(the)g(tw)o(o)h(clauses)g
(follo)n(w)f(by)g(applying)f(Proposition)g(4)i(to)f Fr(l)h
FD(and)f Fr(e)p FD(.)374 1887 y Fh(3)374 2066 y Fm(Pr)o(oposition)18
b(3)41 b Fx(If)23 b(an)f(e)n(xpr)m(ession)h Fr(e)18 b
Fu(=)g Fr(APP)p Fu(\()p Fr(l)p Fw(;)9 b Fv(\010)p Fw(;)g
Fr(r)p Fu(\))o Fx(,)23 b(then)f(we)h(can)f(c)o(hoose)g
Fr(l)2804 2035 y Fl(0)2848 2066 y Fx(and)f Fr(r)3045
2035 y Fl(0)3089 2066 y Fx(as)i(in)g Fr(unparse)3624
2035 y Fl(0)3643 2066 y Fx(,)g(so)374 2165 y(that)d Fr(unparse)f(e)f
Fu(=)g Fr(l)1094 2135 y Fl(0)1127 2165 y Fv(\010)12 b
Fr(r)1254 2135 y Fl(0)1273 2165 y Fx(.)270 2328 y(1.)41
b(If)23 b Fv(\010)f Fx(is)i(non-associative)o(,)c(then)i(e)o(very)h
(top-le)o(vel)f(oper)o(ator)f(in)i Fr(l)2309 2298 y Fl(0)2353
2328 y Fx(and)f Fr(r)2551 2298 y Fl(0)2595 2328 y Fx(has)g(a)h(pr)m
(ecedence)e(gr)m(eater)i(than)f(that)374 2428 y(of)e
Fv(\010)p Fx(.)270 2527 y(2.)41 b(If)20 b Fv(\010)g Fx(is)h
(left-associative)o(,)f(then)g(e)o(very)g(top-le)o(vel)f(oper)o(ator)g
(in)h Fr(r)2268 2497 y Fl(0)2310 2527 y Fx(has)g(a)g(pr)m(ecedence)f
(gr)m(eater)h(than)f(that)h(of)h Fv(\010)p Fx(.)270 2627
y(3.)41 b(If)20 b Fv(\010)g Fx(is)h(right-associative)o(,)e(then)h(e)o
(very)g(top-le)o(vel)f(oper)o(ator)g(in)i Fr(l)2324 2597
y Fl(0)2365 2627 y Fx(has)f(a)h(pr)m(ecedence)d(gr)m(eater)i(than)g
(that)g(of)g Fv(\010)p Fx(.)374 2806 y Fm(Pr)o(oof)h
FD(First,)k(do)e(case)h(analysis)f(on)g Fr(l)1514 2775
y Fl(0)1554 2806 y Fu(=)17 b Fr(bracket)p Fu(\()p Fr(unparse)2368
2775 y Fl(0)2408 2806 y Fr(l)p Fw(;)9 b Fr(LEFT)p Fw(;)g
Fv(\010)p Fu(\))o FD(.)24 b(If)f Fr(l)2992 2775 y Fl(0)3037
2806 y FD(is)i(parenthesized,)c(then)374 2905 y(\(3\))k(and)h(half)f
(of)h(\(1\))g(hold)f(v)n(acuously)f(because)h Fr(l)1893
2875 y Fl(0)1941 2905 y FD(has)h(no)g(top-le)n(v)o(el)e(operators.)h
(Otherwise,)g(we)i(can)e(assume)374 3005 y(that)20 b
Fr(unparse)869 2975 y Fl(0)909 3005 y Fr(l)f Fu(=)f(\()p
Fv(\010)1158 3017 y Fn(l)1198 3005 y Fw(;)9 b Fr(l)1280
2975 y Fl(0)1301 3005 y Fu(\))q FD(,)20 b(and)589 3167
y(F)o(or)g(all)h(top-le)n(v)o(el)e(operators)f Fv(\010)1535
3137 y Fl(0)1577 3167 y FD(in)i Fr(l)1712 3137 y Fl(0)1733
3167 y FD(,)g(precedence)7 b Fv(\010)2222 3137 y Fl(0)2261
3167 y Fw(>)18 b FD(precedence)6 b Fv(\010)374 3330 y(\()20
b FD(\(introducing)e Fv(\010)974 3342 y Fn(l)1014 3330
y FD(\))589 3490 y(F)o(or)i(all)h(top-le)n(v)o(el)e(operators)f
Fv(\010)1535 3460 y Fl(0)1577 3490 y FD(in)i Fr(l)1712
3460 y Fl(0)1733 3490 y FD(,)g(precedence)7 b Fv(\010)2222
3460 y Fl(0)2261 3490 y Fv(\025)18 b FD(precedence)6
b Fv(\010)2791 3503 y Fi(l)513 3589 y Fv(^)21 b FD(precedence)7
b Fv(\010)1037 3601 y Fn(l)1096 3589 y Fw(>)18 b FD(precedence)7
b Fv(\010)374 3747 y(\()20 b FD(\(de\002nitions)f(of)h(\223co)o(v)o
(ered\224)e(and)i(\223binds)f(as)i(tightly)f(as\224\))589
3909 y(Fragment)f Fu(\()p Fv(\010)1025 3921 y Fn(l)1066
3909 y Fw(;)9 b Fr(l)1148 3879 y Fl(0)1169 3909 y Fu(\))21
b FD(is)g(co)o(v)o(ered)d Fv(^)j FD(precedence)7 b Fv(\010)2103
3921 y Fn(l)2162 3909 y Fw(>)18 b FD(precedence)6 b Fv(\010)374
4073 y(\()20 b FD(\(de\002nition)f(of)h Fr(noparens)p
FD(\))589 4229 y(Fragment)f Fu(\()p Fv(\010)1025 4241
y Fn(l)1066 4229 y Fw(;)9 b Fr(l)1148 4199 y Fl(0)1169
4229 y Fu(\))21 b FD(is)g(co)o(v)o(ered)513 4329 y Fv(^)g
Fr(noparens)p Fu(\(\()p Fv(\010)1118 4341 y Fn(l)1158
4329 y Fw(;)9 b Fr(l)1240 4298 y Fl(0)1261 4329 y Fu(\))p
Fw(;)g Fv(\010)p Fw(;)g Fr(LEFT)p Fu(\))j Fv(^)g FD(associati)n(vity)7
b Fv(\010)18 b(6)p Fu(=)g Fr(LEFT)374 4487 y Fv(\()i
FD(\(de\002nition)f(of)h Fr(bracket)p FD(\))589 4643
y(Fragment)f Fu(\()p Fv(\010)1025 4655 y Fn(l)1066 4643
y Fw(;)9 b Fr(l)1148 4612 y Fl(0)1169 4643 y Fu(\))21
b FD(is)g(co)o(v)o(ered)513 4742 y Fv(^)g Fr(bracket)p
Fu(\(\()p Fv(\010)1068 4754 y Fn(l)1108 4742 y Fw(;)9
b Fr(l)1190 4712 y Fl(0)1211 4742 y Fu(\))p Fw(;)g Fv(\010)p
Fw(;)g Fr(LEFT)p Fu(\))21 b FD(is)g(not)f(parenthesized)e
Fv(^)j FD(associati)n(vity)8 b Fv(\010)18 b(6)p Fu(=)g
Fr(LEFT)374 4900 y Fu(=)i FD(\(by)f(assumption\))589
5059 y Fr(unparse)49 b(l)21 b FD(is)g(co)o(v)o(ered)513
5159 y Fv(^)g Fr(l)639 5129 y Fl(0)681 5159 y FD(is)g(not)f
(parenthesized)e Fv(^)j FD(associati)n(vity)9 b Fv(\010)18
b(6)p Fu(=)f Fr(LEFT)p eop
%%Page: 26 26
26 25 bop 374 266 a FG(26)1316 b Fz(NORMAN)19 b(RAMSEY)374
448 y Fv(\()h FD(\(Proposition)f(4,)h(assumption\))589
612 y(associati)n(vity)9 b Fv(\010)18 b(6)p Fu(=)g Fr(LEFT)374
778 y FD(Which)i(pro)o(v)o(es)e(\(3\))i(and)f(half)h(of)g(\(1\).)g(A)g
(similar)h(ar)o(gument)c(pro)o(v)o(es)i(\(2\))h(and)f(the)h(other)g
(half)g(of)g(\(1\).)368 b Fh(3)374 959 y Fm(Pr)o(oposition)18
b(4)41 b Fx(F)-9 b(or)21 b(any)f(e)n(xpr)m(ession)g Fr(e)p
Fx(,)g Fr(unparse')48 b(e)21 b Fx(is)g(pr)l(operly)f(co)o(ver)m(ed.)374
1140 y Fm(Pr)o(oof)e FD(By)j(structural)e(induction.)f(The)i(base)g
(case)h(is)g(tri)n(vial.)457 1239 y(F)o(or)e(the)i(induction)d(step,)i
(we)h(must)f(pro)o(v)o(e)589 1403 y Fr(unparse')49 b(e)20
b FD(is)h(properly)e(co)o(v)o(ered)374 1569 y Fu(=)h
FD(\(letting)f Fr(e)g Fu(=)f Fr(l)12 b Fv(\010)g Fr(r)19
b FD(and)g Fr(unparse)h(e)e Fu(=)g Fr(l)1790 1539 y Fl(0)1822
1569 y Fv(\010)12 b Fr(r)1949 1539 y Fl(0)1990 1569 y
FD(as)21 b(abo)o(v)o(e\))589 1733 y Fu(\()p Fv(\010)p
Fw(;)9 b Fr(l)768 1703 y Fl(0)801 1733 y Fv(\010)j Fr(r)928
1703 y Fl(0)948 1733 y Fu(\))21 b FD(is)g(properly)d(co)o(v)o(ered)374
1898 y Fv(\()i FD(\()p Fv(\010)g FD(is)h(a)g(top-le)n(v)o(el)e
(operator)f(of)i Fr(l)1474 1868 y Fl(0)1506 1898 y Fv(\010)12
b Fr(r)1633 1868 y Fl(0)1653 1898 y FD(\))589 2062 y
Fu(\()p Fv(\010)p Fw(;)d Fr(l)768 2032 y Fl(0)801 2062
y Fv(\010)j Fr(r)928 2032 y Fl(0)948 2062 y Fu(\))21
b FD(is)g(co)o(v)o(ered)374 2228 y Fu(=)f FD(\(de\002nition)f(of)g
(\223co)o(v)o(ered\224\))589 2391 y(F)o(or)h(all)h(top-le)n(v)o(el)e
(operators)30 b Fv(\010)1547 2362 y Fl(0)1600 2391 y
FD(in)20 b Fr(l)1735 2362 y Fl(0)1767 2391 y Fv(\010)12
b Fr(r)1894 2362 y Fl(0)1914 2391 y Fw(;)d Fv(\010)2011
2362 y Fl(0)2053 2391 y FD(binds)20 b(as)g(tightly)g(as)h
Fv(\010)374 2557 y Fu(=)f FD(\(distrib)n(uting\))589
2718 y(F)o(or)g(all)h(top-le)n(v)o(el)e(operators)30
b Fv(\010)1547 2688 y Fl(0)1600 2718 y FD(in)20 b Fr(l)1735
2688 y Fl(0)1756 2718 y Fw(;)9 b Fv(\010)1853 2688 y
Fl(0)1894 2718 y FD(binds)20 b(as)h(tightly)f(as)h Fv(\010)513
2818 y(^)g(\010)g FD(binds)e(as)i(tightly)f(as)h Fv(\010)513
2918 y(^)g FD(F)o(or)f(all)h(top-le)n(v)o(el)e(operators)30
b Fv(\010)1547 2887 y Fl(0)1600 2918 y FD(in)20 b Fr(r)1735
2887 y Fl(0)1756 2918 y Fw(;)9 b Fv(\010)1853 2887 y
Fl(0)1894 2918 y FD(binds)20 b(as)h(tightly)f(as)h Fv(\010)374
3077 y Fu(=)f FD(\(re\003e)o(xi)n(vity)e(of)i(\223binds)g(as)h(tightly)
e(as,)-6 b(\224)21 b(de\002nition)e(of)h(\223co)o(v)o(ered\224\))589
3241 y Fu(\()p Fv(\010)p Fw(;)9 b Fr(l)768 3211 y Fl(0)789
3241 y Fu(\))21 b FD(is)g(co)o(v)o(ered)d Fv(^)j Fu(\()p
Fv(\010)p Fw(;)9 b Fr(r)1454 3211 y Fl(0)1475 3241 y
Fu(\))21 b FD(is)g(co)o(v)o(ered)374 3407 y Fu(=)f FD(\(body)e(of)i
Fr(unparse')p FD(\))589 3568 y Fu(\()p Fv(\010)p Fw(;)9
b Fr(bracket)p Fu(\()p Fr(unparse)1450 3538 y Fl(0)1490
3568 y Fr(l)p Fw(;)g Fr(LEFT)p Fw(;)g Fv(\010)p Fu(\)\))20
b FD(is)h(co)o(v)o(ered)513 3668 y Fv(^)g Fu(\()p Fv(\010)p
Fw(;)9 b Fr(bracket)p Fu(\()p Fr(unparse)1450 3638 y
Fl(0)1490 3668 y Fr(r)p Fw(;)g Fr(RIGHT)p Fw(;)g Fv(\010)p
Fu(\)\))20 b FD(is)h(co)o(v)o(ered)374 3828 y Fv(\()f
FD(\(brack)o(eting)e(lemma\))589 3991 y Fr(unparse)939
3961 y Fl(0)980 3991 y Fr(l)j FD(properly)d(co)o(v)o(ered)g(and)h
Fr(unparse)2124 3961 y Fl(0)2165 3991 y Fr(r)h FD(properly)e(co)o(v)o
(ered)374 4157 y(which)h(is)i(the)g(induction)d(hypothesis.)2187
b Fh(3)374 4338 y Fm(Lemma)20 b(1)h(\(Brack)o(eting)e(lemma\))41
b Fx(If)22 b(fr)o(a)o(gment)f Fr(f)h Fx(is)h(pr)l(operly)f(co)o(ver)m
(ed,)f(then)g(for)h(any)f(oper)o(ator)g Fr(rator)g Fx(and)374
4438 y(associativity)e Fr(a)p Fx(,)i Fr(bf)49 b(=)h(\(rator,)e
(bracket\(f,)g(a,)i(rator\)\))19 b Fx(is)i(co)o(ver)m(ed.)374
4619 y Fm(Pr)o(oof)i FD(By)j(case)g(analysis)g(on)f(the)g(result)h(of)f
Fr(bracket)p FD(.)g(If)g(the)h(result)f(is)i(parenthesized,)c(then)i
Fr(bf)h FD(is)g(tri)n(vially)374 4718 y(co)o(v)o(ered,)17
b(because)j(it)h(contains)e(no)h(top-le)n(v)o(el)f(operators.)457
4818 y(Otherwise,)g(let)i(us)g(write)f Fr(f)50 b(=)f(\($,)h(im\))p
FD(.)20 b(Our)f(goal)h(is)h(to)g(sho)n(w)e(that)581 4982
y Fr(bf)50 b(=)f(\(rator,)g(bracket\(\($,)e(im\),)j(a,)f(rator\))20
b FD(is)h(co)o(v)o(ered.)374 5147 y Fv(\()f FD(\(by)g(the)g(assumption)
f(that)h(the)g(result)h(of)f Fr(bracket)f FD(is)i Fr(im)p
FD(\))p eop
%%Page: 27 27
27 26 bop 1093 266 a Fz(UNP)-7 b(ARSING)17 b(WITH)h(PREFIX)f(AND)h
(POSTFIX)f(OPERA)-8 b(T)o(ORS)717 b FG(27)581 447 y Fr(\(rator,)49
b(im\))20 b FD(is)h(co)o(v)o(ered)374 614 y Fv(\021)f
FD(\(by)f(De\002nition)h(2\))581 779 y(F)o(or)g(all)h(top-le)n(v)o(el)d
(operators)h Fv(\010)h FD(in)h Fr(im)o Fw(;)9 b Fv(\010)g
FD(binds)20 b(as)h(tightly)e(as)i Fr(rator)374 946 y
Fv(\()f FD(\(by)g(transiti)n(vity)f(of)h(\223binds)g(as)h(tightly)e
(as\224\))581 1109 y(F)o(or)h(all)h(top-le)n(v)o(el)d(operators)h
Fv(\010)h FD(in)h Fr(im)o Fw(;)76 b Fv(\010)32 b FD(binds)20
b(as)h(tightly)e(as)i Fr($)1767 1209 y Fv(^)32 b Fr($)21
b FD(binds)f(as)g(tightly)g(as)h Fr(rator)374 1371 y
Fv(\()f FD(\(pulling)f(second)g(clause)i(out)e(of)h Fv(8)g
FD(and)g(strengthening)e(it\))581 1534 y Fu(\()p FD(F)o(or)i(all)h
(top-le)n(v)o(el)e(operators)f Fv(\010)i FD(in)h Fr(im)o
Fw(;)9 b Fv(\010)21 b FD(binds)f(as)h(tightly)e(as)i
Fr($)p Fu(\))505 1633 y Fv(^)g Fr($)g FD(binds)e(as)i(tightly)f(as)h
Fr(rator)10 b Fv(^)i FD(associati)n(vity)c Fr($)19 b
Fu(=)f Fr(a)374 1795 y Fv(\021)i FD(\(by)f(de\002nitions)h(of)g(\223co)
o(v)o(ered\224)d(and)j Fr(noparens)p FD(\))581 1957 y
Fr(\($,)49 b(im\))21 b FD(is)g(co)o(v)o(ered)505 2057
y Fv(^)g Fr(noparens\($,)48 b(rator,)h(a\))374 2218 y
Fv(\()20 b FD(\(by)g(de\002nition)f(of)h(\223properly)e(co)o(v)o
(ered\224)g(and)h(of)h Fr(bracket)p FD(\))581 2380 y
Fr(\($,)49 b(im\))21 b FD(is)g(properly)d(co)o(v)o(ered)505
2480 y Fv(^)j Fr(bracket\(\($,)48 b(im\),)h FD(associati)n(vity)8
b Fr($,)50 b(rator\))19 b FD(is)i(not)f(parenthesized)374
2641 y(both)f(of)h(which)g(are)g(true)g(by)f(assumption.)2063
b Fh(3)1833 3139 y Fz(REFERENCES)407 3289 y(1.)60 b(Derek)20
b(C.)f(Oppen,)h(`Prettyprinting',)f FJ(A)n(CM)g(T)l(r)o(ansacations)i
(on)f(Pr)m(o)o(gr)o(amming)g(Langua)o(g)o(es)i(and)e(Systems)p
Fz(,)g FI(2)p Fz(\(4\),)f(465\226)523 3372 y(483)h(\(1980\).)407
3455 y(2.)60 b(John)18 b(Hughes,)f(`The)f(Design)h(of)g(a)f
(Pretty-printing)h(Library',)f(J.)g(Jeuring)h(and)h(E.)d(Meijer)i
(\(eds.\),)f FJ(Advanced)i(Functional)523 3538 y(Pr)m(o)o(gr)o(amming)p
Fz(.)h(Springer)g(V)-8 b(erlag,)19 b(LNCS)e(925,)j(1995,)g(pp.)f
(53\22696.)407 3621 y(3.)60 b(Donald)20 b(E.)e(Knuth,)h(`Literate)f
(programming',)i FJ(The)f(Computer)g(J)n(ournal)p Fz(,)h
FI(27)p Fz(\(2\),)f(97\226111)i(\(1984\).)407 3704 y(4.)60
b(Robin)24 b(Milner)m(,)g(Mads)g(T)-6 b(ofte,)23 b(and)i(Robert)e(W)-7
b(.)23 b(Harper)m(,)h FJ(The)f(De\002nition)i(of)e(Standar)m(d)j(ML)p
Fz(,)d(MIT)g(Press,)g(Cambridge,)523 3787 y(Massachusetts,)d(1990.)407
3870 y(5.)60 b(Norman)21 b(Ramse)o(y)g(and)g(Mary)g(F)-6
b(.)19 b(Fern)t(\264)-29 b(andez,)21 b(`Specifying)g(representations)g
(of)g(machine)g(instructions',)f FJ(A)n(CM)g(T)l(r)o(ans-)523
3953 y(actions)g(on)f(Pr)m(o)o(gr)o(amming)h(Langua)o(g)o(es)h(and)f
(Systems)p Fz(,)e FI(19)p Fz(\(3\),)i(492\226524)h(\(1997\).)407
4036 y(6.)60 b(Norman)22 b(Ramse)o(y)f(and)h(Jack)g(W)-7
b(.)20 b(Da)o(vidson,)i(`Machine)g(descriptions)g(to)g(b)o(uild)f
(tools)g(for)g(embedded)i(systems',)e FJ(A)n(CM)523 4119
y(SIGPLAN)d(W)-7 b(orkshop)21 b(on)f(Langua)o(g)o(es,)h(Compiler)o(s,)e
(and)h(T)-7 b(ools)19 b(for)g(Embedded)h(Systems)g(\(LCTES'98\))p
Fz(,)e(v)o(olume)h(1474)523 4202 y(of)g FJ(LNCS)p Fz(.)f(Springer)h(V)
-8 b(erlag,)18 b(June)i(1998,)g(pp.)f(172\226188.)407
4285 y(7.)60 b(Jef)n(fre)o(y)19 b(D.)f(Ullman,)h FJ(Elements)g(of)f(ML)
h(Pr)m(o)o(gr)o(amming)p Fz(,)g(Prentice)g(Hall,)f(Engle)n(w)o(ood)i
(Clif)n(fs,)e(NJ,)g(1994.)407 4368 y(8.)60 b(Laurence)31
b(C.)e(P)o(aulson,)h FJ(ML)g(for)g(the)g(working)g(pr)m(o)o(gr)o(ammer)
p Fz(,)h(Cambridge)g(Uni)n(v)o(ersity)f(Press,)g(Ne)n(w)g(Y)-8
b(ork,)29 b(second)523 4451 y(edition,)19 b(1996.)407
4534 y(9.)60 b(Matthias)19 b(Felleisen)g(and)g(Daniel)g(P)-8
b(.)18 b(Friedman,)h FJ(The)f(Little)g(MLer)p Fz(,)g(MIT)h(Press,)f
(December)i(1997.)369 4617 y(10.)61 b(Niklaus)18 b(W)m(irth,)f(`What)g
(can)h(we)g(do)g(about)h(the)f(unnecessary)i(di)n(v)o(ersity)e(of)g
(notation)g(for)g(syntactic)g(de\002nitions?',)g FJ(Com-)523
4700 y(munications)i(of)f(the)g(A)n(CM)p Fz(,)f FI(20)p
Fz(\(11\),)h(822\226823)i(\(1977\).)369 4783 y(11.)61
b(Alfred)22 b(V)-10 b(.)23 b(Aho,)f(Ra)o(vi)g(Sethi,)g(and)h(Jef)n(fre)
o(y)g(D.)f(Ullman,)g FJ(Compiler)o(s:)h(Principles,)f(T)-7
b(ec)o(hniques,)23 b(and)h(T)-7 b(ools)p Fz(,)22 b(Addison-)523
4866 y(W)-6 b(esle)o(y)h(,)19 b(1986.)369 4949 y(12.)61
b(Da)o(vid)19 b(Gries,)f FJ(The)h(Science)h(of)e(Pr)m(o)o(gr)o(amming)p
Fz(,)i(Springer)o(-V)-8 b(erlag,)18 b(1981.)369 5032
y(13.)61 b(W)-6 b(ei)17 b(Chen)h(and)h(Jan)f(T)m(ijmen)f(Udding,)i
(`Program)e(in)m(v)o(ersion:)i(More)f(than)g(fun!',)g
FJ(Science)g(of)g(Computer)g(Pr)m(o)o(gr)o(amming)p Fz(,)523
5115 y FI(15)p Fz(\(1\),)h(1\22613)h(\(1990\).)p eop
%%Page: 28 28
28 27 bop 374 266 a FG(28)1316 b Fz(NORMAN)19 b(RAMSEY)369
448 y(14.)61 b(J.)17 b(v)o(on)g(Wright,)f(`Program)i(in)m(v)o(ersion)f
(in)g(the)h(re\002nement)f(calculus',)g FJ(Information)h(Pr)m(ocessing)
g(Letter)o(s)p Fz(,)e FI(37)p Fz(\(2\),)i(95\226100)523
531 y(\(1991\).)369 614 y(15.)61 b(Norman)20 b(Ramse)o(y)f(and)h(Mary)f
(F)-6 b(.)18 b(Fern)t(\264)-29 b(andez,)20 b(`The)f(Ne)n(w)g(Jerse)o(y)
g(Machine-Code)i(T)-6 b(oolkit',)19 b FJ(Pr)m(oceedings)g(of)g(the)g
(1995)523 697 y(USENIX)f(T)-7 b(ec)o(hnical)19 b(Confer)m(ence)p
Fz(,)h(Ne)n(w)f(Orleans,)g(LA,)f(January)i(1995,)g(pp.)f(289\226302.)
369 780 y(16.)61 b(Alfred)22 b(V)-10 b(.)22 b(Aho,)h(Brian)f(W)-7
b(.)22 b(K)n(ernighan,)h(and)g(Peter)f(J.)g(W)-6 b(einber)o(ger)m(,)22
b FJ(The)g(A)-7 b(WK)22 b(Pr)m(o)o(gr)o(amming)i(Langua)o(g)o(e)p
Fz(,)g(Addison-)523 863 y(W)-6 b(esle)o(y)h(,)19 b(Reading,)g(MA,)g
(1988.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
